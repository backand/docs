<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Backand Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.backand.com'>Sign Up for a free app</a></li>
            <li><a href='https://github.com/backand'>View our samples on GitHub</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="documentation-overview">Documentation Overview</h1>

<h2 id="what-is-backand">What is Backand?</h2>

<p>Backand is a serverless development and deployment platform. Our goal is to take over the server side, letting you focus on the look, feel, and behavior of your application. We utilize Amazon Lambda and other tools to provide a full-featured back end for your web or mobile application.
Backand&rsquo;s goal is to free up the front end development of web applications by providing a rich, robust, and scalable back end with minimal impact on the development process. Backand provides you with most of what your application needs automatically, offering features like tracking data changes, logging, role-based security, back-office connectivity, and much more. You can even create your own server side actions with JavaScript, running custom server side queries and easily integrating with third party services.</p>

<h3 id="serverless-in-every-respect">Serverless in Every Respect</h3>

<p>Backand is a true serverless offering, providing everything you need to develop your app in a single provider. While we provide support for a function-as-a-service serverless approach in our NodeJS Custom Actions, our history as a Backend-as-a-Service provider lets you have all of the benefits of a serverless architecture, with none of the headaches. By using Backand as your serverless platform, you&rsquo;ll be free of the need to write pages of integration code, as all of our functionality is available through our SDK and through your Backand App Dashboard.</p>

<h3 id="native-microservice-architecture">Native Microservice Architecture</h3>

<p>We are a team of developers dedicated to making the development process easier. As a result, Backand is built as a set of microservices combined behind a management application. This gives us the capability to very quickly add new features and integrations, which we do on a regular basis. It also means you can use as little - or as much - of the platform as you need. We also constantly work with developers who use our platform, and due to our architecture we can easily add new integrations. Many of our most popular features began as user suggestions!</p>

<h3 id="backand-orm">Backand ORM</h3>

<p>Backand <a href="http://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a> automatically provides you with a REST API to perform <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations against your database. You can connect an existing database you already have, or create a new database with the Backand dashboard. When you create a database at Backand it is automatically populated in our cloud Database provider, providing an isolated database server that scales automatically, or even use in other applications entirely independent of Backand. When you register a database with Backand, it is truly your database.</p>

<h3 id="sql-and-nosql-the-best-of-both-worlds">SQL and NoSQL - The Best of Both Worlds</h3>

<p>Through the flexibility of Backand&rsquo;s API, you have the ability to work with your data at whatever level you desire. You can perform basic <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations in a couple ways. In one way you can mimic a SQL database by simply returning a shallow representation of the object, with foreign key references remaining as simple IDs in the response data. However, you can also perform deep queries that resolve all of the underlying data objects into a single set of response data, giving you the level of object detail that you often see with NoSQL databases. With a simple parameter change, you can switch between the two patterns at will.</p>

<h2 id="using-curl-with-backand">Using cURL with Backand</h2>
<pre class="highlight shell tab-shell"><code><span class="c"># Retrieve a list of items from your app</span>
<span class="c"># This call stores the MASTER_KEY and USER_KEY into environment variables</span>
<span class="c"># Following this pattern will enhance the security and reliability of any console</span>
<span class="c"># calls made to the API</span>
curl https://api.backand.com/1/objects/items -u <span class="nv">$MASTER_KEY</span>:<span class="nv">$USER_KEY</span>

<span class="c"># You can perform the same task using URL parameters:</span>
curl https://api.backand.com/1/objects/items?authorization<span class="o">=</span>basic+<span class="nv">$MASTER_KEY</span>:<span class="nv">$USER_KEY</span>
</code></pre>
<p>All calls made by our API can also be made on the command line using cURL. You simply need to either obtain a token to authenticate as a user with your application, provide a token allowing anonymous access to your app, or use your app&rsquo;s master key to override the authentication mechanism. Review our information on <a href="http://docs.backand.com/#authentication-with-oauth-2-0">authentication</a> for more info on the specific endpoints to use for each approach.</p>

<aside class="warning">Using the &ldquo;master key&rdquo; approach is very risky, as it completely bypasses the configured security in your application. We recommend only doing this while troubleshooting and exploring on the server - you should <strong>never</strong> use this technique on the client side unless you are fully aware of the consequences.</aside>

<h2 id="using-our-sdk-with-backand">Using our SDK with Backand</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Initialize the SDK</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="na">appName</span><span class="p">:</span> <span class="s1">'APP_NAME'</span><span class="p">,</span>
  <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'ANONYMOUS_TOKEN'</span>
<span class="p">});</span>

<span class="c1">// Retrieve a list of records from the server</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s1">'users'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<p>We also offer a full-featured SDK that you can use to communicate with your Backand application. Getting started with the SDK is as simple as configuring your application access details, initializing the SDK, and calling a <code class="prettyprint">getList()</code> function for one of the objects in your system. You configure the SDK with your application&rsquo;s <code class="prettyprint">APP_NAME</code> and <code class="prettyprint">ANONYMOUS_TOKEN</code>. Once you&rsquo;ve called <code class="prettyprint">init()</code> with these values, the SDK will use this data to automaticaly manage authentication headers for API requests to your app&rsquo;s REST API. See our <a href="#vanilla-sdk">Vanilla SDK documentation</a> for more details.</p>

<h2 id="response-format">Response format</h2>
<pre class="highlight plaintext"><code>// Sample response
{
  "totalRows": 2,
  "data": [
    {
      "__metadata": {
        "id": "1",
        "fields": {
          "id": {
            "type": "int",
            "unique": true
          },
          "items": {
            "collection": "items",
            "via": "user"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          }
        },
        "descriptives": {

        },
        "dates": {

        }
      },
      "id": 1,
      "items": null,
      "email": "matt@backand.com",
      "firstName": "Matt",
      "lastName": "Billock"
    },
    {
      "__metadata": {
        "id": "2",
        "fields": {
          "id": {
            "type": "int",
            "unique": true
          },
          "items": {
            "collection": "items",
            "via": "user"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          }
        },
        "descriptives": {

        },
        "dates": {

        }
      },
      "id": 2,
      "items": null,
      "email": "start@backand.io",
      "firstName": "Start",
      "lastName": "Backand"
    }
  ]
}
</code></pre>
<p>Our SDK will always respond to your requests with well-formed JSON representing the results of an action taken. We include metadata that can be used to parse the response where applicable, and this metadata is provided with each object in your system. Responses from the SDK wrap the HTTP response in a promise, allowing you to handle the results in an asynchronous manner.</p>

          <h1 id="backand-features">Backand Features</h1>

<p>This section contains documentation on the features offered by Backand. We will cover the following functional areas:</p>

<ul>
<li>Security and Authentication - a summary of the security features offered by Backand</li>
<li>Backand Storage - an overview of our file storage options</li>
<li>Backand Hosting - an overview of our hosting options</li>
<li>Custom Actions - an overview of the ability to add custom actions and event-based functionality</li>
<li>Queries - an overview of the on-demand query functionality</li>
<li>NoSQL Query Language - an overview of our NoSQL-style query language</li>
</ul>

<h2 id="the-user-object-and-security">The User Object and Security</h2>

<p>This section describes how to manage your app&rsquo;s users within Backand&rsquo;s user security paradigm. An important element to note up front is that, by default, <a href="https://www.backand.com">Backand</a> provides two independent user objects. One user object is handled entirely by Backand, and is responsible for authentication and role-based security. The data for this user object is stored in Backand&rsquo;s database, and as such cannot partake of your app&rsquo;s custom logic. The second user object is offered in the default data model for a Backand application, and is titled &lsquo;users&rsquo;. This object represents a user of your application, as opposed to a generic Backand user, and allows you to associate the user with various other objects in your application. Backand provides sync actions that allow you to keep these two user object lists up-to-date (see <a href="#link-your-apps-users-with-backands-registered-users">Link your app&rsquo;s users with Backand&rsquo;s registered users</a> for more info). We highly recommend running the <a href="https://github.com/backand/todos-with-users">todos-with-users app</a> in addition to reading this documentation. This simple app covers most of the user management use cases for a Backand application, such as allowing users to read all of your app&rsquo;s data but only allowing them to create and update their own objects, or restricting anonymous users to read-only access, or creating an Admin role that has full read-write-update-delete access to your application&rsquo;s objects.</p>

<h3 id="authentication-with-oauth-2-0">Authentication with OAuth 2.0</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># To obtain an access token using a username and password, use the following</span>
<span class="c"># command. This uses environment variables to ease presentation of the</span>
<span class="c"># information, and supplies the fields as data arguments to the cURL command.</span>
<span class="c"># $USERNAME - user name (email address) to authenticate</span>
<span class="c"># $PASSWORD - password for the user</span>
<span class="c"># $APP_NAME - the name of the backand application you are connecting to</span>
curl https://api.backand.com/token -d <span class="nv">username</span><span class="o">=</span><span class="nv">$USERNAME</span> -d <span class="nv">password</span><span class="o">=</span><span class="nv">$PASSWORD</span> -d <span class="nv">grant_type</span><span class="o">=</span>password -d <span class="nv">appName</span><span class="o">=</span><span class="nv">$APP_NAME</span>

<span class="c"># To obtain an access token using a Social Media master key (for connecting via</span>
<span class="c"># social media providers, like Facebook in the example below), use the following</span>
<span class="c"># command with parameter values as follows:</span>
<span class="c"># $SOCIAL_MEDIA_KEY - your app's social media access token</span>
<span class="c"># $APP_NAME - your Backand app's name</span>
curl -X GET https://api.backand.com/1/user/facebook/token?accessToken<span class="o">=</span><span class="nv">$SOCIAL_MEDIA_KEY</span>&amp;appName<span class="o">=</span><span class="nv">$APP_NAME</span>&amp;signupIfNotSignedIn<span class="o">=</span><span class="nb">true</span>

<span class="c"># You can then use the access token returned by this call to call any Backand API</span>
<span class="c"># for your application:</span>
<span class="c"># $ACCESS_TOKEN - the token obtained via a call to the token endpoint</span>
curl https://api.backand.com/1/objects/items -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span>
</code></pre>
<p>The default authentication setup for <a href="https://www.backand.com">Backand</a> applications relies on <a href="http://oauth.net/2/">OAuth2</a> to provide tokenized authentication. By logging in with your username (your email address), your password, and your app name, you receive an authentication token that is valid for 24 hours. This token is required for all communication with Backand, and as such we highly recommend that you use <a href="https://github.com/backand/vanilla-sdk">Backand&rsquo;s SDK</a> to help you manage the access token. You can change the default expiration of 24 hours by using a refresh token, which allows you to reuse the authentication token indefinitely. The refresh token is an encrypted hash of the master and user keys. You can revoke one (or all) of your user&rsquo;s refresh tokens by changing the refresh token and requiring users to re-authenticate. For more information, see the <a href="#vanilla-sdk">API Description</a>.</p>

<h4 id="parameters">Parameters</h4>

<ul>
<li><strong>signupIfNotSignedIn</strong> - (Optional, default false) - If the user tries to sign in without first registering for the application, the user will receive an error message (&ldquo;The user is not signed up to {appName}&rdquo;). If this value is set to true, then the user will be automatically registered with the app if they have not yet been signed up</li>
</ul>

<h4 id="sample-response">Sample response</h4>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Sample</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ThuuBiuTS9grkzbPW-yL5z3dd_Q48-Ml4oHCffgbWRUDr1rFIY_nYIqaL-he09sCicEVNE_wJCxZ4QS0E3SlG-fZOSOOHDlzORrVagcGvBtZoqTByvhiXgcwXPOkmeD8U1bZaAi8vLEr_wUY6f_rse9o8GKs5cjRpBZENurSytsXhXsv6XpSFcZUr5n7Za_nu5HDth2bOuM_2e-Kn3yOc2GDz9qXjZm_UQ9oMfvJnzjY16Qsw7_ynZAbRa4m6lRtXwsHunqv_R_8uhMGNwTxyg"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">86399</span><span class="p">,</span><span class="w">
  </span><span class="s2">"appName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bkndkickstart"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start@backand.io"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Backand"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Start"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fullName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Backand Start"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"regId"</span><span class="p">:</span><span class="w"> </span><span class="mi">950007</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The call to the token endpoint returns all of the information you need to use a token to connect to your Backand application. The access_token provided is authenticated with a single user in your app, and is provided an expiration time in seconds. You are also given details of the authenticated user, including their username, first and last name, user ID, and their security role.</p>

<h3 id="basic-authentication">Basic authentication</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Perform basic authentication via header</span>
curl https://api.backand.com/1/objects/items -u &lt;master key&gt;:&lt;user key&gt;
<span class="c"># Perform basic authentication using URL parameters</span>
curl https://api.backand.com/1/objects/items?authorization<span class="o">=</span>basic+&lt;master key&gt;:&lt;user key&gt;
</code></pre>
<p>You can use <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">basic auth</a> to ease working with other servers - simply enter the master key as the username, and the user key as the password. You can use this approach to obtain a list of Items by using the following API call:</p>

<p>You can also send the basic authorization token through as a query string.</p>

<aside class="warning">Do not use this method from the client side as it exposes your app&rsquo;s secret token, which can be used to perform any action in your system. This method is for server-side calls only.</aside>

<h3 id="anonymous-authentication">Anonymous authentication</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Perform anonymous authentication through headers</span>
curl https://api.backand.com/1/objects/items -H <span class="s2">"AnonymousToken: &lt;anonymous token&gt;"</span>
<span class="c"># You can also send the anonymous token through in a query string:</span>
curl https://api.backand.com/1/objects/items?AnonymousToken<span class="o">=</span>&lt;anonymous token&gt;
</code></pre>
<p>Backand also offers Anonymous Access, which allows you to access your application without the need to authenticate via username and password. By passing this value in a request header (e.g. AnonymousToken=<your token here>) you can perform api actions for your application</p>

<h3 id="user-registration">User Registration</h3>

<p>Registering with <a href="https://www.backand.com">Backand</a>, and creating an application, automatically sets you as a user with an &lsquo;Admin&rsquo; role in your new project (see <a href="#roles-security-templates">Roles and Security Templates</a> for more info). By default your application is marked public which mean any user can register to your application.</p>

<p>These users are assigned a default role &lsquo;User&rsquo;, which has full CRUD access to your app. Your roles will need to be configured when you enable public usage of your app (see <a href="#roles-security-templates">Roles and Security Templates</a> for more details).</p>
<pre class="highlight javascript tab-javascript--general"><code>  <span class="c1">//Create new Security Action in Before Create trigger with the following</span>
  <span class="c1">//code (this will update the role to 'Public'):</span>
  <span class="nx">userInput</span><span class="p">.</span><span class="nx">Role</span> <span class="o">=</span> <span class="s1">'Public'</span><span class="p">;</span>
</code></pre>
<aside class="notice">
For security reasons you cannot change the role from the sign-up API - this can only be accomplished either by having an admin change the appropriate settings on the Security & Auth -&gt; Registered Users page, or by creating a custom server-side action with Admin rights (see JavaScript tab).
</aside>

<h3 id="saving-additional-parameters-during-sign-up">Saving Additional Parameters During Sign-up</h3>

<p>In many cases, we would like to collect additional information from the user during sign up. We can automatically populate the related fields on the Users object as a part of the sign-up request by using the <code class="prettyprint">parameters</code> parameter for the sign-up call. The server, during the &lsquo;Create My App User&rsquo; action, will translate these key-value pairs into the appropriate fields on the &lsquo;Users&rsquo; object - as such, it is important that all fields provided already exist on the Users object. The following example demonstrates specifying a user&rsquo;s &ldquo;company&rdquo; name as a part of the sign-up:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="nx">Backand</span><span class="p">.</span><span class="nx">signup</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="p">{</span><span class="s2">"company"</span><span class="p">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">company</span><span class="p">}).</span><span class="nx">then</span><span class="p">(...);</span>
</code></pre>
<ol>
<li>Update the Model and add the field <code class="prettyprint">company</code> to the <code class="prettyprint">users</code> object:

<ol>
<li>Go to <code class="prettyprint">Objects</code> &ndash;&gt; <code class="prettyprint">Model</code></li>
<li>Add this line as a data field in the <code class="prettyprint">users</code> object model: <code class="prettyprint">&quot;company&quot;: {&quot;type&quot;: &quot;string&quot;}</code></li>
<li>Click on <code class="prettyprint">Validate &amp; Update</code></li>
</ol></li>
<li>When calling <code class="prettyprint">Backand.signup()</code>, send the <code class="prettyprint">parameters</code> object through as the last input parameter for the request. The code will resemble the following:</li>
<li>There&rsquo;s no need for server-side modifications - values for &ldquo;parameters&rdquo; are handled automatically by the action &lsquo;Create My App User&rsquo; (found in the <code class="prettyprint">Security Actions</code> section).</li>
<li>Modify the UI to collect the <code class="prettyprint">company</code> name for the user.</li>
</ol>

<p>Now, when sign-up is completed, you can see the company name in the <code class="prettyprint">users</code> object&rsquo;s Data tab.</p>

<h3 id="private-app">Private app</h3>

<p>You can change your app, which is public by default, to be private. This can be changed in the dashboard by setting the Public flag for your application to &lsquo;false&rsquo; in the Security &amp; Auth &ndash;&gt; Configuration menu. For a private app, the registration steps are as follow:</p>

<ul>
<li>First, set your app&rsquo;s registration page on the Security &amp; Auth &ndash;&gt; Configuration page.</li>
<li>Next, if you wish to use automated email verification, enable Sign-up Email Verification on the Security &amp; Auth &ndash;&gt; Configuration page</li>
<li>Once you have a registration page, enter the emails to invite on the Security &amp; Auth &ndash;&gt; Users page.</li>
<li>Once you have entered the emails you wish to invite, click the &lsquo;Invite User(s)&rsquo; button. This will send an email to each new user with a link to the registration page that you created.</li>
</ul>

<h3 id="email-verification-process">Email verification process</h3>

<p>The user enters his/her email, name and password on your registration page:</p>

<ul>
<li>After the user submits their registration, Backand sends a verification email to authenticate the user&rsquo;s identity if Sign-up Email Verification is enabled</li>
<li>If Sign-up Email Verification is not enabled, at this point registration is complete.</li>
<li>If Sign-up Email Verification is enabled, after the user clicks on the link in the verification email, Backand completes the registration process and redirects to the &lsquo;Custom Verified Email Page&rsquo; URL for your application. Configure this on the Security &amp; Auth &ndash;&gt; Configuration page<br></li>
</ul>

<p>For more information, see our <a href="#vanilla-sdk">Vanilla SDK documentation</a></p>

<h3 id="sso-single-sign-on">SSO (Single Sign On)</h3>

<p>Many organizations make use of tools like Active Directory in order to provide a central source of user-based authentication. This system is often used to drive a Single Sign On (SSO) feature in the organization, allowing users to simply use one set of credentials for all of the apps that they need to work with. Backand provides a method to incorporate SSO functionality using an override server-side action. This action allows you to perform your own authentication (via web-service calls to the domain controller, for example), and lets you return one of three actions.</p>

<ul>
<li>Returning &lsquo;allow&rsquo; allows the user access to the requested resource = in this case, you can return additional information in the &lsquo;additionalTokenInfo&rsquo; variable, which is added to the Backand authentication result. You may access this later by using the getUserDetails function of the Backand SDK.</li>
<li>Returning &ldquo;deny&rdquo; overrides Backand&rsquo;s auth, and provides an &lsquo;Access Denied&rsquo; mesage.</li>
<li>Returning &lsquo;ignore&rsquo; allows you to ignore the custom action, instead relying upon Backand&rsquo;s default authentication methods.</li>
</ul>

<p>You can configure this action in the Backand dashboard, under Security &amp; Auth =&gt; Security Actions.</p>

<h3 id="remove-user-from-the-app">Remove user from the app</h3>

<p>There are two ways to remove a user from the application. You can permanently remove a user from the application by deleting a user from the Registered Users grid. This requires the user to register again if they wish to continue using your app. Alternatively, you can un-check the &lsquo;approved&rsquo; checkbox in the user&rsquo;s row on the Security &amp; Auth &ndash;&gt; Users page. This allows you to reinstate the user simply by re-checking the &lsquo;approved&rsquo; column.</p>

<h3 id="anonymous-access">Anonymous Access</h3>

<p>By default the anonymous access is turned on with &lsquo;User&rsquo; role access, which mean any one can register to your app and make CRUD actions on any object.
If you wish to disable anonymous access to your application, go to Security &amp; Auth &ndash;&gt; Configuration and set &lsquo;Anonymous Access&rsquo; to off.</p>

<aside class="notice">To better control the permission of your app we recommend to change the anonymous users role to have less access. For more information on anonymous access, see the <a href="#backand-init">API Description</a>.</aside>

<h3 id="link-your-apps-users-with-backands-registered-users">Link your app&rsquo;s users with Backand&rsquo;s registered users</h3>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Validate Backand Registered User Action</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">validEmail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/</span><span class="se">\\</span><span class="sr">S+@</span><span class="se">\\</span><span class="sr">S+</span><span class="se">\\</span><span class="sr">.</span><span class="se">\\</span><span class="sr">S+/</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// write your code here</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">userInput</span><span class="p">.</span><span class="nx">email</span><span class="p">){</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Backand user must have an email."</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validEmail</span><span class="p">(</span><span class="nx">userInput</span><span class="p">.</span><span class="nx">email</span><span class="p">)){</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"The email is not valid."</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">userInput</span><span class="p">.</span><span class="nx">firstName</span><span class="p">){</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Backand user must have a first name."</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">userInput</span><span class="p">.</span><span class="nx">lastName</span><span class="p">){</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Backand user must have a last name."</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Create Backand Registered User Action</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">randomPassword</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">length</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">length</span><span class="p">)</span> <span class="nx">length</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">().</span><span class="nx">toString</span><span class="p">(</span><span class="mi">36</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">password</span><span class="p">){</span>
        <span class="nx">params</span><span class="p">.</span><span class="nx">password</span> <span class="o">=</span> <span class="nx">randomPassword</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">backandUser</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">password</span><span class="p">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
        <span class="na">confirmPassword</span><span class="p">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
        <span class="na">email</span><span class="p">:</span> <span class="nx">userInput</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
        <span class="na">firstName</span><span class="p">:</span> <span class="nx">userInput</span><span class="p">.</span><span class="nx">firstName</span><span class="p">,</span>
        <span class="na">lastName</span><span class="p">:</span> <span class="nx">userInput</span><span class="p">.</span><span class="nx">lastName</span>
    <span class="p">};</span>

    <span class="c1">// uncomment if you want to debug</span>
    <span class="c1">//console.log(params);</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span><span class="na">method</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">,</span><span class="na">url</span><span class="p">:</span><span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"1/user"</span> <span class="p">,</span><span class="na">data</span><span class="p">:</span><span class="nx">backandUser</span><span class="p">,</span> <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">token</span><span class="p">,</span> <span class="s2">"AppName"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">app</span><span class="p">}});</span>

    <span class="c1">// uncomment if you want to return the password and sign in as this user</span>
    <span class="c1">//return { password: params.password };</span>
    <span class="k">return</span> <span class="p">{</span> <span class="p">};</span>
<span class="p">}</span>
</code></pre>
<p><a href="https://www.backand.com">Backand</a> maintains an internal registered users object which is used to manage your app&rsquo;s security. However, most apps will have their own &lsquo;users&rsquo; object, which is used when implementing the app&rsquo;s business logic. Recognizing this, we have created automatic and custom trigger actions that can be used to synchronize the two objects. If you have an object in your system named &lsquo;users&rsquo;, and if that object has the fields &lsquo;email&rsquo;, &lsquo;firstName&rsquo;, and &lsquo;lastName&rsquo;, then every user that is registered with <a href="https://www.backand.com">Backand</a> for your app will automatically have an entry created in your custom &lsquo;users&rsquo; object. This takes place no matter how the user is added - both the sign-up API and the <a href="https://www.backand.com">Backand</a> dashboard will create an automated user record! Additionally, every time you add a user instance to your users object, a new user is created in Backand&rsquo;s internal registered users object. This new user will be given a randomized password, which can then be provided to the user for access to your application.</p>

<p>Below we&rsquo;ll look more in-depth at how this process is managed. Additionally, we&rsquo;ll explore what happens when the users object has an unexpected name (i.e. something other than &lsquo;users&rsquo;), or if the fields of the users object are named differently.</p>

<p>There are 3 sync actions located in Configuration -&gt; Security &amp; Auth that are triggered by Backand user registration:</p>

<ol>
<li>Create My App User</li>
<li>Update My App User</li>
<li>Delete My App User</li>
</ol>

<p>You can directly modify those JavaScript actions if needed.</p>

<aside class="notice">By default, Backand sets the Where Condition of the action to &lsquo;false&rsquo; if it detects that you do not have a users object in your model, meaning that the action will never run.</aside>

<p>If you have a users object in your model, Backand adds the following actions, which run before and during user creation</p>

<ul>
<li>Before Create: Validate Backand Register User</li>
<li>During Create: Create Backand Register User</li>
</ul>

<p>This action implements the other side of the relationship - after creating an instance in your custom &lsquo;users&rsquo; object, this code creates the corresponding entry in Backand&rsquo;s internal users object. If have named your custom user object anything other than &lsquo;users&rsquo;, you can add the above action into that object manually to achieve the same functionality. You will need to adjust the backandUser object creation to use the columns in your specific object, as the userInput object may have a different structure than that assumed above.</p>

<h3 id="roles-security-templates">Roles &amp; Security Templates</h3>

<p>Each user has a role. When you created your app, you were automatically assigned with an &lsquo;Admin&rsquo; role. The &lsquo;Admin&rsquo; role is a special role that allows you to make configuration changes in your app with Backand&rsquo;s administration tools. Non-admin roles, which should be used to secure your application, are used to define the permissions for each of the <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> actions for your objects and queries. Each Object and Query in your application is associated with a Security Template. In the security template, you assign different permissions for the possible <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> actions to each user role, allowing you to control your user&rsquo;s access to the system&rsquo;s create, read, update and delete actions for your objects. Template configuration is found on the Security &amp; Auth &ndash;&gt; Security Template page.</p>

<p>While Security Templates provide reusable permissions platforms that can be spread across a number of roles, you can also override security template settings and provide specific permissions for each individual role. This allows you to have more granular control over the <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> actions that can be performed by the users in your system. When a user with insufficient security access tries to perform an action for which they do not have permission, a 403 (Forbidden) error response is returned.</p>

<h3 id="security-actions">Security Actions</h3>

<p>Backand offers a number of pre-defined security actions that can be used to manage your application&rsquo;s security processes. These are available in the app dashboard under <strong>Security &amp; Auth -&gt; Security Actions</strong>. See <a href="#security-actions84">the Security Actions Documentation</a> for more details.</p>

<h2 id="backand-storage">Backand Storage</h2>

<p>Backand provides you with the ability to upload and delete files to and from Backand&rsquo;s robust storage. This is done on the server-side through Backand&rsquo;s Actions. It doesn&rsquo;t require any additional authentication and it is up to you to decide if and under what restrictions to expose this functionality to the client side. For example, you can restrict certain roles, handle the name of the files, associate the files with objects and manage counts of the amount of files per user.</p>

<p>The files.upload command returns a url that links to the file you uploaded. This is a public url. The storage is managed per Backand app.  </p>

<h3 id="custom-server-side-action-code">Custom Server-Side Action Code</h3>
<pre class="highlight javascript tab-javascript"><code><span class="c1">//Use the following JavaScript as the basis for your file upload action.</span>
<span class="c1">//Refer to the template function for information on global variables offered.</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">userProfile</span><span class="p">);</span> <span class="c1">// gets the current user role and id that enables you to perform security restrictions</span>
    <span class="c1">// upload file</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span> <span class="o">==</span> <span class="s2">"POST"</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">upload</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">filedata</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"url"</span><span class="p">:</span> <span class="nx">url</span><span class="p">};</span>
    <span class="p">}</span>
    <span class="c1">// delete file</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span> <span class="o">==</span> <span class="s2">"DELETE"</span><span class="p">){</span>
        <span class="nx">files</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">filename</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{};</span>    
    <span class="p">}</span>

<span class="p">}</span>
</code></pre>
<p>Both upload and delete are written in the same action and the method you use to call it determines the functionality. When the method is POST then the action performs upload and when it is DELETE the action performs delete. You can use the userProfile for restrictions or file name manipulations. You do not need to copy this code. It is ready for you when you click on the Backand <em>File Storage</em> action template.</p>

<h3 id="angular-client-side-code">Angular Client-Side Code</h3>
<pre class="highlight html tab-html"><code><span class="c">&lt;!-- Angular HTML --&gt;</span>
<span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"container"</span> <span class="na">ng-app=</span><span class="s">"app"</span> <span class="na">ng-controller=</span><span class="s">"DemoCtrl"</span> <span class="na">ng-init=</span><span class="s">"initCtrl()"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h2&gt;</span>Backand Simple Upload File<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;br/&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">role=</span><span class="s">"form"</span> <span class="na">name=</span><span class="s">"uploadForm"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">"{{imageUrl}}"</span> <span class="na">ng-show=</span><span class="s">"imageUrl"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"fileInput"</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">accept=</span><span class="s">"*/*"</span> <span class="na">ng-model=</span><span class="s">"filename"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"x"</span> <span class="na">class=</span><span class="s">"delete-file"</span> <span class="na">title=</span><span class="s">"Delete file"</span> <span class="na">ng-disabled=</span><span class="s">"!imageUrl"</span> <span class="na">ng-click=</span><span class="s">"deleteFile()"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// Client-side JavaScript</span>
<span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'backand'</span><span class="p">]);</span>

<span class="c1">// Backand security configuration for your app</span>
<span class="nx">myApp</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">BackandProvider</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// enter your app name here</span>
  <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">setAppName</span><span class="p">(</span><span class="s1">'YourAppName'</span><span class="p">);</span>
  <span class="c1">// enter your app anonymous token here</span>
  <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">setAnonymousToken</span><span class="p">(</span><span class="s1">'YourAnonymousToken'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">myApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DemoCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'$http'</span><span class="p">,</span> <span class="s1">'Backand'</span><span class="p">,</span> <span class="nx">DemoCtrl</span><span class="p">]);</span>

<span class="kd">function</span> <span class="nx">DemoCtrl</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$http</span><span class="p">,</span> <span class="nx">Backand</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Create a server side action in backand</span>
  <span class="c1">// Go to any object's actions tab</span>
  <span class="c1">// and click on the Backand Storage icon.</span>
  <span class="c1">// Backand consts:</span>
  <span class="kd">var</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">'/1/objects/'</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">baseActionUrl</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">'action/'</span>
  <span class="kd">var</span> <span class="nx">objectName</span> <span class="o">=</span> <span class="s1">'YourObjectName'</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">filesActionName</span> <span class="o">=</span> <span class="s1">'YourServerSideActionName'</span><span class="p">;</span>

  <span class="c1">// Display the image after upload</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="c1">// Store the file name after upload to be used for delete</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">filename</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="c1">// input file onchange callback</span>
  <span class="kd">function</span> <span class="nx">imageChanged</span><span class="p">(</span><span class="nx">fileInput</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//read file content</span>
    <span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>

    <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">upload</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">result</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">filename</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
      <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">};</span>

    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// register to change event on input file</span>
  <span class="kd">function</span> <span class="nx">initUpload</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">fileInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'fileInput'</span><span class="p">);</span>

    <span class="nx">fileInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">imageChanged</span><span class="p">(</span><span class="nx">fileInput</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

   <span class="c1">// call to Backand action with the file name and file data  </span>
  <span class="kd">function</span> <span class="nx">upload</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">filedata</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// By calling the files action with POST method in will perform</span>
    <span class="c1">// an upload of the file into Backand Storage</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
      <span class="na">url</span> <span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="nx">baseActionUrl</span> <span class="o">+</span>  <span class="nx">objectName</span><span class="p">,</span>
      <span class="na">params</span><span class="p">:{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="nx">filesActionName</span>
      <span class="p">},</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'application/json'</span>
      <span class="p">},</span>
      <span class="c1">// you need to provide the file name and the file data</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"filename"</span><span class="p">:</span> <span class="nx">filename</span><span class="p">,</span>
        <span class="s2">"filedata"</span><span class="p">:</span> <span class="nx">filedata</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">filedata</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">','</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">filedata</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="c1">//need to remove the file prefix type</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">deleteFile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">filename</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">'Please choose a file'</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// By calling the files action with DELETE method in will perform</span>
    <span class="c1">// a deletion of the file from Backand Storage</span>
    <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
      <span class="na">url</span> <span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="nx">baseActionUrl</span> <span class="o">+</span>  <span class="nx">objectName</span><span class="p">,</span>
      <span class="na">params</span><span class="p">:{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="nx">filesActionName</span>
      <span class="p">},</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'application/json'</span>
      <span class="p">},</span>
      <span class="c1">// you need to provide the file name</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"filename"</span><span class="p">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">filename</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="c1">// Reset the form</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'fileInput'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">initCtrl</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">initUpload</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>We created a simple example in Angular to experience the upload functionality.
You can see the code in action at <a href="http://codepen.io/backand/pen/ZQaYEV">codepen</a>. The relevant parts of the code are available in the JavaScript pane to the right.</p>

<h2 id="backand-hosting">Backand Hosting</h2>

<p>Backand offers high-performance, reliable, and secure hosting for AngularJS applications through the hosting and deployment tool. Built as a cloud-based service, Backand Hosting gives you an effortless way to deploy your Angular project to a hosted server.</p>

<p>Your project files will be available on <strong>https://hosting.backand.io/Your-App-Name</strong>, providing you an easy way to see what gets deployed for your project.</p>

<aside class="notice">
The Backand CLI (command-line interface) requires Node.js and Node Package Manager (NPM). To install Node and NPM, follow the instructions at <a href="https://nodejs.org">https://nodejs.org</a>. This one process handles both NodeJS and NPM.
</aside>

<h3 id="first-time-installation">First Time Installation</h3>
<pre class="highlight shell"><code>  <span class="nv">$ </span>npm install -g backand
  <span class="c"># or use sudo (with caution)</span>
</code></pre>
<p>The hosting and deployment functionality is provided with the Backand node package. Simply install the package from the command line as follows:</p>

<h3 id="updating-a-prior-version">Updating a Prior Version</h3>
<pre class="highlight shell"><code>  <span class="nv">$ </span>npm update -g backand
  <span class="c"># or use sudo (with caution)</span>
</code></pre>
<p>If you&rsquo;ve installed the Backand node package before, you will need to perform an update to get the new hosting and deployment functionality. Follow these steps to update your locally-installed version of Backand</p>

<h3 id="deploying-the-angular-project">Deploying the Angular Project</h3>
<pre class="highlight shell"><code>  backand sync --app <span class="o">{{</span>appName<span class="o">}}</span> --master <span class="o">{{</span>master-token<span class="o">}}</span> --user <span class="o">{{</span>user-token<span class="o">}}</span> --folder /path/to/project/folder
</code></pre>
<p>The Backand CLI, which we installed using NPM, provides the capability to deploy your project, as well as sync your local project folder. To deploy and sync, use the following command from the command line:</p>

<p>The parameters for this call are:</p>

<p><strong>&ndash;app</strong>: The current app name</p>

<p><strong>&ndash;master</strong>: The master token of the app (get it from Social &amp; Keys)</p>

<p><strong>&ndash;user</strong>: The token of the current user (get it from Team and click on key icon)</p>

<p><strong>&ndash;folder</strong>: The path of the local Angular folder to sync and deploy</p>

<h3 id="browsing-to-your-app">Browsing to your app</h3>

<p>Your app is now on air, just browse to <strong>https://hosting.backand.com/YourAppName</strong> and see it live.</p>

<h3 id="configuring-sync-in-gulp">Configuring Sync in Gulp</h3>
<pre class="highlight shell"><code>  <span class="c"># Install the backand hosting gulp plugin with NPM</span>
  npm install backand-hosting-s3
</code></pre><pre class="highlight javascript tab-javascript"><code>  <span class="c1">// Include the sync module in your project</span>
  <span class="kd">var</span> <span class="nx">backandSync</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../sync-module'</span><span class="p">);</span>

  <span class="c1">// add your app's credentials to the sts task</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'sts'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">masterToken</span> <span class="o">=</span> <span class="s2">"your master backand token"</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">userToken</span> <span class="o">=</span> <span class="s2">"your user backand token"</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">backandSync</span><span class="p">.</span><span class="nx">sts</span><span class="p">(</span><span class="nx">masterToken</span><span class="p">,</span> <span class="nx">userToken</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="c1">//Configure the task to sync to the 'src' folder</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'dist'</span><span class="p">,[</span><span class="s1">'sts'</span><span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>   
      <span class="kd">var</span> <span class="nx">folder</span> <span class="o">=</span> <span class="s2">"./src"</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">backandSync</span><span class="p">.</span><span class="nx">dist</span><span class="p">(</span><span class="nx">folder</span><span class="p">,</span> <span class="nx">appName</span><span class="p">);</span> <span class="c1">//appName - if you have only one app you don't need this parameter</span>
  <span class="p">});</span>

  <span class="c1">// Add a task to clean the cache</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'clean'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">backandSync</span><span class="p">.</span><span class="nx">clean</span><span class="p">();</span>
  <span class="p">});</span>
</code></pre>
<p>Backand can integrate with your existing <a href="http://gulpjs.com">gulpjs</a> configuration, allowing you to easily control deployment as you would the rest of your project. Below, we&rsquo;ll create a Gulp task to perform the deployment. This can then be used to deploy your application as a part of your standard build process.</p>

<p>To create the new Gulp deployment task:</p>

<ol>
<li><p>Install the Backand hosting gulp plugin using NPM</p></li>
<li><p>At the top of gulpfile.js add the <code class="prettyprint">require</code> call</p></li>
<li><p>Set your Backand credentials for the task. Credentials will be stored in file <code class="prettyprint">.backand-credentials.json</code>:</p></li>
<li><p>Configure the task to Sync folder &lsquo;./src&rsquo;:</p></li>
<li><p>Syncing is performed via a local cache file named &lsquo;.awspublish-<bucketname>&rsquo;. This file cache can become corrupted
after multiple uses, so we need to create one more task to perform cleanup after the deployment has completed:</p></li>
</ol>

<h2 id="realtime-database-communications">Realtime Database Communications</h2>
<pre class="highlight html tab-html"><code><span class="c">&lt;!-- Backand Socket Client --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib/socket.io-client/dist/socket.io.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- Backand SDK --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdn.backand.net/vanilla-sdk/1.0.9/backand.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdn.backand.net/angular1-sdk/1.9.5/backand.provider.js"</span><span class="nt">&gt;&lt;/script&gt;</span>   
</code></pre><pre class="highlight javascript tab-javascript--persistent"><code>  <span class="c1">// Configure the SDK to run the socket</span>
  <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">runSocket</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</code></pre>
<p>Backand&rsquo;s real-time communication functionality is based on the popular open-source Socket.io framework, which lets you add real-time functionality to your application. Backands Real-Time Database Communication sends events and JSON-formatted data to any authorized connected client. With Real-Time Communication from Backand, you can send real-time information to your application based on server-side logic in your application&rsquo;s custom actions. With this new feature events are picked up as they happen, rather than having to wait for a user-driven event to trigger a data reload.</p>

<p>Backands real-time database communications are completely secure. They provide you with total control over data access, allowing you to restrict transmission of sensitive data to only authorized roles. And since all communication is SSL-encrypted, you dont have to worry about the security of your data as it is transmitted across the web.</p>

<p>Using the real-time capability can enhance your app with instant updates to any Angular page, including updating charts, counters, logs, and other data-driven elements.</p>

<h3 id="setup">Setup</h3>

<ol>
<li>Upgrade to Backand SDK 1.9.5 or above.</li>
<li>Include the Backand SDK and Socket.io in your index.html file</li>
<li>Update Angular configuration section</li>
</ol>
<pre class="highlight shell tab-shell--persistent"><code>bower install socket.io-client
</code></pre>
<aside class="notice">You can also install socket using a package manager like bower</aside>

<h3 id="angular-client-code-sockets">Angular client code - Sockets</h3>
<pre class="highlight javascript tab-javascript"><code><span class="nx">Backand</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'items_updated'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//Get the 'items' object that have changed</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<p>Backand&rsquo;s SDK already includes all the code needed for the client-side Socket.IO JavaScript integration. All you need to do is add a listener in your Angular controller or service. In the event that you need to implement your client on a platform other than JavaScript, review the relevant <a href="http://socket.io/blog/socket-io-on-ios/">iOS</a> or <a href="http://socket.io/blog/native-socket-io-and-android/">Android</a> documentation.</p>

<p>Using Backand&rsquo;s SDK, you can add event listening to your application with a simple function. You don&rsquo;t even need to provide an emit event to track changes - Backand will automatically update you whenever you change data using Backand&rsquo;s REST API out of the box.</p>

<h3 id="server-side-code-sockets">Server side code - Sockets</h3>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Emit to users</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">emitUsers</span><span class="p">(</span><span class="s2">"items_updated"</span><span class="p">,</span><span class="nx">userInput</span><span class="p">,</span> <span class="p">[</span><span class="s2">"user2@gmail.com"</span><span class="p">,</span><span class="s2">"user1@gmail.com"</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// Emit to a role</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">emitRole</span><span class="p">(</span><span class="s2">"items_updated"</span><span class="p">,</span><span class="nx">userInput</span><span class="p">,</span> <span class="s2">"Role"</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Emit to all</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">emitAll</span><span class="p">(</span><span class="s2">"items_updated"</span><span class="p">,</span> <span class="nx">userInput</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>When working with a Custom JavaScript Action in the Backand dashboard, you can add the &ldquo;emit&rdquo; command to notify the client of updates based upon events and sent data that are important to your use case. The actions can be based on database triggers (Create, Update or Delete), or in an on-demand action called from client-side logic.</p>

<p>There 3 type of emit commands you can use in order to notify consuming applications of event data:</p>

<ul>
<li>socket.emitUsers: <code class="prettyprint">socket.emitUsers(&#39;event_Name&#39;,object, []);</code></li>
</ul>

<p>This command sends event only to users specified in the second argument, which should be formatted as an array. To make this array dynamic, you&rsquo;ll need to use a Backand Query action. First call the Query to obtain the users, then convert the JSON into an array of user IDs (email addresses).</p>

<ul>
<li>socket.emitRole: <code class="prettyprint">socket.emitUsers(&#39;event_Name&#39;,object, &#39;role&#39;);</code></li>
</ul>

<p>This command sends the event to all the users in a specified role. Be aware that this command will override any data security filter you may have configured for your application.</p>

<ul>
<li>socket.emitAll: <code class="prettyprint">socket.emitAll(&#39;event_Name&#39;,object);</code></li>
</ul>

<p>This command sends event to all connected users, regardless of their role or permission settings. Be aware that this command vertices any data security filters you may have configured for your application. Use this emit type for general event broadcasting.</p>

<h2 id="custom-actions">Custom Actions</h2>

<p>In Backand&rsquo;s system, you can create server-side activity called Actions. These actions can be used for the purpose of security, integration, performance, notification and data integrity, among others, providing you with more flexibility in your app&rsquo;s design. There are two types of Actions that can be created. The first are initiated via a direct web request. These are known as &ldquo;On Demand&rdquo; actions. Additionally, you can create automated actions that take place based upon a data interaction event. These automated actions can occur whenever you create, update, or delete an item in your system. On Demand actions are associated with a specific object, and can be found on the <code class="prettyprint">Object --&gt; {name}</code> page in the Actions tab. The automated Create, Update and Delete actions are associated with a specific object that is compatible with a specific row in a table, while On Demand actions make association with a specific role optional.</p>

<p>There are 4 kinds of actions that can be created:</p>

<ul>
<li>Server side JavaScript code actions</li>
<li>Server side node.js code actions</li>
<li>Transactional database script actions</li>
<li>Send Email actions</li>
</ul>

<p>All 4 types of actions use the following common parameters:</p>

<ul>
<li>A Where condition - a SQL where clause that determines if the action will be performed.</li>
<li>Input Parameters, added to the query string of the request that triggers the action, that will serve as variable values that you can supply to your action&rsquo;s code. These parameters will serve as tokens in the action definition and will be replaced with the actual values when the code executes.</li>
</ul>

<h3 id="server-side-javascript-code">Server-side JavaScript Code</h3>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// write your code here</span>
    <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>
</code></pre>
<p>You can run standard JavaScript on the server. It runs on the <a href="http://en.wikipedia.org/wiki/V8_(JavaScript_engine)">V8 engine</a>. To execute the JavaScript action, put your code into the following function:</p>

<p>The function parameters are:</p>

<ul>
<li><code class="prettyprint">userInput</code>: This parameter is only provided for Create and Update actions, and is the object that was sent to the action. It is null for Delete actions, as well as for On Demand actions.</li>
<li><code class="prettyprint">dbRow</code>: This parameter is populated in After Create, Update, and Delete automated actions, and if you supply an optional ID to an On Demand action. The dbRow parameter will contain the row&rsquo;s entry in the database prior to any changes made.</li>
<li><code class="prettyprint">parameters</code>: This parameter represents the variables sent in the query string for the action.</li>
<li><code class="prettyprint">userProfile</code>: This parameter stores the current username, the user&rsquo;s role, and the access token used by the user to perform the action. It is of the format {&ldquo;username&rdquo;: &ldquo;string&rdquo;, &ldquo;role&rdquo;: &ldquo;string&rdquo;, &ldquo;token&rdquo;: &ldquo;string&rdquo;}.</li>
<li><code class="prettyprint">CONSTS</code>: Primarily used to obtain the API URL from <code class="prettyprint">CONSTS.apiUrl</code></li>
<li><code class="prettyprint">config</code>: Global configuration. You can maintain a global JSON configuration for your app. Your JSON configuration is consumed in the Config action. To update the configuration JSON, go to section <code class="prettyprint">General</code> in the <code class="prettyprint">Settings</code> menu on the Backand dashboard.</li>
<li><code class="prettyprint">socket</code>: <code class="prettyprint">socket</code> is an object that allows you to send real-time communication events and data to the client. <code class="prettyprint">socket</code> has 3 methods: <code class="prettyprint">emitUsers</code>, <code class="prettyprint">emitRole</code>, and <code class="prettyprint">emitAll</code>. Refer back to our documentation on <a href="#realtime-database-communications">Realtime Database Communication here</a> for more information.</li>
</ul>

<h4 id="making-http-requests-from-a-custom-action">Making HTTP Requests from a custom action</h4>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// GET example:</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span><span class="na">method</span><span class="p">:</span><span class="s2">"GET"</span><span class="p">,</span><span class="na">url</span><span class="p">:</span><span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"/1/objects/objectexample"</span><span class="p">,</span>
                       <span class="na">params</span><span class="p">:{</span><span class="na">filter</span><span class="p">:[{</span><span class="na">fieldName</span><span class="p">:</span><span class="s2">"fieldexample"</span><span class="p">,</span> <span class="na">operator</span><span class="p">:</span><span class="s2">"contains"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span><span class="s2">"somestring"</span><span class="p">}]},</span>
                      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">token</span><span class="p">}});</span>

<span class="c1">// POST example:</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span><span class="na">method</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">,</span><span class="na">url</span><span class="p">:</span><span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"/1/objects/objectexample"</span><span class="p">,</span>
                      <span class="na">data</span><span class="p">:{</span><span class="na">fieldexample1</span><span class="p">:</span><span class="s2">"somevalue"</span><span class="p">,</span><span class="na">fieldexample2</span><span class="p">:</span><span class="s2">"somevalue"</span><span class="p">},</span>
                      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">token</span><span class="p">}});</span>

<span class="c1">// PUT example:</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span><span class="na">method</span><span class="p">:</span><span class="s2">"PUT"</span><span class="p">,</span><span class="na">url</span><span class="p">:</span><span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"/1/objects/objectexample/5"</span><span class="p">,</span>
                      <span class="na">data</span><span class="p">:{</span><span class="na">fieldexample1</span><span class="p">:</span><span class="s2">"somevalue"</span><span class="p">,</span><span class="na">fieldexample2</span><span class="p">:</span><span class="s2">"somevalue"</span><span class="p">},</span>
                      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">token</span><span class="p">}});</span>

<span class="c1">// DELETE example:</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span><span class="na">method</span><span class="p">:</span><span class="s2">"DELETE"</span><span class="p">,</span>
                      <span class="na">url</span><span class="p">:</span><span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"/1/objects/objectexample/5"</span><span class="p">,</span>
                      <span class="na">fieldexample2</span><span class="p">:</span><span class="s2">"somevalue"</span><span class="p">},</span>
                      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">token</span><span class="p">}});</span>
</code></pre>
<p>In addition to the above parameters, you&rsquo;re also given access to <code class="prettyprint">$http</code>. <code class="prettyprint">$http</code> is a service for HTTP calls, similar to Angular&rsquo;s $http without the promise (since it is a server side function it always runs in sync). <a href="#vanilla-sdk">See the full API description for more details</a>.</p>

<p>To make a request, simply feed a parameter hash into the $http object. The available parameters are:</p>

<ul>
<li>method - <code class="prettyprint">GET</code>, <code class="prettyprint">POST</code>, <code class="prettyprint">PUT</code>, or <code class="prettyprint">DELETE</code></li>
<li>url - Build this using <code class="prettyprint">CONSTS.apiUrl</code> as a base</li>
<li>params - parameters for the call, such as filter data (<strong>GET only</strong>)</li>
<li>data - data for the call, such as field data for a <code class="prettyprint">POST</code> call</li>
<li>headers - the headers to use with the request, typically just the authorization header</li>
</ul>

<h4 id="a-note-about-the-authorization-header">A Note About The Authorization Header:</h4>

<p>Sending the authorization header to the $http function is optional. When you make a $http request with an authorization header and the value of the userProfile.token (as in the examples above), the request will run in the context of the current user and with his assigned role. Alternatively, if you choose not to send an authorization header, the action will run in the context of an admin role. Send the authorization header with the request if you are going to use information about the current user in the action, otherwise you do not need to do so.</p>

<h4 id="debugging">Debugging</h4>

<p>Debugging should be done using either console.log or console.error. For example, to dump the contents of variable
<code class="prettyprint">object</code>:</p>

<p><code class="prettyprint">console.log(object)</code></p>

<p><code class="prettyprint">console.error(object)</code></p>

<p>These are sent to the Logging section of the Backand dashboard, under <code class="prettyprint">Log</code> -&gt; <code class="prettyprint">Console</code>.</p>

<h4 id="error-handling">Error Handling</h4>

<p>If your code results in an error (for example, if you write the following: <code class="prettyprint">throw new Error(&quot;An error occurred!&quot;)</code>), the request will return HTTP status 417, and the response body will contain the associated error message.</p>

<p>These are also sent to the Logging section of the Backand dashboard, under <code class="prettyprint">Log</code> -&gt; <code class="prettyprint">Server Side Exceptions</code>.</p>

<h4 id="return-values">Return values</h4>

<p>Triggered actions will have a response that matches the format expected by the triggering call (such as the return value of a <code class="prettyprint">CREATE</code> call).</p>

<p>On Demand actions, though, will return whatever value is returned by the custom server code, which can be any properly-formatted JSON string.</p>

<h3 id="server-side-node-js-code">Server-Side Node.js Code</h3>

<p>Using Backand, you can develop distributed Node.js actions and host them with your Backand application - no additional servers needed! You can use the Server-Side Node.js action to work with any NPM package, build sophisticated action behaviors, perform complex coding tasks, and more.</p>

<p>For Server-Side Node.js Code actions, you develop the code on your local machine. The code is then deployed to, and runs on, Backand&rsquo;s server. It functions just like any other Node.js project and can be fully debugged locally and, once you&rsquo;ve finished making changes, you can use the &ldquo;deploy&rdquo; command to publish the changes to your Backand application.</p>

<p>Follow these steps to create and run a Server-Side Node.js Code Action:</p>

<ul>
<li>First name the action, and use the init command by copy-pasting &ldquo;backand action init&hellip;&rdquo; to a command line within the folder in which you&rsquo;ll be developing your action. The action init command creates two folder levels on your local file system. The top level folder will be the name of the object controlling the action, while its child folder is the name of the action you are working with. We recommend that you always run the <strong>action init</strong> command from the root folder of the app&rsquo;s project when creating additional actions. This means you will have a sub-folder for each object, and under it, a sub -folder for each action.</li>
<li>Next, build your Node.js code in the <code class="prettyprint">action</code> folder like any Node other project using your preferred IDE. Add as many npm
packages as you need. Note - Your code <strong>must</strong> start with the index.js file - Backand uses this as the starting point for your Node.JS action.</li>
<li>To debug your code locally, run the debug.js file. Debug.js is provided by the init command, and is ignored when deploying the code to Backand.</li>
<li>To run your code on the Back&amp; server, use the deploy command by copy-pasting &ldquo;backand action deploy&hellip;&rdquo; into the command line used in the first step. The
deploy command will be available on the action page <strong>after</strong> the action has been initialized with &ldquo;backand action init&hellip;&rdquo;.</li>
</ul>

<p>You are now ready to develop your code locally, and test the action on the Backand Dashboard for your application!</p>

<h4 id="backand-cli">Backand CLI</h4>
<pre class="highlight shell"><code>    <span class="nv">$ </span>npm install -g backand
    <span class="c"># or use sudo (with caution)</span>
</code></pre>
<p>Backand uses the Backand CLI to control deployment and initialization. The CLI requires that Node.js and NPM are both installed. You can install them on your local machine by following the instructions at <a href="https://nodejs.org/">https://nodejs.org/</a>.</p>

<p>Once you&rsquo;ve set up Node and NPM, use NPM to install the Backand CLI as a global package.</p>

<h4 id="initialize-action">Initialize action</h4>
<pre class="highlight shell"><code>    <span class="nv">$ </span>backand action init --app &lt;app name&gt; --object &lt;object name&gt; --action &lt;action name&gt;  --master &lt;master token&gt; --user &lt;user token&gt;
</code></pre>
<p>To initialize the node.js code for the action on your local machine, use the <code class="prettyprint">action</code> command on the command line in the folder that will host your action&rsquo;s code</p>

<p>The parameters for this call are:</p>

<ul>
<li> <code class="prettyprint">--app</code>:       The current app name<br></li>
<li> <code class="prettyprint">--object</code>:      The object that the action belongs to<br></li>
<li> <code class="prettyprint">--action</code>:      The action name<br></li>
<li> <code class="prettyprint">--master</code>:      The master token of the app (obtained from the Social &amp; Keys section of the app&rsquo;s Security &amp; Auth configuration)<br></li>
<li> <code class="prettyprint">--user</code>:          The token of the current user (available from the TEam section of the app&rsquo;s Security &amp; Auth configuration - simply click on key icon next to an authorized user)<br></li>
</ul>

<h4 id="deploy-action">Deploy action</h4>
<pre class="highlight shell"><code>    <span class="nv">$ </span>backand action deploy --app &lt;app name&gt; --object &lt;object name&gt; --action &lt;action name&gt;  --master &lt;master token&gt; --user &lt;user token&gt;
</code></pre>
<p>To deploy your local Node.js code to Back&amp;, use the <code class="prettyprint">deploy</code> command with the Backand CLI</p>

<p>The parameters for this call are:</p>

<ul>
<li> <code class="prettyprint">--app</code>:       The current app name<br></li>
<li> <code class="prettyprint">--object</code>:      The object that the action belongs to<br></li>
<li> <code class="prettyprint">--action</code>:      The action name<br></li>
<li> <code class="prettyprint">--master</code>:   The master token of the app (obtained from the Social &amp; Keys section of the app&rsquo;s Security &amp; Auth configuration)<br></li>
<li> <code class="prettyprint">--user</code>:     The token of the current user (available from the TEam section of the app&rsquo;s Security &amp; Auth configuration - simply click on key icon next to an authorized user)<br></li>
<li> <code class="prettyprint">--folder</code>:   (Optional) The folder to deploy. By default the deployment occurs in the current folder</li>
</ul>

<h4 id="add-backand-sdk-to-node-js">Add Backand SDK to Node.js</h4>
<pre class="highlight shell"><code>    <span class="nv">$ </span>npm install backandsdk --save
</code></pre>
<p>To work with objects or other actions in Backand, you need to install the Backand SDK for Node.js. The Backand SDK ships with several code samples that demonstrate how to access other Backand functionality.</p>

<h3 id="transactional-database-scripts">Transactional Database Scripts</h3>

<p>Transactional database scripts are SQL scripts that run within the same transaction context as the triggering action, provided that the event occurs during the object event &ldquo;During the data save before the object is committed&rdquo;. This means that if the Create, Update or Delete request fails then your script will be rolled back like any other transaction.</p>

<h3 id="send-emails">Send Emails</h3>

<p>Send Email actions, in addition to common parameters, allow you to also supply the usual email fields: To, Cc, Bcc, From, Subject and Message. You can additionally provide an object ID to obtain a deep object to use in the action.</p>

<h2 id="queries">Queries</h2>

<p>You can create and call your own custom queries in your application. You can use parameters as tokens that will be replaced with the actual parameter values, similar to how <a href="#custom-actions">custom actions</a> work. You can create your own filters, sorting, and paging, as well as use aggregation to summarize information.</p>

<p>Click <a href="#nosql-query-language">NoSQL Query Language</a> for instruction on how to build queries with noSQL language or
use common MySQL syntax.</p>

<h2 id="nosql-query-language">NoSQL Query Language</h2>

<p>This query language is inspired by <a href="https://www.mongodb.com/">MongoDB</a>.</p>

<p>A query consists of these parts:</p>

<ol>
<li>fields to be extracted</li>
<li>table to extract the records from</li>
<li>expression for filtering the table rows</li>
<li>groupby - fields to group the data under</li>
<li>aggregate functions to be applied to columns in fields</li>
<li>orderby - fields to order the return data by</li>
<li>limit - an integer number of records to return.</li>
</ol>

<p>Only the table and expression parameters are mandatory.</p>

<h3 id="construction-and-translation">Construction and Translation</h3>
<pre class="highlight plaintext"><code>  SELECT fields with aggregation
  FROM table
  WHERE expression
  GROUP BY groupby
  ORDER BY orderby
  LIMIT limit
</code></pre>
<p>The NoSQL queries are then constructed into a SQL query. Each component of a NoSQL query hash corresponds to a different portion of the SQL query that ends up being run against your database. See the example query to the right to get a feeling of how the query translates into SQL statements.</p>

<h3 id="format">Format</h3>
<pre class="highlight plaintext"><code>{
  "object": "String",
  "q": "Expression",
  "fields": "Array of String",
  "groupBy": "Array of String",
  "aggregation": "Object mapping fields to aggregate functions"
}
</code></pre>
<p>NoSQL queries are constructed using JSON objects. The keys are mapped into their respective SQL keywords in the back-end before interacting with your database.</p>

<p>For example, the shortest query you can write would be <code class="prettyprint">{ &quot;object&quot;: &quot;table&quot;, &quot;q&quot;: &quot;query expression&quot; }</code>    </p>

<p>This NoSQL object is converted into the following SQL</p>

<p><code class="prettyprint">SELECT * FROM table WHERE query</code></p>

<h3 id="example-string-comparison">Example - String Comparison</h3>
<pre class="highlight plaintext"><code>{
    "object": "employees",
    "q": {
        "position" : "Sales Manager"  
    },
    "fields": ["name", "salary"]
}
</code></pre>
<p>A simple query can pluck the <code class="prettyprint">name</code> and <code class="prettyprint">salary</code> fields from an object named <code class="prettyprint">employees</code>. The query sample to the right executes this query for all employees with a position of &ldquo;Sales Manager&rdquo;</p>

<h3 id="example-constant-value-comparison">Example - Constant Value Comparison</h3>
<pre class="highlight plaintext"><code>{
    "object": "employees",
    "q": {
        "age": { "$lt" : 25 }
    }  
}
</code></pre>
<p>Queries can also be used to compare an object&rsquo;s  fields to constant values using common comparison operators. For example, to retrieve all fields for all employees under the age of 25, you can use the query to the right.</p>

<h3 id="example-range-based-comparison">Example - Range-based comparison</h3>
<pre class="highlight plaintext"><code>{
  "object": "employees",
  "q": {
    "age": {
      "$between": [25, 40]
    }
  }  
}
</code></pre>
<p>You can use the <code class="prettyprint">$between</code> operator to retrieve all records with values that lie between two specified endpoints. For example, the query to the right retrieves all employees with an age between 25 and 40.</p>

<h3 id="example-geographic-data-comparison">Example - Geographic Data Comparison</h3>
<pre class="highlight plaintext"><code>{
    "object": "city",
    "q": {
        "location" : { "$within" : [[32.0638130, 34.7745390], 25000]
    }
  }
}
</code></pre>
<p>You can use the <code class="prettyprint">$within</code> operator to locate all records within a geographic range. The parameters for this comparison are provided as an array of two elements. The first element is a tuple containing latitude and longitude, e.g. <code class="prettyprint">[32.0638130, 34.7745390]</code>, while the second is a distance in meters. To retrieve all cities within 25 km (25000m) of a given latitude and longitude, you can use a query like the one to the right.</p>

<h3 id="expressions">Expressions</h3>

<p>An expression can be either an AND expression, an OR expression, or a UNION query.</p>

<h4 id="and-expressions">AND expressions</h4>
<pre class="highlight plaintext"><code>{ "position": "Sales Manager", "age" : { "$lt" : 25 }, "city": "Boston" }
</code></pre>
<p>An AND expression is a conjunction of conditions on fields. An AND expression is JSON of the form <code class="prettyprint">{ A: condition, B: condition, ... }</code></p>

<p>For example, to retrieve all employees that are 25-years-old, a Sales manager, AND live in Boston, you could use the query on the right.</p>

<h4 id="or-expressions">OR expressions</h4>
<pre class="highlight plaintext"><code>{ "$or": [ { "num_employees": { "$gt": 30 } }, { "location": "Palo Alto" }  ]  }
</code></pre>
<p>An OR expression is a disjunction of conditions, <code class="prettyprint">{ $or: [ Expression1, Expression2, ...   ] }</code></p>

<p>For example, use the query to the right to find all offices that are either larger than 30 employees, or located in Palo Alto.</p>

<h4 id="union-queries">UNION queries</h4>
<pre class="highlight plaintext"><code>{
    "$union":   [
        {
            "object" : "Employees",
            "q" : {
                "$or" : [
                    {
                        "Budget" : {
                            "$gt" : 20
                        }
                    },
                    {
                        "Location" : {
                            "$like" :  "Palo Alto"
                        }
                    }
                ]
            },
            "fields": ["Location", "country"]
        },
        {
            "object" : "Person",
            "q" : {
                "name": "john"
            },
            "fields": ["City", "country"],
            "limit": 11
        }
    ]
}
</code></pre>
<p>A UNION query is a union of the results of queries, and will have the general format of <code class="prettyprint">{ $union: [ Query1, Query2, ...   ] }</code>. The query to the right, for example, combines a query looking for employees with a budget of 20 OR a location like Palo Alto with a query that retrieves the city and country fields for all entries in the <code class="prettyprint">Person</code> table with the name &ldquo;john&rdquo;, limiting the results to 11 records. The end result will combine both queries into a single response object.</p>

<h3 id="conditions-on-fields">Conditions on Fields</h3>

<p>Formally, a condition on a field is a key-value expression of the form <code class="prettyprint">{ Key : ValueExpression }</code>, where the fields are defined as follows:</p>

<ul>
<li><code class="prettyprint">Key</code> - name of the field</li>
<li><code class="prettyprint">ValueExpression</code> - An expression which has one of the following forms:

<ol>
<li>Constant - is the field value equal to the constant</li>
<li>Comparison with a comparison operator to a constant</li>
<li>Inclusion or exclusion in result of a sub query</li>
<li>Negation of another comparison</li>
</ol></li>
</ul>

<p>You can perform a number of different tests on objects using conditions. Using conditions, you can:</p>

<ol>
<li>Test equality of field to a constant value, e.g.  <code class="prettyprint">{ A: 6 }</code> =&gt; Is A equal to 6?</li>
<li>Compare a field using a comparison operator, e.g. <code class="prettyprint">{ A: { $gt: 8 }}</code> =&gt; Is A greater than 8? The set of comparison operators is quite extensive and includes: <code class="prettyprint">$lte</code>, <code class="prettyprint">$lt</code>, <code class="prettyprint">$gte</code>, <code class="prettyprint">$gt</code>, <code class="prettyprint">$eq</code>, <code class="prettyprint">$neq</code>, <code class="prettyprint">$not</code>, <code class="prettyprint">$within</code>, <code class="prettyprint">$between</code></li>
<li>Test if the value of the field is <code class="prettyprint">IN</code>  or <code class="prettyprint">NOT IN</code> the result of a sub-query.</li>
<li>Test for the negation of a comparison. For example, to test if the location field is not Boston, we can use<code class="prettyprint">{ &quot;location&quot;: { &quot;$not&quot; : &quot;Boston&quot; }}</code></li>
<li>Test for presence of a value. For example, if we want to test if a middle name field exists, we can do use <code class="prettyprint">{ &quot;middleName&quot;: {&quot;$exists&quot;: true} }</code></li>
</ol>

<p>Negation may sometimes be swapped for comparison. For example, to test if the location field is not equal to Paris, we can use negation: <code class="prettyprint">{ &quot;location&quot;: { &quot;$not&quot; : {&quot;$eq&quot;: &quot;Paris&quot; } } }</code></p>

<p>Another option is to use a not-equal operator: <code class="prettyprint">{ &quot;location&quot;: { &quot;$neq&quot;: &quot;Paris&quot; } }</code></p>

<h3 id="sub-queries">Sub Queries</h3>

<blockquote>
<p>This JSON can be used as a sub-query to retrieve the ID of all departments in the city of New York.</p>
</blockquote>
<pre class="highlight plaintext"><code>{ "object": "department", "q": { "city" : "New York" }, "fields" : ["id"]}
</code></pre>
<blockquote>
<p>Using the above sub-query, we can now test a new field - dept_id - with respect to the results of the sub-query. We simply use the <code class="prettyprint">$in</code> operator, and the query, as seen below.</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "dept_id": {
    "$in": {  
      "object": "department",
      "q": { "city" : "New York" },
      "fields" : ["id"]
    }
  }
}
</code></pre>
<blockquote>
<p>In this example, the &lsquo;<code class="prettyprint">deptId</code> field is a reference field referring the employees table to the department table. We can now use this sub-query as a part of a larger query retrieving all employees employed in departments that are located in New York.</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "object": "employees",
  "q" : {
    "deptId" : {
      "$in": {
        "object": "department",
        "q": {
          "city" : "New York"
        },
        "fields" : ["id"]
      }
    }
  }
}
</code></pre>
<blockquote>
<p>If we wanted to look at a more complex query, we could modify this a bit. Let&rsquo;s say we wanted to retrieve all employees whose department is located in New York, but the employee is located in Boston. To accomplish this, we use an AND expression to combine the two conditions:</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "object": "employees",
    "q" : {
        "deptId":
        {
            "$in": {
                "object": "department",
                "q": {
                    "city" : "New York"
                },
                "fields" : ["id"]
            }
        },
        "location": "Boston"
    }
}
</code></pre>
<p>You can use sub-queries to established a reduced scope of your objects to work with. They can then be composed into larger queries, providing you with extra flexibility in retrieving objects from your app.</p>

<aside class="notice">This technique relies upon retrieving a single field from the sub-query. Using more than one field would prove more complex and is neither recommended nor supported.</aside>

<h3 id="group-by-queries">Group By Queries</h3>

<blockquote>
<p>To group by &#39;Country&rsquo;, and then concatenate the &lsquo;Location&rsquo; field, use the following example code:</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "object" : "Employees",
    "q" : {
        "$or" : [
            {
                "Budget" : {
                    "$gt" : 20
                }
            },
            {
                "Location" : {
                    "$like" :  "Palo Alto"
                }
            }
        ]
    },
    "fields": ["Location", "Country"],
    "order": [["Budget", "desc"]],
    "groupBy": ["Country"],
    "aggregate": {
        "Location": "$concat"
    }
}
</code></pre>
<p>A group by query aggregates on fields, and then applies aggregation operators to the specified fields.</p>

<h3 id="algorithm-to-generate-sql-from-json-queries">Algorithm to Generate SQL from JSON Queries</h3>
<pre class="highlight javascript tab-javascript"><code>  <span class="nx">transformJson</span><span class="p">(</span><span class="nx">json</span><span class="p">,</span> <span class="nx">sqlSchema</span><span class="p">,</span> <span class="nx">isFilter</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>The result is a structure with the following fields:</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "str": "&lt;SQL statement for query&gt;",
    "select": "&lt;select clause&gt;",
    "from": "&lt;from clause&gt;",
    "where": "&lt;where clause&gt;",
    "group": "&lt;group by clause&gt;",
    "order": "&lt;order by clause&gt;",
    "limit": "&lt;limit clause&gt;"
}
</code></pre>
<p>The algorithm transforms from JSON to SQL using a top-down transformation.</p>

<h4 id="usage">Usage</h4>

<p>You can call the function by using the Javascript call <code class="prettyprint">transformJson</code>. The parameters to this are as follows:</p>

<ol>
<li><code class="prettyprint">json</code> - JSON query or filter</li>
<li><code class="prettyprint">sqlSchema</code> - JSON schema of database</li>
<li><code class="prettyprint">isFilter</code> - boolean - true if &lsquo;json&rsquo; is a filter</li>
<li><code class="prettyprint">callback</code> - &lsquo;function(err, result)&rsquo;, called upon completion</li>
</ol>

<h4 id="escaping">Escaping</h4>

<p>All constants appearing in the JSON query are escaped when transformed into SQL.</p>

<h4 id="filters">Filters</h4>

<blockquote>
<p>Variables take the form of:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--general"><code>  <span class="p">{{</span><span class="o">&lt;</span><span class="nx">variable</span> <span class="nx">name</span><span class="o">&gt;</span><span class="p">}}</span>
</code></pre>
<p>You also have the ability to mark a particular NoSQL query as a filter. This allows you to use variables in your query, which are populated on the server side from either parameters sent in with the filter, or from database data in your system.</p>

<aside class="notice">Variables should be enclosed in quotes (i.e. &lsquo;{{variable_name}}&rsquo; instead of {{variable_name}}) so that the final object sent to the server can be marked as valid JSON.</aside>

<p>Variables are not escaped when used as part of a filter or query - only constants can be escaped by Backand. With this in mind, you want to make sure that variables tied directly to user input are properly sanitized before being sent to the back-end. The SQL statement generated for the filter object will include the variables you provide. The variables will be substituted for the equivalent values prior to the execution of the query.</p>

          <h1 id="backand-dashboard">Backand Dashboard</h1>

<p>Backand&rsquo;s REST API allows you to fully access and manipulate the backend data for your system, giving you full access to the underlying database and related functionality from any program that can send an HTTP request. While we start by wrapping your database in a true RESTful API Interface, we also give you a lot of extras that you can use to replace the server in your app:</p>

<ul>
<li>You can define and execute custom queries that are triggered by a call to a URL</li>
<li>You can define and execute custom actions that execute whenever you hit a specific endpoint. These can be as simple as sending an email, or as complex as a custom server-side javascript function.</li>
<li>You can manage user security and access to your application automatically through Backand&rsquo;s security and authorization system</li>
<li>You can test every single endpoint in your system using Backand&rsquo;s API Playground</li>
<li>You can get immediate and up-to-date looks at your database&rsquo;s underlying tables and stored data, and even perform real-time manipulations of that data</li>
<li>You can create, retrieve, update, and delete every object in your system through a simple web call, and return as much - or as little - detail as you need</li>
</ul>

<p>Let&rsquo;s take a quick look at each available action in the Backand dashboard, and get started with focusing on the front-end of your application!</p>

<h2 id="docs-api">Docs &amp; API</h2>

<p>The Docs &amp; API tab contains links to kickstart tutorials, tutorials on converting existing applications to use Backand, and other useful documentation. let&rsquo;s take a look at each menu category below.</p>

<h3 id="examples">Examples</h3>

<p>This links to our <a href="https://www.backand.com/apps/">examples page</a>, which has useful sample applications for many different platforms. These sample applications work to show how best to integrate Backand with an application for each mentioned platform, and can be a good starting point for integrating Backand with an existing (or brand new) application.</p>

<h3 id="kickstart-tutorials">Kickstart Tutorials</h3>

<p>Our kickstart tutorials provide a list of kickstart apps that you can use to build an app for the platform specified. These kickstart apps ship with Backand already built-in and integrated, and provide you with tools to explore the SDK&rsquo;s functionality. They all work with the default data model, so getting the kickstart app wired up to a new Backand application is a simple matter of changing the appropriate keys in each example.</p>

<aside class='notice'>
We provide a platform selector, which allows you to only view the kickstarts, existing apps, and code samples throughout the dashboard that are relevant to your needs. Simply choose a different platform, and the dashboard will present all examples in the relevant version of JavaScript that matches your selection.
</aside>

<h3 id="existing-app-tutorials">Existing App Tutorials</h3>

<p>Our existing app tutorials provide a list of tutorials on connecting Backand into your existing application, with a number of different frameworks supported. These focus on including the Backand SDK, connecting to your app, and working with the data model. If you&rsquo;d like to see another platform included, please <a href="https://www.backand.com/contact/">contact us</a>!</p>

<aside class='notice'>
We provide a platform selector, which allows you to only view the kickstarts, existing apps, and code samples throughout the dashboard that are relevant to your needs. Simply choose a different platform, and the dashboard will present all examples in the relevant version of JavaScript that matches your selection.
</aside>

<h3 id="realtime-database">Realtime Database</h3>

<p>The Realtime Database tab provides documentation on configuring your Backand application to work with our Socket-based real-time communications capabilities. It outlines all of the steps necessary on both the client and server sides to get everything working in your app.</p>

<aside class="notice">Backand&rsquo;s realtime functionality relies upon Socket.io. We choose not to include this library by default as the JavaScript library itself is quite large, and can greatly increase the size of your application&rsquo;s assets. Make sure that when you enable socket functionality, that you have also included the Socket.io javascript in your project. </aside>

<h3 id="documentation">Documentation</h3>

<p>The documentation item has a link to this documentation.</p>

<h3 id="rest-api-playground">REST API Playground</h3>

<p>The REST API playground is a Swagger-based page from which you can exercise all of the SDK functionality. Use this to gain familiarity with the Backand REST API.</p>

<h2 id="objects">Objects</h2>

<p>The &ldquo;Objects&rdquo; section of the dashboard allows you to modify the specific objects in your application&rsquo;s database. A menu entry is created for each table in your database, and allows you to configure your application at the object level. For each object in your system, you are given access to the following areas to modify and work with.</p>

<h3 id="model">Model</h3>

<blockquote>
<p>This sample model JSON creates two objects - Items and Users</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"items"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"items"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"via"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>The Model parent tab allows you to modify your database&rsquo;s model structure, adding new objects and establishing the relationship between them. This can be done using either our GUI model editor, or the JSON schema editor. We also provide a tab demonstrating how to make - and sync - changes to your database using an external database tool (like MySQL Workbench). Below is a brief overview of how to use this interface.</p>

<aside class="notice">
In addition to the fields supplied by the user, Backand defines an &lsquo;id&rsquo; field, of type integer, which will be used as a primary key for the table.
</aside>

<aside class="notice">Backand offers support for automated population of created and updated timestamps. Simply add the `createdAt` or `updatedAt` fields to your model, and if they are present Backand will automatically populate them with the timestamp of the most recent POST or PUT request to that object.</aside>

<h4 id="model-diagram">Model Diagram</h4>

<p>The Model Diagram tab provides a GUI editor for working with your app&rsquo;s database schema. It works with the model JSON in the background to orchestrate changes to your database. Using the GUI you can easily add new objects, update existing objects, create relations between objects, and all other related database modification tasks.</p>

<h4 id="model-json">Model JSON</h4>

<p>The Model JSON tab provides a straightforward method of editing your database schema using well-formed JSON. You&rsquo;re given a pane to perform your edits, and a comparison pane so that you can easily see what has changed from the current schema. Once your changes are finalized, click &ldquo;Validate &amp; Update&rdquo; to finalize your changes.</p>

<h4 id="database-pending">Database (pending)</h4>

<p>This tab describes how to make the changes you desire in your model directly in the database. Once you&rsquo;ve made your changes via whichever RDBMS tool you prefer, you can click the &ldquo;Sync your database&rdquo; button to pull the changes into Backand, updating your schema and object list.</p>

<h3 id="object-list">Object List</h3>

<p>For each object in your schema, you are provided a dedicated management area for that object. These are accessed via a list beneath the &ldquo;New object&rdquo; entry.</p>

<p>Each object has a set of tabs provided that allow you to modify either the object&rsquo;s data, or the object itself. These tabs are Data, Actions, Security, Settings, and REST API</p>

<aside class="notice">You can also use the &ldquo;New object&rdquo; to quickly create a new object to add to your system.</aside>

<h4 id="data-tab">Data tab</h4>

<p>The data tab provides you with a quick method by which you can add new records, update existing records, or remove records from your database. For every action you take in this pane, we provide the code needed to reproduce the action using the SDK - simply select the appropriate language/JavaScript framework for your project, and copy the code into your application.</p>

<p>We also give you access to the Filter Data functionality, which can be used to quickly construct request filters that can be applied to GET requests. Simply click on the &ldquo;Filter Data&rdquo; link to expose a UI for constructing your filter, and the resulting parameter code will appear in the &ldquo;Request Code&rdquo; textbox on the right side of the screen.</p>

<h4 id="actions-tab">Actions tab</h4>

<p>The Actions tab allows you to work with custom actions in your object. Custom actions allow you to perform automated tasks in your Backand application. You can create actions that execute at any point during the database transaction context for an object, or create actions that execute whenever a specific URL is hit. See <a href="#custom-actions">our documentation on custom actions</a> for more information.</p>

<h4 id="security-tab">Security tab</h4>

<p>The security tab allows you to create custom filters that apply restrictions to loading data associated with the user session. You can also use this tab to override your app&rsquo;s global security configuration, allowing custom access to your object based on user role, and also restrict access to specific fields in the object as necessary.</p>

<h4 id="settings-tab">Settings tab</h4>

<p>The Settings tab allows you to modify properties of your object directly, and work with each field in the object. At the object level, you&rsquo;re given the capability to enable change tracking, or to set a descriptive column. Change tracking keeps a record of all changes to an object as they occur, storing these results in App Dashboard -&gt; Log -&gt; Data History. This can result in performance impacts, so you should use this feature sparingly. A descriptive column represents the object when it is retrieves as a part of a list, providing the user with an easy-to-understand indicator for the current object record they are manipulating.</p>

<p>The field properties provide you with the capability to make a field searchable (available via the &ldquo;Search&rdquo; filter when making API calls), mark a field as &ldquo;required&rdquo;, or provide a default value for a field. These options are presented for each field in your object, but depending on usage may not be modifiable. If a field represents a link to another object in your system, you are provided with a hyperlink in the settings section that takes you directly to that related object&rsquo;s datagrid view.</p>

<h4 id="rest-api-tab">REST API tab</h4>

<p>The REST API tab offers you the capability to test all of the standard database actions with a custom Swagger interface. Once you execute the call, the request that was made - and the response received - are both provided, allowing you to quickly adopt the action into your app.</p>

<h2 id="queries">Queries</h2>

<p>The queries tab provides you with the capability to generate custom queries in your system. Simply click &ldquo;New Query&rdquo; to start building out a custom query. When building a new query you can provide a name, input parameters, and the query body using either NoSQL or SQL syntax. You can also set the security template of the query, restricting the query access based on the user&rsquo;s role. On the right side of this screen, you can also perform a quick test of your query by hitting either &ldquo;Test Query&rdquo; or &ldquo;Save &amp; Test&rdquo;. The test process will present the query&rsquo;s URL endpoint, the SDK code needed to call the query, and a sample response.</p>

<h3 id="query-list">Query List</h3>

<p>As you create queries, you&rsquo;re provided with a list of the queries present in your system. Simply click on the name of a query to begin editing or testing the query&rsquo;s contents.</p>

<h3 id="create-a-query">Create a query</h3>

<p>You can add a new query by clicking on &ldquo;+New Query&rdquo; in the menu bar. This allows you to name the query, provide any parameters necessary, and then write the query. It also allows you to set a specific security template for the query to use as it executes, and allows you to override the security template settings when running the query.</p>

<h3 id="update-an-existing-query">Update an existing query</h3>

<p>To update an existing query, select the query from the navigation menu and press the &ldquo;Edit&rdquo; button.</p>

<h3 id="test-a-query">Test a query</h3>

<p>You can test both new and existing queries using the Test query parameters panel on the right hand side of the page. This executes the query, returning both the data of the query and the URL used to execute the query.</p>

<h2 id="background-jobs">Background Jobs</h2>

<p>Background jobs (also known as cron jobs) allow you to run an action, query, or external URL request on a schedule that you define. Simply set the time and frequency, and the desired task will be executed automatically by Backand&rsquo;s servers. With this mechanism, you can run periodic queries for things like reports, recurring actions to control your application&rsquo;s behavior, or regularly post to external services.</p>

<h3 id="create-a-job">Create a job</h3>

<p>To create a new Background job, click on &ldquo;+ New Job&rdquo; in the &ldquo;Background jobs&rdquo; section of the navigation bar. Simply add a name, a description, a start time or frequency, and set the type of job (Action, Query, External URL) to execute.</p>

<h4 id="advanced-options">Advanced Options</h4>

<p>In the advanced options, you can configure the job to operate via a POST or GET request. The GET request allows you to configure the query string used in the request, as well as modify the headers sent - allowing you to send additional parameters to the job when it executes. For POST requests, you can modify both the headers and the query string, but you are also given the Request Data field which you can use to send additional parameter formats, such as long text.</p>

<p>This can be very useful in distinguishing between two jobs that run the same action. For each job, you can send a &ldquo;type&rdquo; parameter to indicate the specific job being run. You can accomplish this by setting the &ldquo;Query String&rdquo; field to the appropriate value: <code class="prettyprint">parameters={type:1}</code> for job 1, and <code class="prettyprint">parameters={type:2}</code> for job 2.</p>

<h3 id="update-an-existing-job">Update an existing job</h3>

<p>You can update existing job by selecting the background job from the navigation menu and pressing the &ldquo;Edit&rdquo; button. This allows you to change all aspects of the job.</p>

<h3 id="test-a-job">Test a job</h3>

<p>You can test both new and existing jobs using the Test buttons on the right hand side of the page. These buttons execute the job on Backand&rsquo;s servers, displaying the request sent and the response received. In addition to simple verification, testing can be used to verify that advanced parameters function properly, and that the job responds as expected.</p>

<h3 id="run-background-job-using-rest-api">Run background job using REST API</h3>
<pre class="highlight shell tab-shell"><code>  curl https://api.backand.com/1/jobs/run/<span class="o">{</span>id<span class="o">}</span>
</code></pre><pre class="highlight javascript tab-javascript"><code>   <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
       <span class="na">method</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
       <span class="na">url</span><span class="p">:</span> <span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"/1/jobs/run/"</span> <span class="o">+</span> <span class="nx">cronId</span>
   <span class="p">});</span>
</code></pre>
<p>Background Jobs are useful for long running tasks such as integrating with external sites (where the response time could be slow), or sending out batched push notifications. If you commonly encounter timeout errors while running on-demand actions, then you should consider using a Background Job.</p>

<p>All messages and errors are logged into the console. These messages are available in the dashboard under Log &ndash;&gt; Console.</p>

<h3 id="test-background-job">Test background job</h3>
<pre class="highlight shell"><code>curl https://api.backand.com/1/jobs/run/<span class="o">{</span>id<span class="o">}</span>/test
</code></pre>
<p>In order to test the job and get a response immediately (either valid results or an error message), use the following REST endpoint.</p>

<aside class="notice">this call runs synchronously, so it may take a long time to finish</aside>

<h2 id="analytics">Analytics</h2>

<p>The Analytics section provides several reports exploring the various facets of you app&rsquo;s performance. You are able to provide a date range to examine, using preconfigured date ranges our your own custom range. You can use these to gain insight on user activity within your app, as well as on the resources being used by your application.</p>

<h3 id="reports">Reports</h3>

<p>Backand provides the following reports for your app:</p>

<ul>
<li>Activity-based reports

<ul>
<li>Devices by Country</li>
<li>Daily Active Devices</li>
<li>Weekly Active Devices</li>
<li>Montly Active Devices</li>
<li>Registered Users by Country</li>
<li>Daily Active Registered Users</li>
<li>Weekly Active Registered Users</li>
<li>Monthly Active Registered Users</li>
<li>Top Active Registered Users</li>
</ul></li>
<li>Performance-based reports

<ul>
<li>Requests per Objects</li>
<li>Slow Requests</li>
</ul></li>
<li>Usage-based reports

<ul>
<li>Backand Compute</li>
<li>Cache Memory</li>
<li>Requests per Second</li>
<li>Data Hosting</li>
<li>Database Size</li>
</ul></li>
</ul>

<h2 id="security-auth">Security &amp; Auth</h2>

<p>The Security &amp; Auth section allows you to modify the security settings for your application, setting both application-level and user-level security policies.</p>

<h3 id="security-configuration">Security configuration</h3>

<p>The Security Configuration section allows you to set application-wide settings for access to your project.</p>

<h4 id="anonymous-access">Anonymous Access</h4>

<p>When enabled, this allows any user with a link to access your application. You can set a role for anonymous users, and obtain an anonymous access token to use in your application&rsquo;s code.</p>

<h4 id="public-app">Public App</h4>

<p>The Public App settings determines whether users can sign up for your app, or if they must be invited. You can also assign a role to each invited user.</p>

<aside class="warning">Email verification is disabled by default, so verifying users requires an extra setting change for your application.</aside>

<h4 id="custom-pages">Custom pages</h4>

<p>These custom pages are pages within your application code that are used for user registration and login. The Custom Registration Page URL is supplied in the invitation email sent to new users. The Custom Verified Email Page URL is sent to the user after they have verified their email address. Note that these are pages on your own servers, and not a part of Backand. These pages are only sent when Sign-up Email Verification is enabled.</p>

<h4 id="sign-up-email-verification">Sign-up Email Verification</h4>

<p>This enables or disables automated user email verification. When enabled, users are sent a verification email by Backand which they must use to verify their account. When disabled, this action is not performed and users are immediately able to use their account.</p>

<h3 id="social-keys">Social &amp; Keys</h3>

<p>The Social &amp; Keys page consists of two parts - the tokens, and the social media configurations. These settings are used in your app to enable integration with social media providers, allowing your users to sign into your app using their social media accounts.</p>

<h4 id="master-token">Master Token</h4>

<p>The master Token is a token that you can use to access your Backand app without a username or password.
<aside class="warning">Use this token carefully, as it gives the user full access to your application.. This token mast be sent with the user&rsquo;s GUID key. The master key is used with <a href="https://en.wikipedia.org/wiki/Basic_access_authentication" target="\_blank">basic authentication</a>, simply enter the master key as the username, and the user&rsquo;s GUID key as the password.</aside></p>

<h4 id="api-signup-token">API Signup Token</h4>

<p>The API Signup Token is used whenever you contact the Backand API to register a new user with your application.</p>

<h4 id="social-configuration">Social Configuration</h4>

<p>In this section you can configure the social app for each company (GitHub, Google and Facebook). By default you can use Backand as the social app, unless you add your own client and secret ids.</p>

<h5 id="github-app-configuration">GitHub App Configuration</h5>

<p>In order to enable signing in with GitHub credentials, follow these steps:</p>

<ol>
<li>Check the &lsquo;Use your credentials for signing in with GitHub&rsquo; toggle</li>
<li>Register your application on GitHub&rsquo;s <a href="https://github.com/settings/applications/new" target="\_blank">Developer Applications Tab</a>. Include the following details, which are mandatory for new applications:

<ul>
<li><code class="prettyprint">Application name</code>: A name for your app. Something users will recognize and trust</li>
<li><code class="prettyprint">Homepage URL</code>: Your application&rsquo;s url (you can use http://localhost for testing purposes)</li>
<li><code class="prettyprint">Authorization callback URL</code>: https://api.backand.com/1/user/github/auth</li>
</ul></li>
<li>Record the Client ID and the Client Secret from GitHub</li>
<li>Finally, on the <code class="prettyprint">Social &amp; Keys</code> section of the Backand app management dashboard, copy the Client ID and Client Secret in the correct fields in the GitHub section..</li>
</ol>

<p>More details on GitHub integrations are available in the <a href="https://developer.github.com/v3/oauth/#redirect-urls/" target="\_blank">developer documentation</a>.</p>

<h5 id="google-app-configuration">Google App Configuration</h5>

<p>In order to add Google app sign-in, follow these steps:</p>

<ol>
<li>Check the &lsquo;Use your credentials for signing in with Google&rsquo; toggle/</li>
<li>Open the <a href="https://console.developers.google.com/project" target="\_blank">Google Developer&rsquo;s Console</a>.

<ol>
<li>In the Google Developer&rsquo;s Console, Click <strong>Create Project</strong>.</li>
<li>Enter a name and a project ID, or accept the defaults, and click <strong>Create</strong>.</li>
<li>After the project has been created, expand the <strong>APIs &amp; auth</strong> section on the left sidebar.</li>
<li>Click <strong>APIs</strong> to view the API Library, which lists all available APIs. The APIs are grouped by product family and popularity. Click on <strong>Google+ API</strong> under <strong>Social APIs</strong></li>
<li>Click <strong>Enable API</strong> (You should see this under the Google+ API button).</li>
<li>In the sidebar on the left, select <strong>Consent screen</strong> and enter your product name (this can be your Backand app name).</li>
<li>In the sidebar on the left, select <strong>Credentials</strong>.</li>
<li>Click <strong>Create credentials</strong> and select  <strong>OAuth client ID</strong></li>
<li>Click  <strong>Configure consents screen</strong> tab on the right panel and enter the Product name, Privacy policy URL (https://www.backand.com)</li>
<li>Click <strong>Save</strong></li>
<li>Enter the following details:
    * <strong>Application type</strong>: Web application
    * <strong>Name</strong> (this can be your Backand app name)
    * <strong>Authorized JavaScript origins</strong>:  leave this field empty
    * <strong>Authorized redirect URIs</strong>: Replace the default example URL with &lsquo;https://api.backand.com/1/user/google/auth&rsquo;

<ol>
<li>Click <strong>Create</strong> and <strong>Create</strong> again</li>
<li>Record the <strong>Client ID</strong> and <strong>Client secret</strong> from the popup window and click <strong>OK</strong></li>
</ol></li>
<li>On the left side bar click <strong>Dasboard</strong> make sure Google+ API is listed under the <strong>API</strong> list.</li>
</ol></li>
<li>Finally, on the <strong>Social &amp; Keys</strong> section of the Backand app management dashboard, copy the Client ID and Client Secret you copied down in the last step.</li>
</ol>

<p>For more details on integrating with Google, review their <a href="https://developers.google.com/console/help/new/" target="\_blank">developer documentation</a>.</p>

<h5 id="facebook-app-configuration">Facebook App Configuration</h5>

<p>In order to add Facebook login integration, follow these steps:</p>

<ol>
<li>Check the &lsquo;Use your credentials for signing in with Facebook&rsquo; toggle.</li>
<li>Open the <a href="https://developers.facebook.com/" target="\_blank">Facebook Developers console</a>.</li>
<li>Optional: Click MyApps and register as developer

<ol>
<li>Under <strong>My Apps</strong>, select <strong>Add a new app</strong></li>
<li>In the wizard that follows, provide your app&rsquo;s name and <strong>Category</strong></li>
<li>Click <strong>Create app ID</strong></li>
<li>Complete the <strong>Security Check</strong> step</li>
<li>In the sidebar on the left, select <strong>Settings</strong></li>
<li>In Basic tab add your <strong>Contact Email</strong></li>
<li>In the sidebar click <strong>+ Add Product</strong> under Products</li>
<li>Click Get Started in the <strong>Facebook Login</strong> product</li>
<li>In <strong>Valid OAuth redirect URIs</strong> enter: &lsquo;https://api.backand.com/1/user/facebook/auth&rsquo;</li>
<li>Click <strong>Save Changes</strong></li>
<li>To start using your app, you need to make it public, open App Preview from the left menu and change <strong>Make
<code class="prettyprint">{{appName}}</code> public?</strong> to <strong>yes</strong> and confirm the popup window</li>
<li>In the sidebar on the left, select <strong>Dashboard</strong><br></li>
<li>Record the <strong>App ID</strong></li>
<li>Click <strong>Show</strong> (near <strong>App Secret</strong>) and enter your Facebook password.</li>
<li>Record the <strong>App Secret</strong></li>
</ol></li>
<li> Finally, on the <strong>Social &amp; Keys</strong> section of the Backand app management dashboard , copy the App ID and App Secret you recorded into the appropriate fields in the Facebook integration section.</li>
</ol>

<h5 id="twitter-app-configuration">Twitter App Configuration</h5>

<p>In order to add Twitter login integration, follow these steps:</p>

<ol>
<li>Un-check the &lsquo;Use Back&amp; app for signing in with Twitter&rsquo; toggle.</li>
<li>If you haven&rsquo;t added your phone number to Twitter you&rsquo;ll need to add it before creating Twitter app, please follow <a href="https://support.twitter.com/articles/110250">these instructions</a></li>
<li>Open the <a href="https://apps.twitter.com/" target="\_blank">Twitter Apps console</a>.</li>
<li>Click <strong>Create New App</strong> button

<ol>
<li>Enter the App details - Name, Description, Website</li>
<li>In the Callback URL enter: <strong>https://api.backand.com/1/user/twitter/auth</strong></li>
<li>Check <strong>Yes, I agree</strong>  in the developer agreement</li>
<li>Click <strong>Create your Twitter application</strong> button</li>
<li>In the <strong>Detail</strong> tab of your newly created app scroll down to the Application Setting area and click the <strong>manage keys and access tokens</strong> link</li>
<li>Record the <strong>Consumer Key (API Key)</strong> and the <strong>Consumer Secret (API Secret)</strong></li>
</ol></li>
<li>In the Backand dashboard, copy the Consumer Key and API Secret you recorded into the appropriate fields in the Twitter integration section.</li>
</ol>

<h5 id="local-adfs-app-configuration">Local ADFS App Configuration</h5>

<p>In order to add ADFS login integration, follow these steps:</p>
<pre class="highlight shell"><code><span class="c"># Step 2</span>
Add-AdfsRelyingPartyTrust -Name <span class="s2">"Backand QA"</span> -Identifier <span class="s2">"https://api.backand.com"</span> -TokenLifetime 10 -IssueOAuthRefreshTokensTo AllDevices -EnableJWT <span class="nv">$True</span> -IssuanceTransformRules <span class="s1">'@RuleTemplate = "PassThroughClaims" @RuleName = "Windows account name" c:[Type=="http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname"] =&gt; issue(claim = c); @RuleTemplate = "PassThroughClaims" @RuleName = "UPN" c:[Type == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn"] =&gt; issue(claim = c);'</span> -IssuanceAuthorizationRules <span class="s1">'=&gt; issue(Type = "http://schemas.microsoft.com/authorization/claims/permit", Value = "true");'</span>

<span class="c"># Step 3</span>
<span class="c"># Update the ClientId with any GUID value (Get a &lt;a href="https://www.guidgenerator.com/"&gt;new GUID&lt;/a&gt;)</span>
Add-ADFSClient -Name <span class="s2">"Backand"</span> -ClientId <span class="s2">"188c552d-bf43-409b-9355-a0fb0eb227e3"</span> -RedirectUri <span class="s2">"https://api.backand.com/1/user/adfs/auth"</span>

<span class="c"># Step 4</span>
<span class="c"># 43,200 is the number of minutes in 30 days - you may change it to meet your organization requirements</span>
Set-AdfsProperties -EnableKmsi <span class="nv">$True</span> KmsiLifetimeMins 43,200
</code></pre>
<ol>
<li>Open windows command shell on the ADFS server with Admin permissions</li>
<li>Run Add-AdfsRelyingPartyTrust command with the following parameters (you may change the defaults as needed):</li>
<li>Run Add-ADFSClient to add Backand as a client application to your ADFS:</li>
<li>Run this command to configure persistent Single Sign-On and show the &ldquo;keep me signed in&rdquo; checkbox:</li>
<li>Finally, on the <strong>Social &amp; Keys</strong> section of the Backand app management dashboard, copy the Client Id and Redirect Uri you entered in the Add-ADFSClient command.</li>
</ol>

<h5 id="azure-ad-app-configuration">Azure AD App Configuration</h5>

<p>In order to add Azure AD application integration, follow these steps:</p>

<ol>
<li>Open the <a href="https://portal.azure.com/" target="\_blank">Azure new portal</a>.</li>
<li>Select <strong>Azure Active Directory</strong></li>
<li>Select <strong>App Registrations</strong></li>
<li>Click <strong>+Add</strong> and use these parameters:

<ol>
<li>Name: <strong>Backand</strong></li>
<li>Application Type: <strong>Native</strong></li>
<li>Redirect URI: <strong>https://api.backand.com/1/user/azuread/auth</strong></li>
</ol></li>
<li>Click <strong>Create</strong></li>
<li>Click on the Backand App and copy the Application Id / Client Id (e.g. 7c799275-1102-4aa6-b36a-fac7aa7fee60)</li>
<li><p>Click on &ldquo;Endpoints&rdquo; menu and copy &ldquo;OAUTH 2.0 AUTHORIZATION ENDPOINT&rdquo;. In Backand just connect to /oauth2 in the OAUTH 2.0 Endpoint filed(e.g. &ldquo;https://login.windows.net/a652911c-7a2c-4a9c-d1b2-d149256f461b/oauth2&rdquo;)</p></li>
<li><p>Finally, on the <strong>Social &amp; Keys</strong> section of the Backand app management dashboard, copy the Application Id into the Client Id field and OAUTH 2.0 Endpoint you copied down in the last step.</p></li>
</ol>

<h3 id="registered-users">Registered Users</h3>

<p>The registered users page lists all users currently registered for your app. You can add new user, edit existing user details, delete a user, or invite a new user to your application via email. You can also manually enter - and edit - user passwords from this interface.</p>

<h3 id="team">Team</h3>

<p>The Team section allows you to add new administrative users to your application. Admin users have full access to the application dashboard, and your application&rsquo;s configuration. You can perform all of the same actions available on the Users page on the Team page as well.</p>

<h3 id="security-actions">Security Actions</h3>

<p>The actions on this page, much like those on the other pages of the application, allow you to define custom actions to occur at each point in the transactional CRUD conversation against an object, or when called by accessing a specific URL. These actions, though, are tied specifically to the internal Backand Users object, which manages your application&rsquo;&lsquo;s security. All of the standard custom action options are available for use in this section, and you can easily create new actions, edit existing actions, and test the actions you have created.</p>

<p>The following actions are provided by default for a Backand application. You can edit these actions as you desire, or add new actions that occur during the database transaction that modifies your app&rsquo;s <code class="prettyprint">registered_users</code> table:</p>

<table><thead>
<tr>
<th>Action Name</th>
<th>When it Runs</th>
<th>What it Does</th>
</tr>
</thead><tbody>
<tr>
<td>accessFilter</td>
<td>Automatic, after successful authentication</td>
<td>See <a href="#integrating-third-party-security">our post on third-party security</a></td>
</tr>
<tr>
<td>backandAuthOverride</td>
<td>Automatic, prior to user authentication</td>
<td>See <a href="#integrating-third-party-security">our post on third-party security</a></td>
</tr>
<tr>
<td>beforeSocialSignup</td>
<td>Automatic, prior to social media registration</td>
<td>This allows you to run additional code prior to signing up a user through social media-based authentication</td>
</tr>
<tr>
<td>ChangePasswordOverride</td>
<td>Automatic, during password change</td>
<td><strong>not currently used</strong></td>
</tr>
<tr>
<td>newUserVerification</td>
<td>Automatic, during user registration</td>
<td>This verification message is sent to new users if email address verification is enabled</td>
</tr>
<tr>
<td>requestResetPassword</td>
<td>Automatic, after a call to <code class="prettyprint">requestResetPassword</code></td>
<td>This email is sent in response to initiating a password reset</td>
</tr>
<tr>
<td>socialAuthOverride</td>
<td>Automatic, after social media authentication</td>
<td>See <a href="#integrating-third-party-security">our post on third-party security</a></td>
</tr>
<tr>
<td>userApproval</td>
<td>Automatic, after user registration</td>
<td>This email is sent to users to inform them that they have been successfully added to an app</td>
</tr>
<tr>
<td>Admin Invitation Email</td>
<td>Automatic, during user creation</td>
<td>This email is used to invite administrators to your application</td>
</tr>
<tr>
<td>Create My App User</td>
<td>Automatic, during user creation</td>
<td>This function takes the user input from the sdk <code class="prettyprint">signup</code> call, and uses it to populate a custom <code class="prettyprint">users</code> object in your application.</td>
</tr>
<tr>
<td>User Invitation Email</td>
<td>Automatic, during user creation</td>
<td>This email is used to invite standard users to your application</td>
</tr>
<tr>
<td>Update My App User</td>
<td>Automatic, during user update</td>
<td>This action occurs whenever a registered user is modified. It attempts to make the appropriate modifications in your app&rsquo;s custom <code class="prettyprint">users</code> object</td>
</tr>
<tr>
<td>Delete My App User</td>
<td>Automatic, during user deletion</td>
<td>This action occurs whenever a registered user is deleted. It attempts to remove the associated <code class="prettyprint">users</code> record for the user being deleted.</td>
</tr>
</tbody></table>

<h3 id="security-templates">Security Templates</h3>

<p>Security templates allow you to create a template that is used to set permissions on objects. You can create new templates, update existing templates, and rename security templates as you see fit. Each of the checkboxes corresponds to the REST API action indicated by the column header. When you check &ldquo;Create&rdquo; for a user role, for example, and then assign that security template to an object, all users with the specified role will be granted &ldquo;Create&rdquo; access to the object.</p>

<h2 id="hosting">Hosting</h2>

<p>The Hosting menu item provides all the tools you need to work with <a href="#backand-hosting">Backand Hosting</a>.</p>

<h3 id="configuration">Configuration</h3>

<p>This page provides dynamic information designed to walk you through the relevant steps for the current stage of your hosting effort. Follow the provided guide to initiate, update, and deploy your project&rsquo;s hosting.</p>

<h3 id="hosting-files">Hosting files</h3>

<p>The Hosting Files section lists the files hosted by Backand on behalf of your app. It provides a simple UI for listing and downloading the hosted files.</p>

<h3 id="storage-files">Storage files</h3>

<p>The Storage Files section lists the files stored in S3 on behalf of your application. You can view the list of files, upload a new file, download a file, or delete a file from your app&rsquo;s s3 storage.</p>

<h2 id="log">Log</h2>

<p>The Log menu item provides access to Backand&rsquo;s built in logging functionality. We provide a number of different logs with different targets, allowing you to easily see all activity in your application in one place.</p>

<h3 id="api-requests">API Requests</h3>

<p>The API Requests log logs all requests made to your application over the web, either via cURL or using our SDK. You can filter the request logs based on any of the provided fields.</p>

<h3 id="console">Console</h3>

<p>The Console log logs all console messages created by your application&rsquo;s actions. You can use this when troubleshooting server-side actions to ensure that all messages are being received correctly, and you can filter the log messages to match your current debugging scenario.</p>

<h3 id="server-side-exceptions">Server Side Exceptions</h3>

<p>The Server Side Exceptions log provides access to any server-side exceptions generated during your app&rsquo;s execution. Details on the exception are provided, and you are given the capability to filter the logs based on arbitrary criteria.</p>

<h3 id="configuration">Configuration</h3>

<p>The Configuration log tracks all configuration changes made to your application. This includes all actions taken in your application&rsquo;s Backand dashboard, recording the action taken and the user responsible. You can also filter the log by any of the provided fields.</p>

<h3 id="data-history">Data History</h3>

<p>The Data History log contains entries for all modifications made to objects that have data tracking enabled. This log will remain empty until the data tracking feature is enabled for an object.</p>

<h2 id="settings">Settings</h2>

<p>The Settings configuration section contains the application-level configurations for your Backand app.</p>

<h3 id="general">General</h3>

<p>The General section contains global configuration settings for your application. You can change the app name and title, enable debug mode, adjust the date format, adjust default pagination and object retrieval parameters, and provide global configuration values available throughout your application.</p>

<aside class="warning">You can also delete your Backand application from this screen using the &ldquo;trash can&rdquo; icon in the upper-right-hand corner of the page. Be careful - this action is irreversible. </aside>

<h3 id="database">Database</h3>

<p>The Database section contains information on your app&rsquo;s Backand database. If you have not yet entered any data or modified the default model, you are also given the capability to connect to an existing database platform on this tab. You can use the connection data provided to connect any third-party DB management tool to your database, allowing you to modify or migrate your database as you desire.</p>

<h3 id="configuration">Configuration</h3>

<p>The Configuration tab allows you to version your app&rsquo;s configuration. You can export and import settings, or work with previous application configurations.</p>

<h3 id="billing-portal">Billing Portal</h3>

<p>The Billing Portal provides you with a UI that gives you easy access to all the details of your billing agreement with Backand. From this section, you can view your current subscription, your contact information, a list of changes made, and other billing details. You can also add and modify credit card information, add or change your billing address, or review your payment history.</p>

<h3 id="upgrade-plan">Upgrade Plan</h3>

<p>The Upgrade Plan section provides you with the capability to change your plan to something that meets your needs. Simply select the plan you wish to use, ensure your payment method is correct, then confirm the change.</p>

<h3 id="payment-method">Payment Method</h3>

<p>The Payment Method section allows you to add and edit your payment methods. Provide all of the required information for your payment method to update how your account is charged.</p>

          <h1 id="vanilla-sdk">Vanilla SDK</h1>

<p>The primary functionality in the Backand SDK is contained in the Vanilla SDK, located <a href="https://github.com/backand/vanilla-sdk">on our GitHub page</a>. This provides a global object - <code class="prettyprint">backand</code> - that can be used to work with the Backand SDK. Review the ReadMe on the GitHub repo to get started, or review the content below.</p>

<h2 id="overview">Overview</h2>

<p>This is the documentation for Back&amp;&lsquo;s Vanilla SDK. This encapsulates all common API functionality. All of our other SDKs wrap this core set of function calls, which in turn provides programmatic access to your app&rsquo;s back end.</p>

<h2 id="installation">Installation</h2>

<aside class="notice">In most cases, the Vanilla SDK will be installed as a part of another, platform-specific SDK. However, if you wish to include it directly in your project, follow these instructions</aside>

<p>To install the Vanilla SDK, use the correct command for your dependency management platform:</p>

<table><thead>
<tr>
<th>Provider</th>
<th>Command</th>
</tr>
</thead><tbody>
<tr>
<td>npm</td>
<td>$ npm i -S @backand/vanilla-sdk</td>
</tr>
<tr>
<td>yarn</td>
<td>$ yarn add @backand/vanilla-sdk</td>
</tr>
<tr>
<td>bower</td>
<td>$ bower install backand-vanilla-sdk</td>
</tr>
<tr>
<td>clone/download via Git</td>
<td>$ git clone https://github.com/backand/vanilla-sdk.git</td>
</tr>
</tbody></table>

<h2 id="import">Import</h2>
<pre class="highlight javascript tab-javascript"><code>
<span class="c">&lt;!--</span> <span class="nx">Includes</span> <span class="k">for</span> <span class="nx">index</span><span class="p">.</span><span class="nx">html</span><span class="p">,</span> <span class="nx">or</span> <span class="nx">appropriate</span> <span class="nx">location</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"node_modules/@backand/vanilla-sdk/dist/backand.min.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"backand.min.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="c1">// Import the Backand SDK object</span>
<span class="kr">import</span> <span class="nx">backand</span> <span class="nx">from</span> <span class="s1">'@backand/vanilla-sdk'</span>
<span class="kr">const</span> <span class="nx">backand</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'@backand/vanilla-sdk'</span><span class="p">)</span>

</code></pre>
<p>To work with the SDK, you need to first import it into your project. This requires including the JavaScript source in your project in <code class="prettyprint">index.html</code> (or another appropriate location), and then importing the <code class="prettyprint">backand</code> object into your application. The <code class="prettyprint">backand</code> object is the root of the SDK, and will be used as the core of all calls to your Backand application.</p>

<h2 id="quick-start">Quick Start</h2>
<pre class="highlight shell tab-shell"><code><span class="c"># Use a bearer token to retrieve items. Obtain the token from calling the /token endpoint</span>
curl https://api.backand.com/1/objects/items -H <span class="s2">"Authorization: Bearer OfKDiw6fQwfhmUcoh3WuXken_Sgj18za8SDqn1Ed2S_qI88HWNwGBSpG2ktUkSbNIwcGn6dwos7ivvVARC1UIiCf8fzlNynFNZamCZPDpbOhRjheq3RnU6HJiCbqlks57PLvMnf9PxGK8D3FU8MeaPyUk7mmbAtvgc6GF-9s13YpFjVQkM5XRZ-CsuWjaRoukygLMOivj1iPYxBB4c-hu6ocZKQljiSnw6rroYbD4spmUIkwDnC0rz1jP9ln5KNI3KmO0KLcWJF6E_zWfepdFw"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// Initialize the SDK</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="na">appName</span><span class="p">:</span> <span class="s1">'APP_NAME'</span><span class="p">,</span>
  <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'ANONYMOUS_TOKEN'</span>
<span class="p">});</span>

<span class="c1">// Retrieve a list of records from the server</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s1">'users'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<p>Getting started with the SDK is as simple as configuring your application access details, initializing the SDK, and calling a <code class="prettyprint">getList()</code> function for one of the objects in your system. You configure the SDK with your application&rsquo;s <code class="prettyprint">APP_NAME</code> and <code class="prettyprint">ANONYMOUS_TOKEN</code>. Once you&rsquo;ve called <code class="prettyprint">init()</code> with these values, the SDK will use this data to automaticaly manage authentication headers for API requests to your app&rsquo;s REST API.</p>
<pre class="highlight plaintext"><code>// Sample response
{
  "totalRows": 2,
  "data": [
    {
      "__metadata": {
        "id": "1",
        "fields": {
          "id": {
            "type": "int",
            "unique": true
          },
          "items": {
            "collection": "items",
            "via": "user"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          }
        },
        "descriptives": {

        },
        "dates": {

        }
      },
      "id": 1,
      "items": null,
      "email": "matt@backand.com",
      "firstName": "Matt",
      "lastName": "Billock"
    },
    {
      "__metadata": {
        "id": "2",
        "fields": {
          "id": {
            "type": "int",
            "unique": true
          },
          "items": {
            "collection": "items",
            "via": "user"
          },
          "email": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          }
        },
        "descriptives": {

        },
        "dates": {

        }
      },
      "id": 2,
      "items": null,
      "email": "start@backand.io",
      "firstName": "Start",
      "lastName": "Backand"
    }
  ]
}
</code></pre>
<p>This connects your Back&amp; application (with the app name of <em>APP_NAME</em> and an anonymous access token of <em>ANONYMOUS TOKEN</em>) to your current project. Once the connection is configured, the SDK uses this connection information to construct HTTP requests to your API. Result data is returned in the <em>response</em> object as the member variable <em>data</em>. In the case of <em>getList</em>, this will be a JSON array of objects pulled from the <em>users</em> table in your Back&amp; application. You can easily change the table being manipulated by replacing <em>users</em> with the name of any object in your system.</p>

<h2 id="working-with-the-sdk">Working with the SDK</h2>

<p>The SDK is implemented as a wrapper around HTTP calls made to the Backand service. As a result, you can access all of Backand&rsquo;s functionality via cURL calls, provided you configure the header correctly. Review the section on <a href="#the-user-object-and-security">User Authentication and Security</a> for more information on configuring the headers for each call. For JavaScript applications, the SDK takes care of the complexity of managing the authentication headers required to communicate with Backand. Simply utilize the built-in authentication methods to authenticate, and all future requests will include the correct headers.</p>

<p>The SDK is built around a global service object exported from the JavaScript called <code class="prettyprint">backand</code>. You can use properties of this object to interact with the various endpoints. In the next several sections, we&rsquo;ll walk through all of the functionality offered by our SDK. View the pane on the right for sample code that can be used to call each method, as well as sample responses.</p>

<h3 id="sdk-properties-overview">SDK Properties - overview</h3>

<p>Below is a list of the properties offered by the SDK, a description of the functionality handled by that property, and the list of methods provided by that property:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Methods</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>constants</td>
<td>EVENTS, URLS, SOCIALS</td>
<td>Provides access to constants in the SDK</td>
</tr>
<tr>
<td>helpers</td>
<td><em>filter</em>, <em>sort</em>, <em>exclude</em>, <em>StorageAbstract</em></td>
<td>Provides helper methods for working with the SDK</td>
</tr>
<tr>
<td>direct properties</td>
<td><em>useAnonymousAuth</em>, <em>signin</em>, <em>signup</em>, <em>socialSignin</em>, <em>socialSigninWithToken</em>, <em>socialSignup</em>, <em>requestResetPassword</em>, <em>resetPassword</em>, <em>changePassword</em>, <em>signout</em>, <em>getSocialProviders</em></td>
<td>These are properties available directly on the Backand SDK object, mostly focused on Authentication</td>
</tr>
<tr>
<td>defaults</td>
<td><em>none</em></td>
<td>This stores the current app&rsquo;s configuration in the SDK</td>
</tr>
<tr>
<td>object</td>
<td><em>getList</em>, <em>create</em>, <em>getOne</em>, <em>update</em>, <em>remove</em>, <em>get</em> (action), <em>post</em> (action)</td>
<td>This encapsulates all methods used to manipulate objects</td>
</tr>
<tr>
<td>file</td>
<td><em>upload</em>, <em>remove</em></td>
<td>Provides helper methods for working with files</td>
</tr>
<tr>
<td>query</td>
<td><em>get</em>, <em>post</em></td>
<td>Allows you to work with custom query objects</td>
</tr>
<tr>
<td>user</td>
<td><em>getUserDetails</em>, <em>getUsername</em>, <em>getUserRole</em>, <em>getToken</em>, <em>getRefreshToken</em></td>
<td>Provides information on the current authenticated user</td>
</tr>
<tr>
<td>on</td>
<td><em>none</em></td>
<td>This is the event handler for socket.io functions, replacing socket.on</td>
</tr>
</tbody></table>

<h3 id="default-events">Default Events</h3>

<p>By default, the Back&amp; SDK emits the following events that your code can respond to:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Syntax</th>
</tr>
</thead><tbody>
<tr>
<td>SIGNIN</td>
<td>dispatched on signin</td>
<td>window.addEventListener(backand.constants.EVENTS.SIGNIN, (e)=&gt;{}, false);</td>
</tr>
<tr>
<td>SIGNOUT</td>
<td>dispatched on signout</td>
<td>window.addEventListener(backand.constants.EVENTS.SIGNOUT, (e)=&gt;{}, false);</td>
</tr>
<tr>
<td>SIGNUP</td>
<td>dispatched on signup</td>
<td>window.addEventListener(backand.constants.EVENTS.SIGNUP, (e)=&gt;{}, false);</td>
</tr>
</tbody></table>

<h2 id="sdk-methods">SDK Methods</h2>

<p><strong>NOTE:</strong>
- <strong>All Methods return a Promise -&gt; you can work with the response using .then() and .catch()</strong>
- <strong>You can see the response schema <a href="https://github.com/mzabriskie/axios#response-schema">here</a></strong></p>

<h2 id="root-properties">Root properties</h2>

<p>The root properties on the SDK are primarily focused on authentication and session management functionality. These all hinge upon the use of the <code class="prettyprint">.init()</code> function. This function accepts your application name, an anonymous access token, and an optional signup token by default - these three pieces of information are all you need to connect the SDK to any Backand application.</p>

<p>Other methods on the root of the object are focused on configuring individual platform settings, such as setting an API URL, adjusting the local storage method used, or working with our socket-based communications. Review the details for each function call below to see sample calls and responses, as well as explanations of each element&rsquo;s functionality.</p>

<h3 id="backand-init">backand.init()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># This call has no cURL equivalent</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">appName</span><span class="p">:</span> <span class="s1">'APP_NAME'</span><span class="p">,</span>
   <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'ANONYMOUS_TOKEN'</span>
             <span class="p">};</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
</code></pre>
<p>The <em>init()</em> method creates a new Back&amp; SDK instance with the supplied configuration.</p>

<h4 id="parameters">Parameters</h4>

<p>The available parameters for the <em>config</em> parameter are:</p>

<table><thead>
<tr>
<th>Param Name</th>
<th>Data Type</th>
<th>Usage</th>
<th>Required?</th>
<th>Default Value</th>
</tr>
</thead><tbody>
<tr>
<td><strong>appName</strong></td>
<td>string</td>
<td>Sets the name of your backand app</td>
<td><strong>required</strong></td>
<td></td>
</tr>
<tr>
<td><strong>anonymousToken</strong></td>
<td>string</td>
<td>Sets the anonymous token of your backand app</td>
<td><strong>required</strong></td>
<td></td>
</tr>
<tr>
<td><strong>useAnonymousTokenByDefault</strong></td>
<td>boolean</td>
<td>Determines whether the sdk should use the anonymousToken when there is no other token</td>
<td><em>optional</em></td>
<td><em>true</em></td>
</tr>
<tr>
<td><strong>signUpToken</strong></td>
<td>string</td>
<td>Sets the signup token of your backand app</td>
<td><em>optional</em></td>
<td></td>
</tr>
<tr>
<td><strong>apiUrl</strong></td>
<td>string</td>
<td>Sets the API url of backand servers</td>
<td><em>optional</em></td>
<td><em>https://api.backand.com</em></td>
</tr>
<tr>
<td><strong>storage</strong></td>
<td>object</td>
<td>Sets the storage type to use (local/session/implementation of StorageAbstract)</td>
<td><em>optional</em></td>
<td><em>localStorage</em></td>
</tr>
<tr>
<td><strong>storagePrefix</strong></td>
<td>string</td>
<td>Sets prefix to use in the storage structure</td>
<td><em>optional</em></td>
<td><em>BACKAND_</em></td>
</tr>
<tr>
<td><strong>manageRefreshToken</strong></td>
<td>boolean</td>
<td>Determines whether the sdk should manage refresh tokens internally</td>
<td><em>optional</em></td>
<td><em>true</em></td>
</tr>
<tr>
<td><strong>runSigninAfterSignup</strong></td>
<td>boolean</td>
<td>Determines whether the sdk should run signin after signup automatically</td>
<td><em>optional</em></td>
<td><em>true</em></td>
</tr>
<tr>
<td><strong>runSocket</strong></td>
<td>boolean</td>
<td>Determines whether the sdk should run socket automatically</td>
<td><em>optional</em></td>
<td><em>false</em></td>
</tr>
<tr>
<td><strong>socketUrl</strong></td>
<td>string</td>
<td>Sets the socket url of backand servers</td>
<td><em>optional</em></td>
<td><em>https://socket.backand.com</em></td>
</tr>
<tr>
<td><strong>isMobile</strong></td>
<td>boolean</td>
<td>Determines whether the sdk is part of a mobile application</td>
<td><em>optional</em></td>
<td><em>false</em></td>
</tr>
<tr>
<td><strong>mobilePlatform</strong></td>
<td>string</td>
<td>sets the platform used to build the mobile application (&#39;ionic&rsquo;/&lsquo;react-native&rsquo;)</td>
<td><em>optional</em></td>
<td>&lsquo;ionic&rsquo;</td>
</tr>
</tbody></table>

<h3 id="on">.on()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># This call has no cURL equivalent</span>
</code></pre><pre class="highlight javascript tab-javascript"><code>  <span class="c1">//Wait for server updates on 'items' object</span>
  <span class="nx">Backand</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'items_updated'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Get the 'items' object that have changed</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<p>You can easily integrate with our Socket functionality using the <em>on</em> method. Socket signin and signout are handled automatically by the SDK.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>eventName</td>
<td>string</td>
<td>Name of the socket event to subscribe to</td>
</tr>
<tr>
<td>callback</td>
<td>function</td>
<td>Callback triggered when <em>eventName</em> is received</td>
</tr>
</tbody></table>

<h3 id="signin">.signin()</h3>
<pre class="highlight shell tab-shell"><code>curl -X POST -d <span class="s2">"username=&lt;username&gt;"</span> -d <span class="s2">"password=&lt;password&gt;"</span> -d <span class="s2">"appName=&lt;app name&gt;"</span> -d <span class="s2">"grant_type=password"</span> https://api.backand.com/token
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">signin</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'signin succeeded with user:'</span> <span class="o">+</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TGvnEBfhreaVwJspg0s_uDKppvjaA9jICQGsHSocmHnt8s98_rkMQIkf4fvd25j3i5QOJKPpZTpoCpdu7duxcjsUyLRYihLBhcyiSAv6PxeY4zG6SpL5CtfDl6PSpqJx571k_fSphmIha40bb0wvks3O-21E85hV7GdD3D0TJtSR0U4twJhaJl-HJmeGCEEmfr27FFtRu2Hb9pwkCNnlUNQast4s5fTlTOEiapspgUgfWT9s4V47t5TUuD6onMtDNQmXfekr-Yj2i_Q68L8a_Q"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">86399</span><span class="p">,</span><span class="w">
  </span><span class="s2">"appName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bkndionicstarter"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@backand.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fullName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"regId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009820</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Signin with username and password in order to get access_token to be used in all other calls. If you don&rsquo;t have users you should use anonymous token only.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>string</td>
<td>the username to authenticate</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>the user&rsquo;s password</td>
</tr>
</tbody></table>

<h3 id="signup">.signup()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Replace placeholder text with values for your user. Obtain signup token from</span>
<span class="c"># the Security &amp; Auth section in your app dashboard.</span>
<span class="c"># This uses environment variables to ease presentation of the</span>
<span class="c"># information, and supplies the fields as data arguments to the cURL command.</span>
<span class="c"># $SIGNUP_TOKEN - the name of the backand application you are connecting to</span>
curl https://api.backand.com/token -d <span class="nv">username</span><span class="o">=</span><span class="nv">$USERNAME</span> -d <span class="nv">password</span><span class="o">=</span><span class="nv">$PASSWORD</span> -d <span class="nv">grant_type</span><span class="o">=</span>password -d <span class="nv">appName</span><span class="o">=</span><span class="nv">$APP_NAME</span>

curl -X POST -d <span class="s2">"{'email':'user email','password':'user password','confirmPassword':'password confirmation','firstName':'first name','lastName':'last name'}"</span> -H <span class="s2">"SignUpToken: </span><span class="nv">$SIGNUP_TOKEN</span><span class="s2">"</span> https://api.backand.com/1/user/signup
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">signup</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">confirmPassword</span><span class="p">,</span> <span class="nx">parameters</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"matt+test5@backand.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currentStatus"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The user is ready to sign in"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"listOfPossibleStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The user is ready to sign in"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The system is now waiting for the user to responed a verification email."</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The user signed up and is now waiting for an administrator approval."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yHbb7a9S3yteUIo604KwwhchcrpE-wESafVtnnhQgAkj57ZxjWveNR63t64hqy8N2Gd_NPQhw6SAjNLv2mfYYP_rG-vELKe6gqEhqpWBFV43lD5IESH8k1SZldCmZiKLBvhCB_iHg4TfJQ8rUxh8ODYzaLALsSsn-I30ck7h21zn_LWDzxqxZa1Jq12tS0wrII7wOIyQiFCbsEmZiNMnlOR7Oz8CD7zhNHdOCFVh8Y801QIt3Jnn1hYz_4u1niWKJ5acTQqIEfXLZ7k65WnXuD46-UwZ0sORyKDj99o_xxEZpovchVm55cb5kRggqsmUjZBnP5N79fZiYA4tA8p_jPMBePIWE0q2WQ2m6CNJeJc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new user in your app. in signup you must provide the basic details of username email, first name, last name and password:</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>firstName</td>
<td>string</td>
<td>the user&rsquo;s first name</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>the user&rsquo;s last name</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>the user&rsquo;s email</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>the user&rsquo;s password</td>
</tr>
<tr>
<td>confirmPassword</td>
<td>string</td>
<td>the value entered by the user when asked to confirm the password during registration</td>
</tr>
<tr>
<td>parameters</td>
<td>object</td>
<td>An object containing information for any paremeters to the signup call. This allows you to set additional info on the user object at registration time</td>
</tr>
</tbody></table>

<h3 id="changepassword">.changePassword()</h3>
<pre class="highlight shell tab-shell"><code> curl -X POST  -d <span class="s2">"{'oldPassword':'&lt;old password&gt;','newPassword':'&lt;new password&gt;'}"</span> -H <span class="s2">"Authorization: Bearer FrJQqDuGeo-U2b5QHhPeF2GS86U9EDTz79CEUbtbTPl032g2VCJPpiuAuGjAS0dR-u4XfxB2p0AgeOdkMulo3FEZWqOXIdzVdjJe4u2m9CyPzzK49YzY4SeD5Ea5p-6LbJLcpDJbE2nkzGv4TQw-S3pq-Tmo-RuuKnEKbEDOMfdSjlTed7Tks2ioeVjSKUwazwX4yglg0DPVavLPFrRp9KBNTnTNnoTOFd4zbC7gGxLjIPwU1-_T_N2UK7XIBlSGXbUBL_Zybxt1fWRlSrvxlw"</span> https://api.backand.com/1/user/changePassword
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">changePassword</span><span class="p">(</span><span class="nx">oldPassword</span><span class="p">,</span> <span class="nx">newPassword</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Password changed'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>This call returns no data, only an HTTP Status Code</p>
</blockquote>

<p>Changes the password of the current user</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>oldPassword</td>
<td>string</td>
<td>the user&rsquo;s old password</td>
</tr>
<tr>
<td>newPassword</td>
<td>string</td>
<td>the user&rsquo;s desired new password</td>
</tr>
</tbody></table>

<h3 id="socialsignin">.socialSignin()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># There is no cURL equivalent for this call</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">socialSignin</span><span class="p">(</span><span class="nx">provider</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'signin succeeded with user:'</span> <span class="o">+</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<p>Signs the user into a Back&amp; application using a social media provider as the authentication method. This opens a dialog window supplied by the social media network provider. If the user does not have an account with the selected provider, they will be prompted to create one as a part of this process.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>string</td>
<td>Name of the provider to authenticate with. The full list can be obtained by calling <em>backand.getSocialProviders(scb)</em></td>
</tr>
</tbody></table>

<h2 id="object-property">.object property</h2>

<p>The <code class="prettyprint">.object</code> property contains functions related to basic database operations that can be performed on an object. You can also use this property to call the on-demand actions governed by an object in your system.</p>

<h3 id="getlist">.getList()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> https://api.backand.com/1/objects/items
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// No filters</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

<span class="c1">// With options</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">returnObject</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">pageSize</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="na">pageNumber</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'object created'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"totalRows"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"__metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unique"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"datetime"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"descriptives"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"dates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08 23:13:10Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">73</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A first test item"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08T23:13:10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"__metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unique"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"datetime"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"descriptives"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"dates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08 23:13:21Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A second test item"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08T23:13:21"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Fetches a list of records from the specified object. Uses <em>options</em> to store filter data, and <em>parameters</em> to store additional fields you wish to send through.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>A hash of filter parameters. Allowed parameters are: <em>pageSize</em>, <em>pageNumber</em>, <em>filter</em>, <em>sort</em>, <em>search</em>, <em>exclude</em>, <em>deep</em>, <em>relatedObjects</em></td>
</tr>
</tbody></table>

<h3 id="getone">.getOne()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> https://api.backand.com/1/objects/items/&lt;id&gt;
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

<span class="c1">// With options and parameters</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">returnObject</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"__metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unique"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"datetime"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"descriptives"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"dates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08 23:13:10Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">73</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A first test item"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08T23:13:10"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves a single record from the specified object.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>ID of the record to retrieve, subject to the filter specified in <em>params</em></td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>A hash of filter parameters. Allowed parameters are: <em>deep</em>, <em>exclude</em>, <em>level</em></td>
</tr>
</tbody></table>

<h3 id="create">.create()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -X POST -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> -d <span class="s2">"{'name':'Test 3','description':'A third test item'}"</span> https://api.backand.com/1/objects/items
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'object created'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

<span class="c1">// Sample code with options and additional parameters</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">returnObject</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">parameters</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">inputParameter1</span><span class="p">:</span> <span class="s1">'value1'</span><span class="p">,</span>
  <span class="na">inputParameter2</span><span class="p">:</span> <span class="s1">'value2'</span>
<span class="p">};</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'object created'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"__metadata"</span><span class="p">:{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"75"</span><span class="p">}}</span><span class="w">
</span></code></pre>
<p>Creates a record with the provided data in the specified object</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Data to use in the creation of the new record</td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>A hash of filter parameters. Allowed parameters are: <em>returnObject</em>, <em>deep</em></td>
</tr>
<tr>
<td>parameters</td>
<td>object</td>
<td>A hash of extra data to send along with the &ldquo;GET&rdquo; request. This is provided to actions that trigger off of a Read call</td>
</tr>
</tbody></table>

<h3 id="update">.update()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -X PUT -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> -d <span class="s2">"{'description':'A first items updated description'}"</span> https://api.backand.com/1/objects/items/73
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'object updated'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

<span class="c1">// Sample code with options and additional parameters</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">returnObject</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">parameters</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">inputParameter1</span><span class="p">:</span> <span class="s1">'value1'</span><span class="p">,</span>
  <span class="na">inputParameter2</span><span class="p">:</span> <span class="s1">'value2'</span>
<span class="p">};</span>
<span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'object created'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>This call has no response other than the status code by default.</p>
</blockquote>

<p>Updates a record with the specified ID in the specified object with the provided data.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>ID of the object to update</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Data to update the record with</td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>A hash of filter parameters. Allowed parameters are: <em>returnObject</em>, <em>deep</em></td>
</tr>
<tr>
<td>parameters</td>
<td>object</td>
<td>A hash of extra data to send along with the &ldquo;GET&rdquo; request. This is provided to actions that trigger off of a Read call</td>
</tr>
</tbody></table>

<h3 id="remove">.remove()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -X DELETE -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> https://api.backand.com/1/objects/items/77
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'object removed'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"__metadata"</span><span class="p">:{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"77"</span><span class="p">}}</span><span class="err"></span><span class="w">
</span></code></pre>
<p>Deletes a record from the specified object with the specified ID</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>ID of the object to update</td>
</tr>
<tr>
<td>parameters</td>
<td>object</td>
<td>A hash of extra data to send along with the &ldquo;GET&rdquo; request. This is provided to actions that trigger off of a Read call</td>
</tr>
</tbody></table>

<h3 id="action-get">.action.get()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> <span class="s2">"https://api.backand.com/1/objects/action/items?name=simpleOnDemand"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response (depends on action)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"response"</span><span class="p">:</span><span class="s2">"Hello world!"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Triggers on-demand custom actions that operate via HTTP GET requests</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>Name of the action to trigger</td>
</tr>
<tr>
<td>params</td>
<td>object</td>
<td>Parameters for the action to operate upon</td>
</tr>
</tbody></table>

<h3 id="action-post">.action.post()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -X POST -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> <span class="s2">"https://api.backand.com/1/objects/action/items?name=simpleOnDemand"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response (depends on action)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"response"</span><span class="p">:</span><span class="s2">"Hello world!"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Triggers on-demand custom actions that operate via HTTP POST requests</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the Back&amp; object to work with</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>Name of the action to trigger</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Object data to send as the body of the POST request</td>
</tr>
<tr>
<td>params</td>
<td>object</td>
<td>Parameters for the action to operate upon</td>
</tr>
</tbody></table>

<h2 id="file">.file</h2>

<p>This property allows you to work with file actions, interacting with the related files directly. You can use this after you have finished creating a server-side action in the Back&amp; dashboard, in the Actions tab of an object (object -&gt; actions tab -&gt; Backand Files icon -&gt; name: &lsquo;files&rsquo;)</p>

<h3 id="upload">.upload()</h3>
<pre class="highlight shell tab-shell"><code>curl -X POST  -d <span class="s2">"{'filename':'test.txt','filedata':'sample data'}"</span> -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> <span class="s2">"https://api.backand.com/1/objects/action/items?name=files"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">upload</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="s1">'files'</span><span class="p">,</span> <span class="nx">filename</span><span class="p">,</span> <span class="nx">filedata</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'file uploaded. url: '</span> <span class="o">+</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"url"</span><span class="p">:</span><span class="s2">"https://files.backand.io/bkndionicstarter/test.txt"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Uploads a file for a server-side action</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the object controlling the desired server-side action</td>
</tr>
<tr>
<td>fileAction</td>
<td>string</td>
<td>The name of the file action to work with</td>
</tr>
<tr>
<td>filename</td>
<td>string</td>
<td>The name of the file to upload</td>
</tr>
<tr>
<td>filedata</td>
<td>string</td>
<td>The file&rsquo;s data</td>
</tr>
</tbody></table>

<h3 id="remove">.remove()</h3>
<pre class="highlight shell tab-shell"><code>curl -X DELETE  -d <span class="s2">"{'filename':'test.txt'}"</span> -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> <span class="s2">"https://api.backand.com/1/objects/action/items?name=files"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="s1">'files'</span><span class="p">,</span> <span class="nx">filename</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'file deleted'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>Removes a file from a server-side action file set.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>object</td>
<td>string</td>
<td>Name of the object controlling the desired server-side action</td>
</tr>
<tr>
<td>fileAction</td>
<td>string</td>
<td>The name of the file action to work with</td>
</tr>
<tr>
<td>filename</td>
<td>string</td>
<td>The name of the file to remove</td>
</tr>
</tbody></table>

<h2 id="user">.user</h2>

<p>The <em>user</em> property returns data about the connected user (getUserDetails, getUsername, getUserRole, getToken, getRefreshToken).</p>

<h3 id="getuserdetails">.getUserDetails()</h3>
<pre class="highlight shell tab-shell"><code>curl -H <span class="s2">"Authorization:Bearer &lt;access token&gt;"</span> https://api.backand.com/api/account/profile
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getUserDetails</span><span class="p">(</span><span class="nx">force</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">From</span><span class="w"> </span><span class="err">SDK</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"statusText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7g9LM8ZHcvFLEIcSrdg8aYmpIK4gV9DYabab5spVsRmM6B_U3ovCWf8q6HeNFW4RMMQhsD6oiVpiTclHnO-J5qyFB2R8OyLl-ubrbIULvU0a7L8aS-cxPw7c4ij98zSPPa8kLkZBJULJRrcHn-fwmB4GygeTShNw7H1tqsHnIlcnk9X9ioj1CbjNjW4060gjTsGEOTGXACTrpQV4Qn3JD4XkSDNWySOG_15LorZdpiu7bcJ9T1EH9jnAIUyXA_0fIhFlDUsGV5Pr4EczaBufJQ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">86399</span><span class="p">,</span><span class="w">
    </span><span class="s2">"appName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bkndionicstarter"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@backand.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fullName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009820</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">From</span><span class="w"> </span><span class="err">cURL</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"matt+test@backand.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fullName"</span><span class="p">:</span><span class="s2">"Matt Billock"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"role"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"appName"</span><span class="p">:</span><span class="s2">"bkndionicstarter"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Gets the connected user&rsquo;s details.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>force</td>
<td>boolean</td>
<td>Forces the SDK to refresh its data from the server. <strong>Default: FALSE</strong></td>
</tr>
</tbody></table>

<h2 id="query">.query</h2>

<p>The <em>query</em> property lets you initiate a custom Back&amp; query using either HTTP GET or HTTP POST.</p>

<h3 id="get">.get()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> https://api.backand.com/1/query/data/test1
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response varies based on query return values</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support@backand.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Calls a custom query using a HTTP GET</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The name of the query to work with</td>
</tr>
<tr>
<td>params</td>
<td>object</td>
<td>Parameters to be passed to the query</td>
</tr>
</tbody></table>

<h3 id="post">.post()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># Env var $ANONYMOUS_TOKEN should contain your app's anonymous token</span>
curl -X POST -H <span class="s2">"AnonymousToken: </span><span class="nv">$ANONYMOUS_TOKEN</span><span class="s2">"</span> -d <span class="s2">"{'params':{...}}"</span> https://api.backand.com/1/query/data/test1
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Sample response varies based on query return values</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support@backand.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Calls a custom query using a HTTP POST</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The name of the query to work with</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Data to be included in the body of the HTTP POST</td>
</tr>
<tr>
<td>params</td>
<td>object</td>
<td>Parameters to be passed to the query</td>
</tr>
</tbody></table>

<h2 id="constants">.constants</h2>

<p>This contains constants used by the SDK, and is provided for reference.</p>

<table><thead>
<tr>
<th>constant</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>EVENTS</td>
<td>Contains the names of events fired by the SDK upon completion of one of several authentication actions</td>
</tr>
<tr>
<td>URLS</td>
<td>Contains the URL tokens for the Backand API</td>
</tr>
<tr>
<td>SOCIALS</td>
<td>Contains the list of social media authentication providers</td>
</tr>
</tbody></table>

<h2 id="helpers">.helpers</h2>

<p>The <code class="prettyprint">.helpers</code> property provides helper methods for constructing some of the more complex objects in the SDK. This includes filters and sort clauses for queries, as well as exclude clauses. It also provides a helper for obtaining a storageAbstract object.</p>

<h3 id="helpers-filter">.helpers.filter()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># There is no cURL equivalent</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"notEquals"</span><span class="p">,</span> <span class="s2">"John"</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"operator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notEquals"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Constructs a filter parameter for a GET query.</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>usage</th>
</tr>
</thead><tbody>
<tr>
<td>fieldName</td>
<td>the name of the field to apply a filter to</td>
</tr>
<tr>
<td>operator</td>
<td>the operator to apply</td>
</tr>
<tr>
<td>value</td>
<td>the value to use the operator to test against</td>
</tr>
</tbody></table>

<p>Here&rsquo;s a list of the available operators and the data types on which they operate:</p>

<table><thead>
<tr>
<th>Operator</th>
<th>Applicable Data Types</th>
</tr>
</thead><tbody>
<tr>
<td>equals</td>
<td>all</td>
</tr>
<tr>
<td>notEquals</td>
<td>numeric, date, text</td>
</tr>
<tr>
<td>greaterThan</td>
<td>numeric, date</td>
</tr>
<tr>
<td>greaterThanOrEqualsTo</td>
<td>numeric, date</td>
</tr>
<tr>
<td>lessThan</td>
<td>numeric, date</td>
</tr>
<tr>
<td>lessThanOrEqualsTo</td>
<td>numeric, date</td>
</tr>
<tr>
<td>empty</td>
<td>numeric, date, text</td>
</tr>
<tr>
<td>notEmpty</td>
<td>numeric, date, text</td>
</tr>
<tr>
<td>in</td>
<td>relation</td>
</tr>
<tr>
<td>startsWith</td>
<td>text</td>
</tr>
<tr>
<td>endsWith</td>
<td>text</td>
</tr>
<tr>
<td>contains</td>
<td>text</td>
</tr>
</tbody></table>

<h3 id="helpers-sort">.helpers.sort()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># There is no cURL equivalent</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"asc"</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Constructs a &ldquo;sort&rdquo; clause for a GET request</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>name</th>
<th>usage</th>
</tr>
</thead><tbody>
<tr>
<td>fieldName</td>
<td>the name of the field to apply a filter to</td>
</tr>
<tr>
<td>order</td>
<td>the order to sort (&lsquo;asc&rsquo; for ascending, &lsquo;desc&rsquo; for descending)</td>
</tr>
</tbody></table>

<h3 id="helpers-exclude">.helpers.exclude()</h3>
<pre class="highlight shell tab-shell"><code><span class="c"># There is no cURL equivalent</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">exclude</span><span class="p">.</span><span class="nx">options</span>
</code></pre>
<blockquote>
<p>Sample response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"totalRows"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalRows"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"all"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata,totalRows"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The exclude option gives you a number of constants you can use to exclude system objects from results.</p>

<h3 id="helpers-storageabstract">.helpers.storageAbstract()</h3>
<pre class="highlight javascript tab-javascript"><code><span class="kr">export</span> <span class="kr">class</span> <span class="nx">MyStorage</span> <span class="kr">extends</span> <span class="nx">StorageAbstract</span><span class="p">{</span>
  <span class="nx">constructor</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>
  <span class="nx">setItem</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">getItem</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">removeItem</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">clear</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>The storageAbstract function allows you to define a new storage proxy for storing browsing data in the local session/information store. Simply provide an object that implements the following methods:</p>

<table><thead>
<tr>
<th>function</th>
<th>arguments</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>setItem</td>
<td>id, val</td>
<td>sets a value in the storage container</td>
</tr>
<tr>
<td>getItem</td>
<td>id</td>
<td>gets a value from the storage container</td>
</tr>
<tr>
<td>remove</td>
<td>id</td>
<td>removes a key from the storage container</td>
</tr>
<tr>
<td>clear</td>
<td>none</td>
<td>clears the storage container</td>
</tr>
</tbody></table>

<h2 id="defaults">.defaults</h2>

<p>Contains a list of defaults for the SDK initialization parameters. The defaults are:</p>

<table><thead>
<tr>
<th>parameter</th>
<th>default value</th>
</tr>
</thead><tbody>
<tr>
<td>appName</td>
<td>null</td>
</tr>
<tr>
<td>anonymousToken</td>
<td>null</td>
</tr>
<tr>
<td>useAnonymousTokenByDefault</td>
<td>true</td>
</tr>
<tr>
<td>signUpToken</td>
<td>null</td>
</tr>
<tr>
<td>apiUrl</td>
<td>&lsquo;https://api.backand.com&rsquo;</td>
</tr>
<tr>
<td>storage</td>
<td>{}</td>
</tr>
<tr>
<td>storagePrefix</td>
<td>&lsquo;BACKAND_&rsquo;</td>
</tr>
<tr>
<td>manageRefreshToken</td>
<td>true</td>
</tr>
<tr>
<td>runSigninAfterSignup</td>
<td>true</td>
</tr>
<tr>
<td>runSocket</td>
<td>false</td>
</tr>
<tr>
<td>socketUrl</td>
<td>&lsquo;https://socket.backand.com&rsquo;</td>
</tr>
<tr>
<td>exportUtils</td>
<td>false</td>
</tr>
<tr>
<td>isMobile</td>
<td>false</td>
</tr>
<tr>
<td>mobilePlatform</td>
<td>&lsquo;ionic&rsquo;</td>
</tr>
</tbody></table>

<h2 id="examples-and-further-reading">Examples and further reading</h2>

<p><strong><em>To view the demo web page, pull down a sample from our <a href="https://github.com/backand/vanilla-sdk/blob/master/example/">example folder in our vanilla SDK</a> and run <code class="prettyprint">npm start.</code></em></strong></p>

          <h1 id="platform-specific-sdks">Platform-specific SDKs</h1>

<p>This section covers our platform-specific SDKs. These SDKs are optimized for the named platform, and wrap the <a href="#vanilla-sdk">Vanilla SDK</a> to provide access to Backand.</p>

<h2 id="angular-ionic-1-sdk">Angular - Ionic 1 SDK</h2>

<h3 id="overview">Overview</h3>

<p>This is the documentation for Back&amp;&lsquo;s Angular 1 SDK. This SDK enables you to communicate comfortably and quickly with your Backand app.
It wraps the <a href="https://github.com/backand/vanilla-sdk">vanilla-sdk</a> to allow you to work with Back&amp; more easily when working on projects based on Angular.js 1.</p>

<h3 id="installation">Installation</h3>

<p>To install the Angular 1 SDK, use the correct command for your dependency management platform:</p>

<table><thead>
<tr>
<th>Provider</th>
<th>Command</th>
</tr>
</thead><tbody>
<tr>
<td>npm</td>
<td>$ npm i -S @backand/angular1-sdk</td>
</tr>
<tr>
<td>yarn</td>
<td>$ yarn add @backand/angular1-sdk</td>
</tr>
<tr>
<td>bower</td>
<td>$ bower install backand-angular1-sdk</td>
</tr>
<tr>
<td>clone/download via Git</td>
<td>$ git clone https://github.com/backand/angular1-sdk.git</td>
</tr>
</tbody></table>

<h3 id="import">Import</h3>
<pre class="highlight html tab-html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"node_modules/@backand/angular1-sdk/backand.provider.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"backand.provider.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>Include the following tags in your <em>index.html</em> file to start working with the SDK:</p>

<h3 id="quick-start">Quick start</h3>
<pre class="highlight javascript tab-javascript"><code><span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'backand'</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">BackandProvider</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
      <span class="na">appName</span><span class="p">:</span> <span class="s1">'APP_NAME'</span><span class="p">,</span>
      <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'ANONYMOUS_TOKEN'</span>
    <span class="p">});</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'myAppCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'$http'</span><span class="p">,</span> <span class="s1">'Backand'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">myAppCtrl</span><span class="p">()</span> <span class="p">{</span>

  <span class="p">}]);</span>
</code></pre>
<p>Getting started with the SDK is as simple as configuring access to a Back&amp; application, then calling <em>getList</em> on a relevant object.</p>

<p>Review the full API reference for our <a href="#vanilla-sdk">Vanilla SDK</a> to get started with your back end!</p>

<h3 id="examples-for-angular-ionic-1">Examples for Angular/Ionic 1</h3>

<p><strong><em>To view a demo of the SDK in action, just run npm start - <a href="https://github.com/backand/angular1-sdk/blob/master/example/">example page</a>.</em></strong></p>

<h2 id="angular-ionic-2-sdk">Angular - Ionic 2 SDK</h2>

<h3 id="overview">Overview</h3>

<p>This is the documentation for Back&amp;&rsquo;s Angular 1 SDK. This SDK enables you to communicate comfortably and quickly with your Backand app.
It wraps the <a href="https://github.com/backand/vanilla-sdk">vanilla-sdk</a> to allow you to work with Back&amp; more easily when working on projects based on Angular.js 1.</p>

<h3 id="installation">Installation</h3>

<p>To install the Angular 2 SDK, use the correct command for your dependency management platform:</p>

<table><thead>
<tr>
<th>Provider</th>
<th>Command</th>
</tr>
</thead><tbody>
<tr>
<td>npm</td>
<td>$ npm i -S @backand/angular2-sdk</td>
</tr>
<tr>
<td>yarn</td>
<td>$ yarn add @backand/angular2-sdk</td>
</tr>
</tbody></table>

<h3 id="import">Import</h3>

<p>Use the following import statement to include the Angular2 SDK in your project:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">BackandService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@backand/angular2-sdk'</span>
</code></pre>
<h3 id="quick-start">Quick start</h3>

<p>Using the Back&amp; Angular2 SDK requires two steps - configuring access to the BackandService provider, and then actually calling the provider using the <a href="https://github.com/backand/vanilla-sdk">vanilla-sdk</a> methods.</p>

<h4 id="app-module-ts">app.module.ts:</h4>
<pre class="highlight javascript tab-javascript"><code><span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span> <span class="p">...</span> <span class="p">],</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span> <span class="p">...</span> <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span> <span class="nx">BackandService</span> <span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span> <span class="nx">AppComponent</span> <span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre>
<p>Update <em>app.module.ts</em> to include the BackandService as a provider</p>

<h4 id="app-component-ts">app.component.ts:</h4>
<pre class="highlight javascript tab-javascript"><code><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'my-app'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;h1&gt;Hello angular2-sdk&lt;/h1&gt;
    &lt;h3&gt;{{res}}&lt;/h3&gt;`</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">res</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">backand</span><span class="p">:</span> <span class="nx">BackandService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
  <span class="nx">getList</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">res</span> <span class="o">=</span> <span class="s1">'fetching objects...'</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s1">'users'</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="na">res</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">res</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2"> objects fetched`</span><span class="p">;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">})</span>
  <span class="p">}</span>
  <span class="nx">ngOnInit</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
      <span class="na">appName</span><span class="p">:</span> <span class="s1">'APP_NAME'</span><span class="p">,</span>
      <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'ANONYMOUS_TOKEN'</span>
    <span class="p">});</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getList</span><span class="p">();</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Now, call the SDK from <em>app.component.ts</em>. The SDK is initialized during <em>ngOnInit()</em>, and <em>getList</em> is called as a property on <em>AppComponent</em></p>

<p>Review the full API reference for our <a href="#vanilla-sdk">Vanilla SDK</a> to get started with your back end!</p>

<h3 id="examples-for-angular-ionic-2">Examples for Angular/Ionic 2</h3>

<p><strong><em>To view a demo of the SDK in action, just run npm start - <a href="https://github.com/backand/angular1-sdk/blob/master/example/">example page</a>.</em></strong></p>

<h2 id="redux-react-sdk">Redux - React SDK</h2>

<h3 id="overview">Overview</h3>

<p>This is the documentation for Back&amp;&rsquo;s Redux SDK. This SDK enables you to communicate comfortably and quickly with your Backand app.
It wraps the <a href="https://github.com/backand/vanilla-sdk">vanilla-sdk</a> to allow you to work with Back&amp; more easily when working on projects based on Redux.</p>

<h3 id="installation">Installation</h3>

<p>To install the Redux SDK, use the correct command for your dependency management platform:</p>

<table><thead>
<tr>
<th>Provider</th>
<th>Command</th>
</tr>
</thead><tbody>
<tr>
<td>npm</td>
<td>$ npm i -S @backand/redux-sdk</td>
</tr>
<tr>
<td>yarn</td>
<td>$ yarn add @backand/redux-sdk</td>
</tr>
</tbody></table>

<h3 id="import">Import</h3>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">BackandService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@backand/angular2-sdk'</span>
</code></pre>
<p>Use the following import statement to include the Angular2 SDK in your project:</p>

<h3 id="quick-start">Quick start</h3>
<pre class="highlight shell"><code><span class="gp">$ </span><span class="s2">"./node_modules/.bin/bkndredux"</span> --help
<span class="gp">$ </span><span class="s2">"./node_modules/.bin/bkndredux"</span> user obj1 obj2 obj3... -m <span class="o">(</span>thunk/saga<span class="o">)</span>
</code></pre>
<p>To get started, first use <em>bkdnredux</em> to generate the necessary <em>Types</em>, <em>Actions</em>, and <em>Reducers</em> for your Backand objects from the command line:</p>

<p><strong><em>Note:</em></strong> <em>user</em> is a unique object. It has a different <em>Reducer</em> and <em>Type</em>, and it reveals most of the authentication <em>Actions</em> (getUserDetails, signin, signout, etc.).</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">combineReducers</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux'</span>
<span class="kr">import</span> <span class="nx">user</span> <span class="nx">from</span> <span class="s1">'./user/userReducer'</span>
<span class="kr">import</span> <span class="nx">obj1</span> <span class="nx">from</span> <span class="s1">'./obj1/obj1Reducer'</span>
<span class="kr">import</span> <span class="nx">obj2</span> <span class="nx">from</span> <span class="s1">'./obj2/obj2Reducer'</span>

<span class="nx">combineReducers</span><span class="p">({</span>
  <span class="nx">user</span><span class="p">,</span>
  <span class="nx">obj1</span><span class="p">,</span>
  <span class="nx">obj2</span>
<span class="p">})</span>
</code></pre>
<p>Next, Include the new <em>Reducers</em> in <a href="http://redux.js.org/docs/api/combineReducers.html">combineReducers()</a> (see JavaScript tab)</p>

<p>Next, we nede to configure the middleware stack to work with the SDK. Pick the section that applies to your chosen middleware stack - either <a href="https://github.com/gaearon/redux-thunk">redux-thunk</a> or <a href="https://github.com/redux-saga/redux-saga">redux-saga</a> - then follow the corresponding instructions:</p>

<h4 id="redux-thunk"><a href="https://github.com/gaearon/redux-thunk">redux-thunk</a></h4>

<p>Download <a href="https://github.com/gaearon/redux-thunk">redux-thunk</a> and include it in <a href="http://redux.js.org/docs/api/createStore.html">createStore()</a>:
&ldquo;`javascript
import { createStore, applyMiddleware } from &#39;redux&rsquo;
import thunk from &lsquo;redux-thunk&rsquo;</p>

<p>createStore(rootReducer, initialState, applyMiddleware(thunk))
&rdquo;`</p>

<h4 id="redux-saga"><a href="https://github.com/redux-saga/redux-saga">redux-saga</a></h4>

<p>Download <a href="https://github.com/redux-saga/redux-saga">redux-saga</a> and include it in <a href="http://redux.js.org/docs/api/createStore.html">createStore()</a>:
&ldquo;`javascript
import { createStore, applyMiddleware } from &lsquo;redux&rsquo;
import createSagaMiddleware from &lsquo;redux-saga&rsquo;
import rootSaga from &lsquo;./sagas.js&rsquo;</p>

<p>const sagaMiddleware = createSagaMiddleware()
createStore(rootReducer, initialState, applyMiddleware(sagaMiddleware))
sagaMiddleware.run(rootSaga)
&rdquo;`</p>

<h4 id="working-with-the-sdk">Working with the SDK</h4>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">getUserDetails</span><span class="p">,</span> <span class="nx">signin</span><span class="p">,</span> <span class="nx">useAnonymousAuth</span><span class="p">,</span> <span class="nx">signout</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'./user/userActions'</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">signin</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">))</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">getUserDetails</span><span class="p">())</span>
</code></pre>
<p>Once the above is completed, import <code class="prettyprint">Actions</code> and dispatch them easily!</p>

<p>Review the full API reference for our <a href="#vanilla-sdk">Vanilla SDK</a> to get started with your back end!</p>

<h3 id="examples-for-react-redux">Examples for React/Redux</h3>

<p>Below are a few examples of Redux code that uses the Back&amp; SDK:
- <a href="http://codepen.io/backand/pen/VmRajE">codepen example (thunk)</a>
- <a href="http://codepen.io/backand/pen/pRgqyx">codepen example (saga)</a>
- <a href="https://github.com/backand/react-native-example/tree/sdk">react-native-example</a></p>

<h2 id="vue-js">Vue.js</h2>

<p>Vue.js is a progressive framework designed to provide an intuitive means by which a front-end developer can build their application. It is designed to be incrementally adaptable, allowing you to use it as often as you like, and provides a lightweight set of tools for adding dynamic functionality to a web app. By providing dynamic backing to the view model, you can easily make a Vue.js-based application into a large and feature-rich web app. In this post, we&rsquo;ll look at how we can use Backand&rsquo;s Vanilla SDK in a Vue.js-based application to provide the backing for that data service.</p>

<p>Note: This example is also available on <a href="http://codepen.io/backand/pen/ZLwwZg/?editors=1010">Codepen</a></p>

<h3 id="including-and-initializing-the-sdk">Including and Initializing the SDK</h3>
<pre class="highlight html tab-html"><code><span class="c">&lt;!-- Include the Back&amp; SDK --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://cdn.backand.net/vanilla-sdk/1.1.2/backand.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>The first step in connecting your Vue.js app to Backand is to import the JavaScript file containing the Backand SDK. You can either do this through a package manager, or via our CDN.</p>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// Other constructor code here</span>
  <span class="na">beforeMount</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">backand</span><span class="p">.</span><span class="nx">init</span> <span class="o">&amp;&amp;</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
      <span class="na">appName</span><span class="p">:</span> <span class="s1">'reactnativetodoexample'</span><span class="p">,</span>
      <span class="na">signUpToken</span><span class="p">:</span> <span class="s1">'4c128c04-7193-4eb1-8f19-2b742a2a7bba'</span><span class="p">,</span>
      <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'2214c4be-d1b1-4023-bdfd-0d83adab8235'</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="c1">// Other constructor code here</span>
<span class="p">});</span>
</code></pre>
<p>Once you&rsquo;ve included the SDK, you&rsquo;ll have access to the functionality via the global object backand. You&rsquo;ll next use this to initialize our connection to Backand in the constructor for your app&rsquo;s Vue instance. We recommend putting the initialization in the beforeMount lifecycle hook, but any location or hook that initializes the SDK before it is used should be sufficient:</p>

<p>With that, the Backand SDK is initialized. This post uses a pre-built demo app, reactnativetodoexample, and its associated keys. If you wish to connect this demo to your own Backand application, simply replace appName, signUpToken, and anonymousToken with the correct values from your Backand application&rsquo;s dashboard. Aside from updating the data model to include the ToDo object, the only thing you will need to do to ensure your app operates in the same way is to add the relevant custom actions when editing a ToDo item (see below).</p>

<h3 id="loading-the-object-data">Loading the object data</h3>

<blockquote>
<p>Next, you need to define a global method that knows how to load the object data from your Backand application. To do this, first define an empty data member to store the future results from the API:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// Other constructor code here</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">todos</span><span class="p">:</span> <span class="p">[]</span>
  <span class="p">},</span>
  <span class="c1">// beforeMount: () =&gt; { ...</span>
<span class="p">});</span>

</code></pre>
<blockquote>
<p>This data member will hold the list of ToDo items obtained from the server. Next, we&rsquo;ll define a global method to populate this data member:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// Other constructor code here</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fetchTodos</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">sort</span><span class="p">:</span> <span class="p">[</span><span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'creationDate'</span><span class="p">,</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">orders</span><span class="p">.</span><span class="nx">desc</span><span class="p">)],</span>
        <span class="na">exclude</span><span class="p">:</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">exclude</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">all</span><span class="p">,</span>
        <span class="na">pageSize</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span>
        <span class="na">pageNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
      <span class="nx">backand</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getUserDetails</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">params</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="p">[</span><span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">operators</span><span class="p">.</span><span class="nx">relation</span><span class="p">.</span><span class="k">in</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">userId</span><span class="p">)];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s1">'todos'</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
      <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="o">=&gt;</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span> <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// Other constructor code here</span>
<span class="p">});</span>
</code></pre>
<p>This function first clears out the todos data member, then defines a set of filter params using helper methods in the SDK (refer to our documentation for more information). Then, it calls backand.user.getUserDetails() to determine if the list should be restricted to the currently logged-in user. Finally, the method calls backand.object.getList() to fetch the list of objects in the SDK, and then updates the todos data container in the promise resolution block.</p>

<blockquote>
<p>Now, you simply need to call fetchTodos() in the appropriate location in the Vue lifecycle. To load the data when mounting is complete, you can add it to the &ldquo;mounted&rdquo; handler like so:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// Other constructor code here</span>
  <span class="na">mounted</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fetchTodos</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="c1">// Other constructor code here</span>
<span class="p">});</span>
</code></pre>
<h3 id="creating-editing-and-deleting-objects">Creating, Editing, and Deleting Objects</h3>

<blockquote>
<p>The following code is a handler for an x-template component titled todo-form, which is used to create a new ToDo entry in the application:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">'todo-form'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">template</span><span class="p">:</span> <span class="s1">'#todo-form'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">input</span><span class="p">:</span> <span class="s1">''</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">create</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// console.log(this.input)</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">backand</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">getUserDetails</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">objectName</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">text</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span>
            <span class="na">creationDate</span><span class="p">:</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">toISOString</span><span class="p">(),</span>
            <span class="na">completionDate</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="na">user</span><span class="p">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">userId</span>
          <span class="p">});</span>
        <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span> <span class="o">=</span> <span class="s1">''</span><span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

</code></pre>
<p>Once you&rsquo;ve got the basic display up and running, you&rsquo;ll want to add methods to create, update, and delete the ToDo items based on user actions.</p>

<p>Following a similar pattern to the initial load, this code first checks for a user context. If a user is not logged in, this call will have a value of null. Otherwise, we can use the userId of the active user to assign ownership of the new ToDo item. The code then calls backand.object.create() to create the record in your Backand application.</p>

<blockquote>
<p>You can follow a similar pattern when updating an object:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kr">const</span> <span class="nx">todoItem</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'todo'</span><span class="p">:</span> <span class="nb">Object</span>
  <span class="p">},</span>
  <span class="na">template</span><span class="p">:</span> <span class="s1">'#todo-item'</span><span class="p">,</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">update</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">objectName</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">completionDate</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">completionDate</span> <span class="p">?</span> <span class="kc">null</span> <span class="p">:</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">toISOString</span><span class="p">()</span>
      <span class="p">})).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">remove</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">objectName</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<p>This function demonstrates how to update a ToDo item&rsquo;s completion date using backand.object.update() - simply provide the object name, the object ID, and the collection of changes to be made. The above method also provides deletion functionality with the remove method. Simply provide the object name and the ID of the ToDo item to delete the entry from your database.</p>

<h3 id="keeping-the-app-up-to-date">Keeping the app up-to-date</h3>

<blockquote>
<p>First, create the appropriate Custom JavaScript actions in your Backand app&rsquo;s dashboard, and have them emit an event titled &ldquo;update_todos&rdquo; as follows:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="nx">socket</span><span class="p">.</span><span class="nx">emitAll</span><span class="p">(</span><span class="s2">"update_todos"</span><span class="p">,</span> <span class="p">{});</span>
</code></pre>
<p>While you now have a fully-functional CRUD interface for the &ldquo;todo&rdquo; object, you have not yet built a way for your application to receive - and respond to - updates. You can accomplish this using Backand&rsquo;s Realtime Communications capability.</p>

<p>This will send a socket message to all connected clients. At the moment we do not provide any parameters to this call (just an empty object - {}), but you can replace this with any of the variables available to your custom action, such as the dbRow that was just modified.</p>

<blockquote>
<p>First, include the Socket.io library in the appropriate location in your code:</p>
</blockquote>
<pre class="highlight html tab-html"><code>  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://cdn.backand.net/socket.io/1.4.5/socket.io.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>Now that you have a set of actions designed to announce changes to your ToDo database object, we need to configure the client side to receive socket communications.</p>

<blockquote>
<p>Once that&rsquo;s done, we need to set the SDK to enable socket mode:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// Other constructor code here</span>
  <span class="na">beforeMount</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">backand</span><span class="p">.</span><span class="nx">init</span> <span class="o">&amp;&amp;</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
      <span class="na">appName</span><span class="p">:</span> <span class="s1">'reactnativetodoexample'</span><span class="p">,</span>
      <span class="na">signUpToken</span><span class="p">:</span> <span class="s1">'4c128c04-7193-4eb1-8f19-2b742a2a7bba'</span><span class="p">,</span>
      <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'2214c4be-d1b1-4023-bdfd-0d83adab8235'</span><span class="p">,</span>
      <span class="na">runSocket</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="c1">// Other constructor code here</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Finally, you need to add an event handler. Update your mounted handler to include the event handler function as follows:</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// Other constructor code here</span>

  <span class="na">mounted</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fetchTodos</span><span class="p">();</span>
    <span class="nx">backand</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'update_todos'</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">fetchTodos</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="c1">// Other constructor code here</span>
<span class="p">});</span>
</code></pre>
<p>This function handles all update_todos events the same way - by reloading the entire list from the server. You can use a similar technique to write different handlers for each database operation, or to perform other types of logic based on your application&rsquo;s needs.</p>

<h3 id="conclusion">Conclusion</h3>

<p>With the above code, you now have a simple data service that you can use to update your Vue.js app&rsquo;s user interface with results from a Backand application. You can create, update, and delete records at will in a responsive manner, no server code required. With Backand, you can accelerate your Vue.js development, focusing on what makes your app unique, and leave the server side to us.</p>

<h2 id="jquery">jQuery</h2>

<p>JQuery is the most widely-deployed JavaScript library. It provides a comprehensive set of responsive tools for dynamically working with an HTML page&rsquo;s DOM, and is responsible for establishing and guiding a lot of the patterns that are the standard in web development. In this article, we&rsquo;ll look at how you can integrate the Back&amp; Vanilla SDK with an app built with JQuery.</p>

<p>Note: The code for this article is available on <a href="http://codepen.io/backand/pen/VPRpBN?editors=1010">CodePen</a></p>

<h3 id="including-and-initializing-the-sdk">Including and Initializing the SDK</h3>
<pre class="highlight html tab-html"><code><span class="c">&lt;!-- Include the Back&amp; SDK --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://cdn.backand.net/vanilla-sdk/1.1.2/backand.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>The first step in connecting your JQuery-based web app to Backand is to include the JavaScript file containing the Backand SDK. You can either do this through a package manager, or via our CDN.</p>

<h3 id="creating-the-service">Creating the Service</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">dataService</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">init</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">backand</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span>
      <span class="p">{</span><span class="na">appName</span><span class="p">:</span> <span class="s1">'reactnativetodoexample'</span><span class="p">,</span>
       <span class="na">signUpToken</span><span class="p">:</span> <span class="s1">'4c128c04-7193-4eb1-8f19-2b742a2a7bba'</span><span class="p">,</span>
       <span class="na">anonymousToken</span><span class="p">:</span> <span class="s1">'2214c4be-d1b1-4023-bdfd-0d83adab8235'</span><span class="p">,</span>
       <span class="na">runSocket</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">);</span>   
  <span class="p">},</span>
  <span class="c1">// Other code here</span>
<span class="p">};</span>
</code></pre>
<p>Once you&rsquo;ve included the SDK, you&rsquo;ll have access to the functionality via the global object backand. To integrate Back&amp; with a JQuery-based web app, we&rsquo;ll make use of a global service variable that will wrap the SDK. This service will handle initialization of the sdk, and provide all of the tools necessary to work with a Backand application. We&rsquo;ll start by declaring the service and initializing Backand with the following code:</p>

<p>This defines an object - dataService - that can be used to interact with the Backand SDK. In the data service, we define a method - init - that is used to initialize the SDK&rsquo;s connection to a Backand application. Simply call dataService.init() at the approrpriate location in your app&rsquo;s initialization code, and the SDK is ready to use (in the example, we do this in the $(document).ready handler, but this is not required).</p>

<p>This content uses a pre-built demo app, reactnativetodoexample, and its associated keys. If you wish to connect this demo to your own Backand application, simply replace appName, signUpToken, and anonymousToken with the correct values from your Backand application&rsquo;s dashboard. Aside from updating the data model to include the ToDo object, the only thing you will need to do to ensure your app operates in the same way is to add the relevant custom actions when editing a ToDo item (see below).</p>

<h3 id="fetching-and-manipulating-the-data">Fetching and Manipulating the Data</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">dataService</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">//other code here</span>
  <span class="na">getList</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span>  <span class="p">{</span>
          <span class="na">sort</span><span class="p">:</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'creationDate'</span><span class="p">,</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">sort</span><span class="p">.</span><span class="nx">orders</span><span class="p">.</span><span class="nx">desc</span><span class="p">),</span>
          <span class="na">exclude</span><span class="p">:</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">exclude</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">all</span><span class="p">,</span>
          <span class="na">pageSize</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
          <span class="na">pageNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">filter</span><span class="p">:</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'completionDate'</span><span class="p">,</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">operators</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">empty</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s1">'todos'</span><span class="p">,</span><span class="nx">params</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="c1">// Other code here</span>
<span class="p">};</span>
</code></pre>
<p>Now that our app is wired up to Backand, we&rsquo;ll want to start writing code to work with our Backand application&rsquo;s objects. We can retrieve a list of &ldquo;todo&rdquo; objects from the server by adding a property to the dataService object, getList, that calls the appropriate SDK method</p>

<p>This function first defines a set of filter params using helper methods in the SDK (refer to our documentation for more information). It then calls backand.object.getList() to fetch the list of objects in the SDK. The result of this call - a promise - is then passed back to the calling code. The calling code can then create its own success and failure handlers, using .then and .catch, and update internal state appropriately.</p>

<blockquote>
<p>You can use this technique to wrap every call in the Backand SDK, providing your JQuery code with full access to the server.</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">dataService</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">//other code here</span>
  <span class="na">create</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'todos'</span><span class="p">,</span>
          <span class="p">{</span><span class="s2">"text"</span><span class="p">:</span><span class="nx">text</span><span class="p">,</span><span class="s2">"creationDate"</span><span class="p">:</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()});</span>
  <span class="p">},</span>
  <span class="c1">// Other code here</span>
<span class="p">};</span>
</code></pre>
<p>From this point onward, working with the SDK is a matter of writing wrapper methods in the dataService object for each SDK method with which you wish to interact. Backand provides interfaces for all of the common database manipulation tasks. For example, the call in the sidebar defines a method - create - that creates a new entry in the database:</p>

<h3 id="handling-responses">Handling Responses</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">loadList</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">dataService</span><span class="p">.</span><span class="nx">getList</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
<span class="c1">// call a helper function to populate results in our UI</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">todo</span><span class="p">){</span>
        <span class="nx">appendTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">todo</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
      <span class="p">})</span>
   <span class="p">})</span>
<span class="p">}</span>
</code></pre>
<p>All Backand SDK methods return a promise, performing the tasks requested asynchronously. To handle the responses, we simply need to write the appropriate handlers for the .then and .catch calls. In the code to the side, for example, we write a simple set of handlers for the getList call.</p>

<p>As JQuery is a very flexible framework, it is hard to provide concrete guidance on exactly where SDK should take place in terms of the program&rsquo;s execution. The CodePen example demonstrates one method of creating this component, but you do not need to mimic the code structure there exactly. The key component is to ensure that backand.init() is called prior to any SDK calls taking place, otherwise the calls from the SDK will fail.</p>

<h3 id="conclusion">Conclusion</h3>

<p>With the above code, you now have a simple data service that you can use to update your JQuery-based app&rsquo;s user interface with results from a Backand application. You can make full use of the SDK, with the capability to create, update, and delete records at will in a responsive manner, no server code required. With Backand, you can accelerate your JQuery front-end development, focusing on what makes your app unique, and leave the server side to us.</p>

          <h1 id="common-use-cases">Common Use cases</h1>

<p>Below are some common use cases for Backand applications</p>

<h2 id="convert-an-older-app-to-our-serverless-sdk">Convert an older app to our serverless SDK</h2>

<p>Follow the steps below to convert your existing Angular 1 Back&amp; application to our new <a href="https://github.com/backand/vanilla-sdk">Serverless SDK</a>, and the associated <a href="https://github.com/backand/angular1-sdk">Angular 1 SDK</a>.</p>

<h3 id="step-1-adding-the-new-sdk-to-your-package-manager">Step 1: Adding the new SDK to your package manager</h3>

<p>To install the Angular 1 SDK, use the correct command for your dependency management platform:</p>

<table><thead>
<tr>
<th>Provider</th>
<th>Command</th>
</tr>
</thead><tbody>
<tr>
<td>npm</td>
<td>$ npm i -S @backand/angular1-sdk</td>
</tr>
<tr>
<td>yarn</td>
<td>$ yarn add @backand/angular1-sdk</td>
</tr>
<tr>
<td>bower</td>
<td>$ bower install backand-angular1-sdk</td>
</tr>
<tr>
<td>clone/download via Git</td>
<td>$ git clone $ git clone https://github.com/backand/angular1-sdk.git</td>
</tr>
</tbody></table>

<p>As a part of this, you&rsquo;ll also want to remove any of the previous SDK includes from the <em>vendor</em> directory (or wherever your package manager stores JavaScript dependencies). Keeping these older versions around can pose problems when sending HTTP requests.</p>

<h3 id="step-2-include-the-sdk-in-your-project">Step 2: Include the SDK in your project</h3>

<p>The Serverless SDK requires two includes for Angular 1 apps. The first is our Vanilla SDK, and contains all of our core SDK functionality. The second is our Angular 1 SDK, which wraps the Vanilla SDK and provides setup and access to its functionality. Start with removing the old SDK by commenting out - or deleting - the following line (or related lines, based on your project structure):</p>
<pre class="highlight html tab-html"><code>     <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib/angularbknd-sdk/dist/backand.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>Then, replace it with the new SDK links:</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib/backand-vanilla-sdk/dist/backand.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib/backand-angular1-sdk/dist/backand.provider.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>You can also use our SDK directly via our Content Distribution Network. Include the CDN links as follows, instead of the local <em>\lib</em> links specified above:</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdn.backand.net/vanilla-sdk/1.0.9/backand.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdn.backand.net/angular1-sdk/1.9.5/backand.provider.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<h3 id="step-3-authentication">Step 3: Authentication</h3>

<p>The authentication functionality in the SDK has not changed considerably with the new release. Here are a few notes on authentication elements that may be important to your application:</p>

<ul>
<li>If you have previously disabled anonymous auth in your app, you can re-enable it using <em>Backand.useAnonymousAuth()</em>. This value defaults to true, so if you do not modify the default value you do not need to make any changes.</li>
<li>Weve added new social media authentication functions:  <em>socialSignin</em>, and <em>socialSignup</em>. Please note that while some of the examples in our github repos - and some of our documentation - used <em>socialSignUp</em>  to refer to the specified function in the Backand SDK, this is no longer valid - the &ldquo;up&rdquo; will not be capitalized in the new SDK.</li>
</ul>

<h3 id="step-4-update-unauthorized-user-detection">Step 4: Update unauthorized user detection</h3>

<p>The <em>getToken()</em> method has been expanded, to use a promise. Originally this method would return undefined when a user was unauthorized, but this functionality can now be managed via the promise method. In the new SDK, the <em>getToken()</em> method is not as prominent as it was in previous versions, and you are likely to not need it as you work on your app.</p>

<h3 id="step-5-use-the-new-sdk-methods-in-place-of-http-calls">Step 5: Use the new SDK methods in place of $http calls</h3>

<p>The Serverless SDK features wrapper methods that can be used in place of the direct HTTP calls used in the previous method. Here&rsquo;s a quick comparison of the old SDK&rsquo;s HTTP communications, as compared to the new function-based Serverless SDK:</p>

<table><thead>
<tr>
<th><strong>Old Method</strong></th>
<th><strong>New Method</strong></th>
</tr>
</thead><tbody>
<tr>
<td>$http.get(getUrl());</td>
<td>Backand.object.getList(objectName);</td>
</tr>
<tr>
<td>$http.get(getUrlForId(id));</td>
<td>Backand.object.getOne(objectName, id);</td>
</tr>
<tr>
<td>$http.post(getUrl(), object);</td>
<td>Backand.object.create(objectName, object);</td>
</tr>
<tr>
<td>$http.put(getUrlForId(id), object);</td>
<td>Backand.object.update(objectName, object);</td>
</tr>
<tr>
<td>$http.delete(getUrlForId(id));</td>
<td>Backand.object.remove(objectName, id);</td>
</tr>
<tr>
<td>URL built with Backand.getApiUrl()</td>
<td>No URL necessary</td>
</tr>
</tbody></table>

<h3 id="step-6-update-handling-of-the-response-object">Step 6: Update handling of the response object</h3>

<p>The old SDK would use code similar to the following when handling responses from Back&amp; API calls:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">getAll</span><span class="p">()</span> <span class="p">{</span>
 <span class="nx">ItemsModel</span><span class="p">.</span><span class="nx">all</span><span class="p">()</span>
   <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">vm</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
   <span class="p">});</span>
<span class="p">}</span>
</code></pre>
<p>The new sdk does not store the results in a nested data member, but rather in a root data element. The old SDK stored the response contents in a root property, meaning that the actual data was a subset of this <em>data</em> property - hence the use of <em>result.data.data</em> in the old SDK. With the new SDK, you no longer need the extra level of disambiguation, and can store the data in your application&rsquo;s object with the following code:</p>
<pre class="highlight javascript tab-javascript"><code>     <span class="nx">vm</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</code></pre>
<h3 id="conclusion">Conclusion</h3>

<p>In this post, we covered the new SDK. We touched briefly on the features the new SDK has to offer, and walked through the process necessary to convert an existing Backand-powered app to the new API. Most importantly, though, is that we built this SDK based on your feedback, and we want more! Connect with us via social media, or on StackOverflow, or even directly via comments on our Git repos and contacting customer support - wed love to incorporate your thoughts and suggestions into the next version.</p>

<h2 id="setting-up-and-configuring-a-database">Setting up and Configuring a database</h2>

<p>Backand users typically fall into one of two categories. The first category works with the underlying data system as a series of objects, and doesn&rsquo;t spend a lot of time focused on the database underpinning the application. The second category, though, work with databases as a matter of course. Often they have existing databases that they want to build an interface on top of, with complex existing relationships that need to be modeled accurately by any framework put in front of it. Below we&rsquo;ll cover the database connectivity functionality offered by Backand, and how it can fit even the most complex of database needs.</p>

<h3 id="bringing-your-own-database">Bringing Your Own Database</h3>

<p>Most back-end-as-a-service providers want you to work within their clearly-defined data roles. They often require you to port your data to their format, or provide only highly static interfaces to interact with and consume existing data. At Backand, we realize that the database is often the core of your business, and you need to be able to work with your data with minimal effort possible. That&rsquo;s why we have built a large suite of functionality around importing  and managing your existing SQL database. Backand can analyze your database structure and build a scaffold around your existing data quickly, allowing your application developers to very rapidly begin working with your existing database structure.</p>

<h3 id="importing-a-database">Importing a Database</h3>

<p>While you can create a new database from scratch using our JSON object modeling interface, the true power of Backand is shown when we integrate seamlessly with your existing database. When you connect your Backand application to an existing database on an external server, Backand quickly analyzes your database structure and constructs a meaningful interface on top of your data. This covers everything from basic table structure all the way up to complex foreign-key relationships and many-to-many mapping tables. Backand then uses this data to construct an API on top of your database, allowing you to interact with your data in a RESTful manner very quickly and easily.</p>

<h3 id="staying-in-sync">Staying In Sync</h3>

<p>While an import process is beneficial, it quickly loses its ease if it does not accurately track changes. Many vendors expect your database schema to remain static, and want to work only with your data  requiring a re-sync whenever the database structure changes. With Backand, the need to re-synchronize is completely removed from the process. Backand automatically detects changes to your underlying database and updates its representation of your data, removing a needless tertiary step in the process to ensure that your application remains synchronized with your database&rsquo;s structure. Furthermore, data changes are synced back to the database server nearly instantaneously, ensuring that no matter how you fetch your data it will always be up-to-date.</p>

<h3 id="summary">Summary</h3>

<p>If you already have a database that you&rsquo;re looking to build into an application, your options for outsourcing the related back end can be limited. With Backand, however, you can bring your own database and import its structure directly. When you link your Backand application with your existing database you always have up-to-date access on both your database&rsquo;s schema and the data itself. By not having to perform awkward data transformations, or re-synchronize every time you make a change to the schema, Backand allows you to focus on the core of your application, keeping your database up-to-date no matter what.</p>

<h2 id="using-the-back-rest-api">Using the Back&amp; REST API</h2>

<p>Once your web application&rsquo;s data has been imported and configured, the next step is working with your data. Backand, using your underlying database structure as a key, builds a RESTful API in front of your database, allowing for full programmatic access to each of the HTTP verbs that you would want to use to interact with your server objects. Below we&rsquo;ll cover the concepts behind REST, and how Backand makes creating and testing a RESTful interface simple.</p>

<h3 id="what-is-rest">What is REST?</h3>

<p>REST stands for Representational (RE) State (S) Transfer (T). It is a software architectural style that is designed for the creation of (and interaction with) scalable web services. Most RESTful web services  including Backand&rsquo;s implementation  use HTTP verbs such as GET, POST, PUT, and DELETE, to perform specific actions on the server. The end result is a stateless representation of object interaction, providing a clearly-defined interface to an underlying set of objects in an application. This allows for communication with the server to occur as a series of object changes, reducing the complex server logic needed with other, more stateful architectures.</p>

<h3 id="automatically-building-an-api">Automatically Building an API</h3>

<p>When you import your database into your application, Backand analyzes your database&rsquo;s underlying schema. It uses the database schema itself, along with metadata associated with each of your database&rsquo;s tables and columns, to build a RESTful API that accurately represents the underlying data structure. Not only does it give you API endpoints for each of the common object actions (such as CREATE, RETRIEVE, UPDATE, and DELETE), but it also uses your database&rsquo;s metadata to fully represent the potential ranges of your application&rsquo;s objects, from representing foreign key relationships all the way down to allowing minimum and maximum values on a specific column in a table. It also keeps track of the nullability of each column, marking non-null fields as required parameters in all related API endpoints.</p>

<p>By automatically providing these endpoints for your database, Backand provides a scalable and understandable API based on web communication standards that would normally take months to develop, and does so within moments of attaching your database. The endpoints follow all defined security roles, and respond with well-formed JSON that pulls in as much  or as little  of your object as you need.</p>

<h3 id="the-rest-api-playground">The REST API Playground</h3>

<p>While a RESTful API is useful, it can also be opaque while the application is being built around it. To get past this nebulous initial state, Backand offers the REST API Playground. The REST API Playground is a dynamic web page built using <a href="http://swagger.io/">Swagger 2.0</a>, an automated front-end for well-defined JSON web APIs. It provides information on each of the endpoints defined in your application, and gives you complete access to test these endpoints in an easy-to-use web-based interface. Through this interface you can see every parameter involved in each API endpoint in your application, and quickly test the endpoints using the supplied parameter prompts and descriptions. This tool can greatly increase development speed, as interested parties can simply use the REST API Playground to build out their JSON web requests prior to incorporating them into the application logic.</p>

<h3 id="actions-and-queries">Actions and Queries</h3>

<p>Each API endpoint created by Backand also fully integrates with the Action system. You can associate actions with each of the API calls, which simply map to the underlying database actions. POST calls trigger database CREATE actions, PUT calls trigger UPDATE actions, DELETE calls trigger DELETE actions, and so on. Furthermore, the endpoints of each of your custom actions are provided in a helpful &ldquo;Actions&rdquo; section, allowing you to test each custom action independently, and with the same useful interface. Finally, endpoints for custom queries that you define in your application are also delineated in the API Playground, allowing for quick iteration on the underlying queries and greatly easing the troubleshooting process.</p>

<h3 id="summary">Summary</h3>

<p>Interacting with the data in your application is something that is crucial to the success of your product. Through Backand&rsquo;s automatic REST scaffolding, you can quickly and easily get up and running with a scalable web service that can provide developers with access to all of the potential modifications they might need to make to your data. With access to both custom actions and queries, as well as the predefined database triggers you create in the dashboard, Backand&rsquo;s RESTful API offers you the full functionality of a scalable web service  all with the click of a button.</p>

<h2 id="configuring-role-based-security">Configuring Role-based Security</h2>

<p>One of the core concerns of any application that deals with sensitive user and business data is security. In this article we&rsquo;ll cover how Backand handles security for your application, covering the entire stack  from user registration to security templates. We&rsquo;ll also discuss anonymous access to your application, which can greatly enhance your application&rsquo;s adoption by the world at large. Backand takes your application&rsquo;s security seriously, and with the following we&rsquo;ll show you how we protect your data effectively.</p>

<h3 id="user-registration">User Registration</h3>

<p>The security process starts with user registration. Backand uses two-factor authentication by default  requiring you to first invite users to your application, then directing them to a registration page that you configure. Backand takes care of the communication, handling the verification (configurable) and registration processes from your customizable sign-up page. This entire process is known as &ldquo;private&rdquo; mode, which is the default for all new applications  it requires that users are invited to join the app.</p>

<p>Once your app is stable and your security is fully configured (or even before if you&rsquo;re confident in your data), you can open your application up to the public. This allows users to sign up to your application directly, without having to be invited. Once they register, Backand sends the user a verification email to ensure that the sign-up is legitimate, if the sign-up email verification setting is enabled.. Once the new user confirms the registration, Backand redirects them to a custom verified email link, representing their successful registration with the system. The user is assigned a default role (see below), and is free to use your app within the permissions framework that you constructed.</p>

<h3 id="role-based-security">Role-based Security</h3>

<p>Backand uses role-based security to secure access to your application data. This is accomplished by assigning each user in your application a role. Roles have varying permission levels throughout your app, from object-specific restrictions on record modification all the way up to full access to your application&rsquo;s configuration. Each role&rsquo;s permission set is configurable at a macro level as well as at an object level, allowing you true flexibility in securing your application.</p>

<p>New users created from the admin dashboard are created in the &ldquo;admin&rdquo; role. One of your first steps should be adding an additional security role for new users  whether invited in private mode or registering organically in public mode  that will serve as the default for user sign-ups. Once this default role is set, all new users are assigned the new role automatically. You can then make any permission or access changes you need to from the administrative dashboard.</p>

<h3 id="security-templates">Security Templates</h3>

<p>Setting a security level for every single object and user class in your database has the potential to be a tedious, error-prone process. Luckily Backand provides a solution through Security Templates. Security Templates define a default set of security permissions for all of the roles in your application that can then be applied to each of the Create, Read, Update, and Delete actions in your database. Templates can be assigned at both the object and query level, allowing you flexibility in configuring user access to your data.</p>

<p>Sometimes, though, a blanket approach isn&rsquo;t sufficient for the final functionality of your application. In those cases, Backand allows you to override security templates at a per-role level. This ability gives you more granular control over your application&rsquo;s data, allowing you to grant or revoke access to sensitive components as necessary. Through use of Security Templates and Roles, you will be able to fully secure your application and ensure only authorized users can perform actions against your data.</p>

<h3 id="anonymous-access">Anonymous Access</h3>

<p>In many cases, particularly when working with your application as an API, it is beneficial to grant anonymous access to a specific user. This user can be someone arriving at your site organically, or can be another web service hitting your application&rsquo;s RESTful endpoints. To accommodate these cases, Backand provides anonymous access. This uses token-based authentication to ensure that the anonymous use case is valid and that the user in question is allowed to interact with your app. Furthermore, you can restrict anonymous access to your application based on any of the underlying user roles, ensuring that anonymous uses can only access the elements that you want them to.</p>

<h3 id="summary">Summary</h3>

<p>Securing your application is a priority task, and crucial to ensuring your application&rsquo;s success. Through Backand&rsquo;s use of two-factor authentication to drive registration, you can be sure that the users coming into your application are a low fraud risk, and that both their experience  and your data  are protected. Additionally, you can secure your app through the use of user roles and security templates, which allow you to quickly and easily manage the permissions in your application. Finally, you can grant some use cases anonymous access to your application, easing integration with third parties and handling organic traffic with ease. With Backand&rsquo;s security offerings, you can rest assured that your application is safe and protected.</p>

<h2 id="integrating-with-third-party-apis">Integrating with Third Party APIs</h2>

<p>Libraries have built the modern world. In a post originally on Google Plus, Steve Yegge detailed how it was <a href="https://gist.github.com/chitchcock/1281611">platform development</a> that provided the basis for success of a lot of the major technology companies, using Amazon, Microsoft, and Facebook as examples. True platform-based development isn&rsquo;t possible without a mechanism to integrate with those platforms, though. Below we&rsquo;ll look at the options available to you when developing a Backand-backed web app, detailing which APIs work best at each stage of the application.</p>

<h3 id="guidelines-on-integrations">Guidelines on Integrations</h3>

<p>As a general rule, you&rsquo;ll see two overall ideas put forth in this article:</p>

<ol>
<li>The client side of your application can integrate with any library that is available on the client side. Most commonly, this will consist of JavaScript libraries.</li>
<li>The server side of your application can integrate with any web service that bases its communication off of HTTP web requests.</li>
</ol>

<p>Most modern libraries you are likely to consume will fit into one of these two categories, so integration usually shouldn&rsquo;t be a concern. However, some functionality will not be available to you if it relies upon complex server libraries or non-HTTP integrations, such as SOAP web services. As such, it is critically important that you plan your library usage thoroughly, and understand the requirements and auxiliary dependencies of each vendor you choose to integrate with. You can see a few examples of this in action on Backand&rsquo;s GitHub account:</p>

<ul>
<li><a href="https://github.com/backand/stripe-example">This project</a> shows how to use Backand perform a basic integration with Stripe.</li>
<li>Backand&rsquo;s <a href="https://github.com/backand/simple-noterious-app">Noterious app</a>, a note board application backed by Backand&rsquo;s SDK, demonstrates using Backand to integrate with Amazon Web Services within a larger application.</li>
</ul>

<h3 id="client-side-integrations">Client-side Integrations</h3>

<p>As mentioned above, any library available to a client-side web app should be available to your AngularJS app&rsquo;s client-side code. Simply include the required library along with your other dependencies, and you should be able to use the library just as you would in any other application. One potential issue to be faced, though, is that of callbacks. Due to Backand providing the server-side integration for your web app, you will want to create On-Demand Custom Actions to respond to any callbacks sent from the third party you are consuming. Simply create the endpoint, specify the expected parameters, and implement the processing for the delayed notification within the JavaScript action, then provide the URL for that action as your application&rsquo;s callback URL. This approach allows your app to scale more quickly, as the processing load is handled primarily by Backand as opposed to your own servers.</p>

<h3 id="server-side-integrations">Server-side Integrations</h3>

<p>Server-side integrations of third party libraries are restricted to those libraries that communicate via HTTP requests. This can mean a RESTful API, or just a series of simple HTTP web services that accept JSON parameters. Any library that can integrate natively with JavaScript code can be implemented in this manner. Take, for example, an integration with <a href="https://stripe.com/docs/api">Stripe&rsquo;s REST API</a>. While Stripe helpfully provides encapsulating libraries in a number of languages, all of their functionality is available via simple web requests which can be accessed via CURL. These endpoints are ideal for server-side actions, which can use JavaScript&rsquo;s built in AJAX communication functionality to hit the same endpoints. Simply wrap each endpoint in a custom server-side action, then modify your client-side code to call your action wrappers. In this way, you can integrate with any HTTP API.</p>

<p>While many of these libraries have code that can exist in either the client or the server, the approach above is ideal when security is a consideration. If you&rsquo;re dealing with a customer&rsquo;s sensitive personal info, a client side-based implementation may expose your users to unnecessary risk. By moving these calls to server-side custom actions, you can protect your users&rsquo; information by encrypting the communications with HTTPS web requests (already provided by Backand), and put the sensitive code behind your application&rsquo;s administrative dashboard.</p>

<h2 id="working-with-geographic-data">Working with Geographic Data</h2>

<p>Backand lets you store geography points as fields as part of any object. Geography point is an array of latitude and longitude which represents a location on a map.</p>

<p>With Backand geography query you can easily find distance between points or objects that match a distance to a specific location.</p>

<h3 id="add-a-point">Add a Point</h3>

<p>To add new point field, open Backand Model, select add field with <em>point</em> type. To POST new data point for latitude 10 and longitude 20 just send the following array:</p>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="s2">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id="query-point">Query Point</h3>

<p>To query a distance within a geography point you can use any of the follow commands:
<code class="prettyprint">$withinMiles</code>
<code class="prettyprint">$withinFeet</code>
<code class="prettyprint">$withinKilometers</code>
<code class="prettyprint">$within (in meters)</code></p>

<p>To get all the restaurants within 25 Miles of San Francisco Marina District [37.8019859, -122.4414805]:</p>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"restaurants"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"q"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"location"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"$withinMiles"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mf">37.8019859</span><span class="p">,</span><span class="w"> </span><span class="mf">-122.4414805</span><span class="p">],</span><span class="w"> </span><span class="mi">25</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The above noSql is translated into MySQL syntax using the new ST_Distance() function:</p>
<pre class="highlight plaintext"><code>
  SELECT * FROM `restaurants` WHERE (ST_Distance ( `restaurants`.`location`, ST_GeomFromText('POINT( 37.8019859 -122.4414805 )') ) &lt;= 25 /(69))

</code></pre>
<h3 id="query-point-with-parameters">Query Point with Parameters</h3>

<p>In order to query get geography points dynamically, use <a href="http://docs.backand
.com/en/latest/getting_started/queries/index.html">Query</a> with parameters:</p>

<ol>
<li>Add this <em>Input Parameters</em>: lan, lon, dist</li>
<li>In the Query use tokens (&ldquo;&#123;&#123;lan}}&rdquo;, &ldquo;&#123;&#123;lon}}&rdquo; and &ldquo;&#123;&#123;dist}}&rdquo;) to represent the input parameters:
3.</li>
</ol>

<p>{
    &ldquo;object&rdquo;: &ldquo;restaurants&rdquo;,
    &ldquo;q&rdquo;: {
      &ldquo;location&rdquo; : { &ldquo;$withinMiles&rdquo; : [[&ldquo;&#123;&#123;lan}}&rdquo;, &ldquo;&#123;&#123;lon}}&rdquo;], &ldquo;&#123;&#123;dist}}&rdquo;] }
    }
  }</p>

<h3 id="filter-point">Filter Point</h3>

<p>Using Backand noSql filter you can filter object based on a distance to a specific point using $within command.</p>

<p>Filter all the restaurants within 25 Miles of San Francisco Marina District [37.8019859, -122.4414805]:</p>
<pre class="highlight javascript tab-javascript"><code>
  <span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/restaurants'</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">filter</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"q"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"location"</span> <span class="p">:</span> <span class="p">{</span> <span class="s2">"$withinMiles"</span> <span class="p">:</span> <span class="p">[[</span><span class="mf">37.8019859</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4414805</span><span class="p">],</span> <span class="mi">25</span><span class="p">]}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>

</code></pre>
<h2 id="bulk-operations">Bulk Operations</h2>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parameters"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"string"</span><span class="p">:</span><span class="s2">"string"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Backand&rsquo;s bulk operations endpoint can be used to operate on multiple items in a single request. The request has the following general form:</p>

<p>The above represents an array of parameter hashes. Each parameter hash represents a different action to be performed as a part of the bulk operaation. The parameter hashes are broken down as follows:</p>

<table><thead>
<tr>
<th>Field name</th>
<th>Possible Values</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td>POST/ PUT/ DELETE</td>
<td>yes</td>
<td>The HTTP verb to be used</td>
</tr>
<tr>
<td>url</td>
<td>url for the object</td>
<td>yes</td>
<td>This is the URL used to access the object being modified in bulk</td>
</tr>
<tr>
<td>data</td>
<td>JSON hash</td>
<td>yes</td>
<td>This only applies to POST and PUT actions. It represents the data to be created (for POST requests), or the updates to existing data (for PUT requests). Provided as a series of key-value pairs</td>
</tr>
<tr>
<td>parameters</td>
<td>JSON string</td>
<td>no</td>
<td>additional parameters, and values for those parameters, to send with the request</td>
</tr>
<tr>
<td>headers</td>
<td>JSON hash</td>
<td>no</td>
<td>This is used to set custom HTTP headers. You can use it to dynamically set the Authorization header for each REST call. If no value is provided, the generic bulk call authorization headers are used.</td>
</tr>
</tbody></table>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="err">Headers</span><span class="p">:{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer **YOUR_ACCESS_TOKEN**"</span><span class="p">,</span><span class="w"> </span><span class="s2">"AppName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**YOUR_APP_NAME**"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The key element of this operation is the &ldquo;headers&rdquo; parameter. This represents the HTTP headers used to perform the request, and are used to uniquely identify your application as each request as made. The headers parameter should have the following form:</p>

<p>The value for &ldquo;YOUR_ACCESS_TOKEN&rdquo; is obtained via a call to &lsquo;https://api.backand.com/token&rsquo; - simply replace &ldquo;YOUR_ACCESS_TOKEN&rdquo; with the bearer token returned by this endpoint, and &ldquo;YOUR_APP_NAME&rdquo; with your application&rsquo;s name that was specified during app creation. Each action hash can accept a different header parameter, allowing multiple operations to be undertaken by multiple users as a part of the same bulk request. If the &lsquo;headers&rsquo; parameter is not included, the headers used for the call to the bulk operations endpoint are used for the relevant action instead.</p>

<blockquote>
<p>Bulk operations URL: https://api.backand.com/1/bulk</p>
</blockquote>

<p>Requests to perform bulk actions are sent as HTTP POST requests to the bulk operations URL:</p>

<p>Below are several examples of the types of bulk actions that can be performed using this new functionality.</p>

<h3 id="example-1-adding-multiple-rows">Example 1: Adding multiple rows</h3>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/YOUR_OBJECT_NAME"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"fieldname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/YOUR_OBJECT_NAME"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"fieldname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>To add multiple objects to your application, simply provide multiple POST action hashes in your request&rsquo;s data array. The general form of the request is:</p>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/news"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"heading"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Breaking news"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/news"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"heading"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Politics"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>Simply change the &lsquo;url&rsquo; parameter of each action hash to match your object&rsquo;s endpoint in your application. Let&rsquo;s look at a specific example that adds multiple &lsquo;news&rsquo; objects to an application:</p>

<p>As you can see above, this bulk operation will add two new objects of type &lsquo;news&rsquo; to your application. The first will have the heading of &ldquo;Breaking News&rdquo;, while the second will have the heading of &ldquo;Politics&rdquo;.</p>

<h3 id="example-2-deleting-multiple-rows">Example 2: Deleting multiple rows</h3>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/YOUR_OBJECT_NAME/OBJECT_ID1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/YOUR_OBJECT_NAME/OBJECT_ID2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>To delete multiple objects from your application, simply provide multiple DELETE action hashes in your request&rsquo;s data array. The general form of the request will be:</p>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="s2">"https://api.backand.com/1/objects/news/2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="s2">"https://api.backand.com/1/objects/news/3"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>By changing the YOUR_OBJECT_NAME and OBJECT_ID# parameters, you can select which specific IDs will be deleted in your application. For example, if you wanted to delete &lsquo;news&rsquo; objects with IDs of 2 and 3, you would use the following set of action hashes:</p>

<h3 id="example-3-multiple-commands">Example 3: Multiple commands</h3>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/news"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"heading"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Breaking news"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/authors"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ann@backand.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ann"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/authors/1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brian"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.backand.com/1/objects/news/3"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>You can mix and match operations to be performed to match whatever actions you need to take. For example, the following set of action hashes will create a new &lsquo;news&rsquo; object, create a new &lsquo;authors&rsquo; object, update an existing &lsquo;authors&rsquo; object with an ID of 1, and delete a &lsquo;news&rsquo; object with an ID of 3:</p>

<h2 id="retrieving-data">Retrieving Data</h2>

<p>A Complex object is an object that has relationships to other objects in the database. For example, the default model provided when you create a new Backand application has two objects: users and items. There is a one-to-many relationship between users and items, meaning that a specific user may have many different related items. In this example, both users and items are complex objects. The relationship between the two tables, represented as the User object having a collection of Item objects, can be retrieved from the database by loading them through the object&rsquo;s API.</p>

<p>There are two ways in which you can load complex objects: Deep Loading, or Lazy Loading. Deep loading pulls back both the object and all of its related objects. In the Users/Items example, this would pull back both the user, and all items related to that user. Lazy loading, by comparison, only pulls back the parent object, allowing you to more closely control when you pull in the rest of the data. This is important when the number of related objects is large, meaning a significant load time would be necessary.</p>

<p>An example of another complex object would be &lsquo;email&rsquo;:</p>
<pre class="highlight shell tab-shell"><code>curl https://api.backand.com/1/objects/users/5?deep<span class="o">=</span><span class="nb">true</span>
</code></pre>
<p>Seeing as most objects in a Backand application tend to  be complex objects, we added an easy way to enable deep
loading of objects. Simply append &lsquo;?deep=true&rsquo; to the object fetch URL, like so:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"...."</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">other</span><span class="w"> </span><span class="err">users</span><span class="w"> </span><span class="err">fields...</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:[{</span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"...."</span><span class="p">,</span><span class="err">...</span><span class="p">},</span><span class="err">...</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This will result in the following JSON:</p>
<pre class="highlight shell tab-shell"><code>curl https://api.backand.com/1/objects/users
<span class="c">#or</span>
curl https://api.backand.com/1/objects/users/5
</code></pre>
<p>It takes two requests to perform a Lazy Load. The first request is a shallow request for users or a specific user.</p>
<pre class="highlight shell tab-shell"><code>curl https://api.backand.com/1/objects/users/5/items
</code></pre>
<p>The second request is for all the items of a specific user.</p>
<pre class="highlight shell tab-shell"><code>curl https://api.backand.com/1/objects/items
</code></pre>
<p>This request is similar to fetching the entire list of items, which would be done as follows:</p>

<p>You can also supply other query string parameters (such as paging, filtering, and sorting). See <a href="#getlist">the getList function</a> for more details.</p>

<p>Regarding which approach to use - lazy or deep loading - there is no clear answer. It will be dependent upon the individual programming situation. If you need to present all of the relevant data at once, then deep loading is the right approach. However, if the object has a large number of relations to pull down, it might make more sense to do a lazy load, then selectively load related objects as needed.</p>

<h3 id="filter-and-predefined-filter">Filter and Predefined Filter</h3>
<pre class="highlight json tab-json"><code><span class="p">[{</span><span class="s2">"fieldName"</span><span class="p">:</span><span class="s2">"firstName"</span><span class="p">,</span><span class="s2">"operator"</span><span class="p">:</span><span class="s2">"contains"</span><span class="p">,</span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"oh"</span><span class="p">}]</span><span class="w">
</span></code></pre>
<p>You can supply a query string parameter named &lsquo;filter&rsquo; to filter your objects during fetch. This could be useful in
developm situations, or as a part of a UI with search functionality, allowing your users to see whatever they wish. You can either create a filter with NoSQL syntax (see <a href="#nosql-query-language">NoSQL Query Language</a> for syntax), or with JSON containing a field name, an operator, and a value:</p>

<p>See <a href="#getlist">the getList function</a> for full details on filters.</p>

<h4 id="predefined-filter">Predefined Filter</h4>

<p>Sometimes, for security reasons you may want to enforce partial reading of object data, usually based upon the current user or their role. This can be accomplished on the server-side using a Predefined Filter. Predefined Filters can be found in the Security tab of each object. They act as a SQL &lsquo;where&rsquo; condition. Filters are combined using the &lsquo;AND&rsquo; operator. You can write the filter using either a SQL statement or the NoSQL Query Language reading of partial data, usually depending on the current user or current user role. The option to force it from the server side is called Predefined Filter and you can find it at the Security tab of each object. The predefined filter acts as a SQL where statement condition. If you add additional filter that were described above then they will be added with an &ldquo;AND&rdquo; logic. You can write the predefined filter either as a SQL statement or as a <a href="#nosql-query-language">NoSQL Query Language</a> statement.</p>

<h3 id="queries-and-on-demand-actions">Queries and On Demand Actions</h3>

<p>So far we have discussed how to read objects that were defined in the database model. To create custom data structures, we can use Queries and On Demand Actions. Queries are identical to SQL database queries but you can write them using NoSQL syntax (see <a href="#nosql-query-language">NoSQL Query Language</a> for more details). With On Demand Actions, you can orchestrate any structure that you want using javascript on the server side. You can request model objects, queries, or other on demand actions. See <a href="#custom-actions">On Demand Actions - Server-Side Javascript Code</a> for more information.</p>

<h4 id="pagination">Pagination</h4>
<pre class="highlight plaintext"><code>            SET @records := 20;
            PREPARE stmt FROM
            " SELECT    *
              FROM      Users
              LIMIT     ?, ?";
            -- {{ "{{pageNum" }}}} is the client side parameter representing the requested page number
            SET @offset := @records * ({{ "{{pageNum" }}}} -1 );
            EXECUTE stmt USING @offset,@records;
</code></pre>
<p>The LIMIT clause can be used to constrain the number of rows returned by the SELECT statement. LIMIT takes one or two numeric arguments (number of records and offset), which must both be nonnegative integer constants. We can compute the constants either on <a href="#custom-actions">JavaScript action</a> or by using a prepared statement:</p>

<h2 id="continuous-deployment-and-versioning">Continuous Deployment and Versioning</h2>

<p>A common use case is separate development and production environments, often with several stages in between (testing, qa, staging), which allows phased deployment (rollout) and rollback in case of problems.The goal of Continuous Deployment is to enable a constant flow of changes from development to production.</p>

<p>The following explains the flow of deploying server-side and databases changes from one environment to the other.</p>

<h3 id="deployment-steps">Deployment Steps</h3>

<ol>
<li>First, you need to sync model changes

<ol>
<li>Go to your dev app and copy the JSON model ( Objects =&gt; Model =&gt; Model JSON) to the clipboard</li>
<li>Go to your QA app and paste the JSON model in the Edit model pan.</li>
<li>Click &lsquo;Validate &amp; Update&rsquo;</li>
</ol></li>
</ol>

<p>Now the schemas are synced.</p>

<p>(If you get errors when applying the schema to the QA app, you&rsquo;ll need to fix them before you can upload the dev configuration)</p>

<ol>
<li>Loading the dev configuration into the QA environment

<ol>
<li>Go to Settings =&gt; Configuration</li>
<li>Click &lsquo;Export Current Settings&rsquo; button, which will download the app configuration zip file to your file system.</li>
<li>In the QA app go to Settings =&gt; Configuration and click the &lsquo;Import External Settings&rsquo; button to upload the configuration zip file you just downloaded from the dev app.</li>
<li>In Settings =&gt; General click the &lsquo;Clear Cache&rsquo; icon in the upper-right corner (swirly arrow refresh icon near the trashcan icon), and approve the popup message.</li>
</ol></li>
</ol>

<p>The QA app is now deployed with all the changes you made in the dev app.</p>

<p>Apply this process again when deploying QA to Production.</p>

<h3 id="versions">Versions</h3>

<p>On every change you make to your app, Backand saves a copy (version) of the app before the change.
You can use this feature to rollback, if needed.</p>

<p>To rollback to a previous version:</p>

<ol>
<li>Go to Settings =&gt; Configuration</li>
<li>Click the &lsquo;Set&rsquo; link which corresponds to the version you want to rollback to.</li>
</ol>

<p>To save a backup of a version just click the &lsquo;Export&rsquo; link, this will save a backup of the app configuration to your file system.</p>

<h2 id="internationalization">Internationalization</h2>

<p>Supporting multiple languages often requires supporting multi-byte character sets. In order to allow for wider international character sets, you will need to run the following MySQL command against your database:</p>

<p>For the following scripts you&rsquo;ll need your schema_name , you can find it here : https://www.backand.com/#/app/<YOUR_APP_NAME>/database</p>
<pre class="highlight sql tab-sql"><code><span class="k">ALTER</span> <span class="k">SCHEMA</span> <span class="nv">`&lt;YOUR_SCHEMA_NAME&gt;`</span>  <span class="k">DEFAULT</span> <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span><span class="p">;</span>
</code></pre>
<p>On the table where you want to use multi-languages run:</p>
<pre class="highlight sql tab-sql"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`&lt;YOUR_SCHEMA_NAME&gt;`</span><span class="p">.</span><span class="nv">`&lt;YOUR_TABLE_NAME&gt;`</span> <span class="k">CONVERT</span> <span class="k">TO</span> <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span><span class="p">;</span>
</code></pre>
<p>On each VARCHAR column on that table run:</p>
<pre class="highlight sql tab-sql"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="nv">`&lt;YOUR_SCHEMA_NAME&gt;`</span><span class="p">.</span><span class="nv">`&lt;YOUR_TABLE_NAME&gt;`</span> <span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="n">col</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
</code></pre>
<p>The Last step is to edit the connection details</p>

<ol>
<li>Go to Setting =&gt; Database</li>
<li>Click Get Password and save it to the clipboard</li>
<li>If you don&rsquo;t see the &ldquo;Edit Connection&rdquo; button then add &ldquo;/edit&rdquo; to the browser url</li>
<li>On the username text box  add ;CharSet=utf8;</li>
<li>Paste the password from the clipboard</li>
<li>Click Save</li>
</ol>

<h2 id="integrating-with-ionic-creator">Integrating with Ionic Creator</h2>

<p><a href="https://creator.ionic.io">Ionic Creator</a> is an online IDE for Ionic apps that can greatly speed the development of your cross-platform mobile and web application. However, like any IDE, it can pose problems when integrating with some external service providers like Backand. Below, well look at the steps needed to get your Ionic Creator app up and running with the Backand SDK, allowing you to implement serverless apps in the Ionic framework with ease.</p>

<h3 id="configuring-the-connection-to-backand">Configuring the connection to Backand</h3>

<p>To Enable Back with, youll need to update your Ionic Creator apps <strong>Other JS</strong> section to include a new file name - bkndconfig.js. In this file, replace the entire contents with the following code:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app.config'</span><span class="p">,</span> <span class="p">[])</span>
<span class="c1">// remember to add 'app.config' to your angular modules in Code Settings</span>

<span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">BackandProvider</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">setAppName</span><span class="p">(</span><span class="s1">'BACKAND_APP_NAME'</span><span class="p">);</span>
    <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">setSignUpToken</span><span class="p">(</span><span class="s1">'BACKAND_API_SIGNUP_TOKEN'</span><span class="p">);</span>
    <span class="nx">BackandProvider</span><span class="p">.</span><span class="nx">setAnonymousToken</span><span class="p">(</span><span class="s1">'BACKAND_ANONYMOUS_ACCESS_TOKEN'</span><span class="p">);</span>

<span class="p">})</span>
</code></pre>
<p>Once the code has been modified, replace the values above with the appropriate values from your Backand application:</p>

<ul>
<li><p><code class="prettyprint">BACKAND_APP_NAME</code> - This is your app&rsquo;s name in Backand</p></li>
<li><p><code class="prettyprint">BACKAND_API_SIGNUP_TOKEN</code> - This is your app&rsquo;s signup token. It is available in the <strong>Security &amp; Auth -&gt; Social &amp; Keys</strong> section.</p></li>
<li><p><code class="prettyprint">BACKAND_ANONYMOUS_ACCESS_TOKEN</code> - This is your app&rsquo;s anonymous access token. It is available in <strong>Security &amp; Auth -&gt; Configuration</strong>.</p></li>
</ul>

<p>Once these changes have been made, you&rsquo;ll need to update your application&rsquo;s code settings</p>

<h3 id="code-settings">Code Settings</h3>

<p>Next, we&rsquo;ll update the app&rsquo;s Code Settings to import the Backand SDK. In <strong>Code Settings</strong>, under the <strong>External JS</strong> tab, add these two script URLs:</p>
<pre class="highlight html tab-html"><code>https://cdn.backand.net/vanilla-sdk/1.1.0/backand.js
https://cdn.backand.net/angular1-sdk/1.9.6/backand.provider.js
</code></pre>
<p>Once you&rsquo;ve finished, the  External JS tab will have the following content:</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'https://cdn.backand.net/vanilla-sdk/1.1.0/backand.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'https://cdn.backand.net/angular1-sdk/1.9.6/backand.provider.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'js/directives.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'js/services.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'js/bkndconfig.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>Next, under <strong>Angular Modules</strong>, add <code class="prettyprint">backand</code> and <code class="prettyprint">app.config</code>. The end result will have the following content:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="p">[</span>
<span class="s1">'ionic'</span><span class="p">,</span>
<span class="s1">'app.controllers'</span><span class="p">,</span>
<span class="s1">'ionicUIRouter'</span><span class="p">,</span>
<span class="s1">'backand'</span><span class="p">,</span>
<span class="s1">'app.config'</span><span class="p">,</span>
<span class="s1">'app.services'</span><span class="p">,</span>
<span class="s1">'app.directives'</span>
<span class="p">])</span>
</code></pre>
<h3 id="working-with-the-backand-provider">Working with the Backand provider</h3>

<p>Now that the external code has been configured, you can start working with the Backand provider in your service class. For example, you can use the following code to pull rows from an <code class="prettyprint">items</code> object in a Backand application:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'ItemsModel'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Backand</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">objectName</span> <span class="o">=</span> <span class="s1">'items'</span><span class="p">;</span>

    <span class="nx">service</span><span class="p">.</span><span class="nx">all</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="nx">objectName</span><span class="p">);</span>
    <span class="p">};</span>

<span class="p">});</span>
</code></pre>
<p>Next, we&rsquo;ll add this function call into a page for display.</p>

<h3 id="updating-the-page-controller">Updating the Page Controller</h3>

<p>To access this data, we&rsquo;ll update the page controller to call our <code class="prettyprint">ItemsModel</code> and return the relevant rows. To do so, use the following JavaScript to define a <code class="prettyprint">getAll()</code> function and store the results in <code class="prettyprint">$scope</code>:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">$scope</span><span class="p">.</span><span class="nx">getAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ItemsModel</span><span class="p">.</span><span class="nx">all</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="p">});</span>
<span class="p">}</span>

<span class="nx">$scope</span><span class="p">.</span><span class="nx">getAll</span><span class="p">();</span>
</code></pre>
<p>Now, we&rsquo;ll need to update the page&rsquo;s design to display the new information. To show a list of all the items you&rsquo;ve obtained:</p>

<ul>
<li><p>Drag a <strong>List Item</strong> element onto your UI</p></li>
<li><p>In the page list pane (upper left hand corner), click on <strong>List</strong></p></li>
<li><p>On the right side of the pane, click on <strong>Angular Directives</strong> and add a new directive with the following details:</p>

<ul>
<li>Directive: ng-repeat</li>
<li>Value: object in data</li>
</ul></li>
<li><p>Finally, click on the <strong>list-item</strong> element and change the content to <code class="prettyprint">{{object.name}}</code></p></li>
</ul>

<p>And with that, your Ionic Creator app is now connected to Backand!</p>

<h3 id="learning-more">Learning more</h3>

<p>At this point, you have the full power of the <a href="#vanilla-sdk">Backand SDK</a> available in your Ionic Creator app. You can use the SDK to add more services to your app, providing CRUD functionality, real-time communications, server-side code execution, and more! Simply head over to <a href="http://docs.backand.com">our documentation</a> to get started.</p>

<h2 id="working-with-custom-actions">Working with Custom Actions</h2>

<p>Actions are a powerful tool that allow you to perform customized tasks when a number of different types of events occur within your application. They provide a great alternative to server-side custom code, and can add a lot of flexibility to how your application interacts with outside services. Below we&rsquo;re going to look at the types of actions that Backand offers application developers, and how they can easily be used.</p>

<h3 id="server-side-activity-in-a-front-end-app">Server-Side Activity in a Front-End App</h3>

<p>One of the challenges facing Angular developers focused on front-end development is what you need to do when you hit the limits of what the front-end has to offer. Many calls that you might like to make from your JavaScript might expose security issues, such as specific formats for requests to external vendors like PayPal, that leave you vulnerable to hackers who are looking for any way to hijack your application. The traditional solution to this has been to move the calls themselves server-side, which is a lot harder to gain access to than the JavaScript code running your website. However, having custom server actions requires building up the surrounding infrastructure to handle web requests, trigger the actions, handle the responses, and perform authentication  among a number of other actions you need to control for  all just to send a single server-side call.</p>

<p>With Backand&rsquo;s server-side actions, you completely sidestep the need for all of the setup, implementation, and deployment headaches you would have with a custom server-side framework like Rails or Django. It allows you to do things that would typically demand custom server code  such as authenticating with a third party vendor, or sending sensitive payment data  without having to build the server infrastructure. By providing simple hooks into Backand&rsquo;s API for your back end, you can quickly add new actions that can do anything from sending a simple email all the way up to running custom JavaScript that can perform any arbitrary action you like  all behind the server-side call to Backand!</p>

<h3 id="triggers">Triggers</h3>

<p>Actions are activated via triggers in your application. Generally speaking, there are two types of action triggers in Backand  database-related triggers, and &ldquo;On Demand&rdquo; triggers. Database triggers fire under certain conditions when your application interacts with your database. You can add custom triggers to each of the standard database actions that update the database  record creation (Create), record updating (Update), and record deletion (Delete). Furthermore, you can assign your actions to occur either before the action takes place (such as &ldquo;Before Update&rdquo;), while the action is taking place as part of the same transaction (such as &ldquo;During Create&rdquo;), or after the action has completed (such as &ldquo;After Deletion&rdquo;). Through clever use of these actions, you can create a very complex database experience with a deceptively simple front-end.
On Demand triggers, on the other hand, happen whenever you like. These are associated with a specific object, and are performed in the context of a row via a simple call to an associated URL. These actions operate within the context of the provided row, allowing you to perform any custom actions you need to on that specific object. This allows you to build out a true API, providing the hooks for many custom server actions that would often need a framework surrounding them.</p>

<h3 id="types-of-actions">Types of Actions</h3>

<p>Once you&rsquo;ve selected an appropriate trigger, you need to select a type of action to perform. Backand currently offers three types of actions  Send an Email, Execute Custom JavaScript, and Execute Custom SQL. Send an Email, as the name implies, simply sends an email whenever the trigger in question occurs. You can use the subject of the trigger as a local variable, inserting details into the message as you desire. Execute Custom JavaScript allows you to write a custom JavaScript function that will execute during the trigger, all within a server context. This allows you to perform sensitive communication without exposing vital details to potential attackers. Finally, Execute Custom SQL allows you to run a custom SQL script when the trigger is encountered, performing additional bookkeeping or updating related objects based upon the action performed.  With these three action types, you should be able to perform many highly complex interactions without needing to worry about maintaining a back-end server to manage them.</p>

<h3 id="summary">Summary</h3>

<p>One of the common concerns with outsourcing the back end of an application is &ldquo;What happens when I need something more from the server?&rdquo; With Backand&rsquo;s actions, you have the opportunity to perform a number of different types of actions at several highly-configurable trigger points, and all in the context of your application&rsquo;s server! This can allow you to implement sensitive web calls to third parties, maintain complex analytics back-ends, and protect your sensitive data from attackers  all with a few clicks in Backand&rsquo;s application dashboard. While actions are not ideal for all situations, they should suffice for the vast majority of server-side activity that web apps most commonly need.</p>

<h2 id="connecting-to-your-apps-database">Connecting to Your App&rsquo;s Database</h2>

<p>While the schema editor offered by Backand&rsquo;s app dashboard can be a powerful tool for managing your application&rsquo;s data schema, sometimes there are ideas that the schema editor can&rsquo;t express. For these situations, it&rsquo;s often best to revert to a SQL interface, either using command-line SQL or a dedicated database administration tool like MySQL Workbench. In this post, we&rsquo;ll look at how you can access your Backand application&rsquo;s database using any third-party MySQL compatible database tool you desire, and how you can sync the changes with your Backand application once you&rsquo;ve made your changes.</p>

<h3 id="connecting-to-your-database">Connecting to Your Database</h3>

<p>Backand hosts all application databases as schemas in Amazon RDS. The benefit of this approach is that it easily allows us to make your database available to any third-party tool you like. In the Backand App Dashboard, you can find your application&rsquo;s database server information in the <strong>Settings -&gt; Database</strong> panel. This contains the host URL, username, password, and schema name for your application. Simply input these connection values into your database administration tool of choice, and you are free to make changes to your database schema.</p>

<h3 id="synchronizing-changes">Synchronizing Changes</h3>

<p>Once you&rsquo;ve made the necessary changes in your schema, you&rsquo;ll need to synchronize the changes with your Backand application. This is accomplished in the Backand Application Dashboard as follows:</p>

<ul>
<li>Navigate to the <strong>Model</strong> panel, under <strong>Objects</strong></li>
<li>Select the <strong>Model Database</strong> tab</li>
<li>After reviewing the text, click on the <strong>Sync with Database</strong> button</li>
</ul>

<p>Once you&rsquo;ve pressed the Sync button, Backand will use reflection to determine your database&rsquo;s structure, and rebuild your app&rsquo;s REST API according to the changes it sees.</p>

<h3 id="moving-forward">Moving Forward</h3>

<p>With this approach, you can greatly increase your data model&rsquo;s flexibility.  By working with standard SQL queries, you can bypass the need for making complex changes to your application&rsquo;s data structure using only the provided editors. Anything that can be expressed in SQL is permitted, and Backand will automatically adapt to your database structure modifications.</p>

<h2 id="working-with-encrypted-passwords">Working with Encrypted passwords</h2>

<p>One common case encountered when storing passwords is in how to manage password encryption - particularly for working with third parties. In this section, we&rsquo;ll explore encrypting a user&rsquo;s password, and comparing encrypted passwords with their plaintext equivalents to check for authorization.</p>

<h3 id="encrypting-passwords">Encrypting Passwords</h3>

<p>To work with encrypted passwords in Backand, follow these steps:</p>

<ol>
<li>Create a <code class="prettyprint">password</code> field in your <code class="prettyprint">users</code> object, of type <code class="prettyprint">text</code></li>
<li>Modify or create a &ldquo;before create&rdquo; action for the <code class="prettyprint">users</code> object, and set the type to Custom Server-Side JavaScript.</li>
<li>Add <code class="prettyprint">userInput.password = security.hash(userInput.password);</code> to encrypt the password</li>
</ol>

<p>With that, your encrypted password is now stored along with your <code class="prettyprint">users</code> object.</p>

<h3 id="comparing-encrypted-passwords">Comparing Encrypted passwords</h3>

<p>Once you&rsquo;ve encrypted your password, you&rsquo;ll want to use it for password validation. To do so, you can use the <code class="prettyprint">security.compare</code> function: <code class="prettyprint">return security,compare(password, hashedPassword);</code>.</p>

<p>This method returns <code class="prettyprint">true</code> if the provided password is valid. It utilizes one-way encryption, so that it is not possible to decrypt the password hash</p>

<h2 id="using-uuid-primary-keys">Using UUID Primary Keys</h2>

<p>While integer IDs can provide a quick and easy way to get up and running with a primary key, they face a number of different challenges when it comes to both scaling and security:</p>

<ul>
<li>They&rsquo;re limited in scope, meaning you&rsquo;re only given the maximum range of the integer object as unique IDs</li>
<li>They&rsquo;re easy to understand, meaning they&rsquo;re also easy to hack (in other words, &ldquo;What happens if I change this ID of 77 to 78?&rdquo;)</li>
<li>In general, they&rsquo;re hard to make thread-safe. This is an issue when a data source is operating at internet scale, or when working with multiple concurrent databases.</li>
</ul>

<p>Universally-Unique IDentifiers, or UUIDs, solve many of these problems. They obfuscate the ID so that it is not brute-force guessable, they have an extremely wide range of potential values, and the <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions">risk of collisions in UUIDs</a> is miniscule. In this section, we&rsquo;ll look at configuring a Backand object to use a UUID as its primary key.</p>

<h3 id="setting-up-the-database">Setting up the Database</h3>

<p>To create a UUID primary key column, you&rsquo;ll need to operate within your database directly. Download a tool to connect to your database (like <a href="https://www.mysql.com/products/workbench/">MySQL Workbench</a>), and configure it with the connection settings from <a href="#connecting-to-your-apps-database">your application&rsquo;s dashboard</a>. Once you&rsquo;ve connected your database, you&rsquo;ll next want to create a new field in the object you are changing, using the datatype <code class="prettyprint">char(36)</code>. Once this is done, sync the changes back to your application using the Object -&gt; Model -&gt; Model Database tab in the app dashboard.</p>

<h3 id="setting-up-the-before-create-action">Setting up the Before Create action</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
  $http - Service for AJAX calls
  CONSTS - CONSTS.apiUrl for Backands API URL
  Config - Global Configuration
  socket - Send realtime database communication
  files - file handler, performs upload and delete of files
  request - the current http request
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// write your code here</span>
  <span class="nx">userInput</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">xy</span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">16</span><span class="o">|</span><span class="mi">0</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">==</span> <span class="s1">'x'</span> <span class="p">?</span> <span class="nx">r</span> <span class="p">:</span> <span class="p">(</span><span class="nx">r</span><span class="o">&amp;</span><span class="mh">0x3</span><span class="o">|</span><span class="mh">0x8</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>
</code></pre>
<p>We&rsquo;ll override the default integer-based behavior in a Custom Server-Side JavaScript action that we will create expressly for this purpose. The code to the right uses <code class="prettyprint">Math.random()</code> to generate a UUID Version 4-compliant value. This value is then stored in userInput.id, which in turn populates the column in the database.</p>

<aside class="warning">It is important to note that this value is not truly random, and should not be used in situations where security is paramount - in those cases, we recommend you either implement your own algorithm or integrate with a third party library that can do so on your behalf.</aside>

<h2 id="integrating-third-party-security">Integrating Third-Party Security</h2>

<p>While Backand provides a set of robust and dependable authentication and user management tools, sometimes you need a deeper integration with a provider that is not directly supported via integration with the Backand platform. In this post, we&rsquo;ll look at three mechanisms you can use to implement robust user security integrations with arbitrary third-party platforms. By using the <code class="prettyprint">backandAuthOverride</code>, <code class="prettyprint">sociaAuthOverride</code>, and <code class="prettyprint">accessFilter</code> security actions, you&rsquo;ll be able to achieve all of your user security goals.</p>

<h3 id="a-quick-review-of-user-security">A Quick Review of User Security</h3>

<p>There are two questions that need to be resolved in any conversation - user authentication, in which we determine whether or not the user is who they claim to be, and user authorization, in which we determine whether or not the authenticated user has access to the resources they are requesting. Backand uses OAuth2 to manage user authentication for plain username/password logins, and social media providers to manage user authentication when configured. To manage authorization, Backand provides a flexible and powerful set of security templates and security roles, which can be used to control the access a user has to any given field in a Backand application.</p>

<h3 id="overriding-backand-authentication">Overriding Backand Authentication</h3>

<p>While we offer a number of ways to integrate with third-party security providers, some applications need to work within systems that we either do not offer integrations with, or whose integrations are not feature-rich enough to support all of the needed functionality. To work around this, we provide the <code class="prettyprint">backandAuthOverride</code> security action. By modifying this action, you can use it to authenticate the user with any third party authentication platform you desire. You&rsquo;re given the user&rsquo;s email address and password, and can respond with one of three statuses:</p>

<ul>
<li><strong>allow</strong> - Allow the user access to your application</li>
<li><strong>deny</strong> - Deny the user access to your application</li>
<li><strong>ignore</strong> - Ignore this override, and use Backand User Authentication (default)</li>
</ul>

<p>If this method returns &ldquo;ignore&rdquo;, the standard Backand user authentication is used. Otherwise, the results of this function are adopted by Backand. If you wish, you can use the provided <code class="prettyprint">additionalTokenInfo</code> object to pass back supplementary information for the authentication result, such as system user ID, system role, authentication lifetime, and so on - these will be available with the return value from the <code class="prettyprint">signin</code> method, or via the SDK method <code class="prettyprint">getUserDetails</code>.</p>

<h3 id="overriding-social-media-authentication">Overriding Social Media Authentication</h3>

<p>While you can use <code class="prettyprint">backandAuthOverride</code> to integrate with most third-party authentication providers, if you&rsquo;re working with our social media authentication you&rsquo;ll need to use a different function - <code class="prettyprint">socialAuthOverride</code>. This function, similar to <code class="prettyprint">backandAuthOverride</code>, overrides the social media authentication experience, returning one of the following three values:</p>

<ul>
<li><strong>allow</strong> - Allow the user access to your application</li>
<li><strong>deny</strong> - Deny the user access to your application</li>
<li><strong>ignore</strong> - Ignore this override, and use Backand Social Media Authentication (default)</li>
</ul>

<p>Once again, if this method returns <code class="prettyprint">ignore</code>, the default built-in social media authentication provided by Backand is used. Otherwise, the return value of this function - either <code class="prettyprint">allow</code> or <code class="prettyprint">deny</code> - coupled with the contents of <code class="prettyprint">additionalTokenInfo</code> are returned to the caller, and the user is either authenticated or prevented access appropriately. You can use this pattern to, for example, obtain a user&rsquo;s Facebook profile picture upon completion of authentication, and pass the results back to the application for display or manipulation.</p>

<h3 id="overriding-authorization">Overriding Authorization</h3>

<p>Once you&rsquo;ve authenticated the user, you&rsquo;ll need to determine whether they are authorized to access the specified resource. While our security roles and templates can cover a lot of functionality, they are by nature restricted to a single app. If you organization&rsquo;s security policy restricts app access to users with a specific flag in your authentication mechanism, you&rsquo;ll want to override basic Backand authorization to instead leverage your external solution. To do this, you can use the <code class="prettyprint">accessFilter</code> method to dynamically approve or deny any users that authenticate with your system using an Oauth2 token.</p>

<p>This method works like any other custom JavaScript action, allowing you to easily contact third party services for additional user information. Once you&rsquo;ve used this feature to determine whether or not a user is authorized, you simply return <code class="prettyprint">allow</code> or <code class="prettyprint">deny</code> to permit or restrict access appropriately. You can also provide an additional message explaining the denial, or providing additional information on the approval.</p>

<h3 id="conclusion">Conclusion</h3>

<p>The security landscape for internet apps is wide and varied. While we&rsquo;d love to be able to support every possible method of authentication available to developers, after a while it is far more beneficial and flexible to provide the developer with tools to manage their own authentication integrations. Using our provided override functions - <code class="prettyprint">backandAuthOverride</code>, <code class="prettyprint">socialAuthOverride</code>, and <code class="prettyprint">accessFilter</code> - you can integrate with any authentication or authorization provider that can communicate over the web.</p>

          <h1 id="integrations">Integrations</h1>

<p>The following set of documentation looks at integrating Backand with a number of different types of providers. Also included are some simple Backand-powered applications that can be used either as a starting point for your development, or as a guide for integrating Backand into a larger application.</p>

<h2 id="todo-app-with-users">ToDo App with users</h2>

<p>Recently, we released a tutorial on the <a href="https://github.com/backand/angular-yeoman-todos/tree/todo-with-users">Backand GitHub page</a> that shows off a lot of the features available by default in a Backand-powered application. After completing the tutorial, you&rsquo;ll have a simple ToDo list application with full support for user and role-based security. Below we&rsquo;ll discuss each of the features demonstrated in the tutorial, and cover any items remaining that are necessary for a full deployment.</p>

<h3 id="restful-api-out-of-the-box">RESTful API Out-of-the-Box</h3>

<p>One of the first things we do in the tutorial, after actually creating the application with Backand, is create a new database using our JSON-based schema language. This powerful tool allows you to quickly build a database and the associated tables and objects without having a client installed. More importantly, once the database has been created, Backand automatically creates a RESTful API based on your underlying database schema. This allows you to have immediate access to your database via a series of REST API calls that create, retrieve, update, and delete records at whim. With some simple JavaScript, you can quickly build out a data layer that would take months in a stand-alone project! Furthermore, the moment you make a change to your schema, Backand will detect the change and update the API endpoints accordingly. This automated updating greatly eases the process of migrating database schema changes, and takes some of the load of server programming off your shoulders, allowing you to focus on your application&rsquo;s functionality.</p>

<h3 id="security-roles">Security Roles</h3>

<p>While the RESTful API is indeed a powerful tool, the main goal of this tutorial is to explore user- and role-based security. Through Backand&rsquo;s dashboard you are granted a powerful array of tools that you can leverage to secure your underlying application. You can assign user-specific security settings for each object in your app, including everything from table update calls to custom triggers and actions.</p>

<p>However, doing this for every user that signs up for your application would be incredibly tedious. Luckily, Backand provides User Roles that you can assign to the users in your application. Roles set a basic template for interacting with your application&rsquo;s API, allowing you to restrict all users with that role to only specific actions in your application. These roles can also be overridden at an endpoint level, allowing you to grant roles specific access to resources while still maintaining their general security profile.</p>

<p>After the tutorial has been completed, you will have three roles for your users  administrators who have full control, users who can view all records in the application (but only update or delete those that they create themselves), and read-only users that are only able to view the ToDo items in your application.</p>

<h3 id="login-and-anonymous-access">Login and Anonymous Access</h3>

<p>In addition to security roles, this tutorial will introduce you to the user access functionality available in Backand. You&rsquo;ll implement a mechanism for inviting users to register for your application, and enable two-step verification for your application&rsquo;s users, and all of the complexity will be managed by Backand! Furthermore, you&rsquo;ll learn how to enable anonymous access to your application through a few simple administrative dashboard settings. After the tutorial has been completed, you will have a fully secure application that allows you to invite users to the system, automatically assign them a security role, and even enable anonymous access to your ToDo list should you wish to do so.</p>

<h3 id="remaining-items">Remaining Items</h3>

<p>While the tutorial will walk you through the entire application  from inception to completion  there will still be a few tasks remaining before you can show off your new Backand-powered ToDo list app. The first section of the tutorial focuses on setting up a local application development environment, which allows you to develop and run the code on your local machine. However, once you&rsquo;ve implemented the code and are ready to show it off, you still need to track down a web server to use for deployment. Luckily this web server does not need to be particularly robust, as your application requires zero server-side customization  simply deploy the application code to a publicly-accessible folder and you are set!</p>

<p>Once you&rsquo;ve published your application on a web server, you have a few more steps remaining in order to fully deploy the application. As a part of the tutorial you set several internal sign-up and authentication URLs that point at your local development instance. Obviously these will no longer function once you have deployed the code! Simply change the appropriate user security settings in your application&rsquo;s Backand dashboard, and your application will be ready to show the world!</p>

<h3 id="summary">Summary</h3>

<p>This tutorial gives you a quick look at the power offered by Backand&rsquo;s back end tools and APIs. You&rsquo;ll explore creating a database and implementing a RESTful API for that data with zero effort. You&rsquo;ll customize your application&rsquo;s security and learn how to restrict users based on role and based on endpoint. You&rsquo;ll even spend some time working with custom server-side actions that execute on-demand. By the time you have finished the tutorial, you will have implemented a secure ToDo list application with user authentication  and all with minimal effort!</p>

<h2 id="ionic-with-backand">Ionic With Backand</h2>

<p>Today many AngularJS developers are using Ionic to build the user interface for their mobile apps.  AngularJS provides the app structure.  But these mobile apps still need a backend.  In this blog well give you the recipe you need to build an Ionic mobile app with Backands Backend as a Service (BaaS). Review the working demo <a href="https://github.com/backand/simple-rest-ionic">here</a>.</p>

<h3 id="what-is-ionic">What is Ionic?</h3>

<p>The <a href="http://ionicframework.com/">Ionic</a> framework is a mobile programming framework for constructing hybrid mobile apps. Hybrid mobile apps use a web technology (HTML, JS, CSS) to build cross-platform mobile apps (iOS, Android).  Ionic is built on top of the <a href="https://cordova.apache.org/">Cordova</a> hybrid app technology.</p>

<p>The major advantage of using Ionic over Cordova itself or its commercial version <a href="http://phonegap.com/">PhoneGap</a> is that it provides a plethora of mobile user interface templates both for the entire structure of the app (side menu, tabs) and for common parts (navigation top bar).</p>

<p>Ionic is built using the well known <a href="https://angularjs.org/">AngularJS</a> web MVC framework.  Hence, developing Ionic apps is done at a higher level of abstraction than using plain HTML and jQuery. To facilitate working with the mobile device APIs in the AngularJS way, Ionic developed <a href="http://ngcordova.com/">ngCordova</a>, a set of AngularJS components for interacting with the various mobile device capabilities (like taking pictures).  Ionic also provides a set of convenient command line tools for building and running apps.</p>

<h3 id="the-perfect-recipe-for-building-mobile-apps">The Perfect Recipe for Building Mobile Apps</h3>

<p>In this scenario well provide you with the recipe you need to use the Ionic template for a mobile app with a side menu.</p>

<h4 id="backand">Backand</h4>

<p>Create an app in Backand using the free database feature. For this example we will demonstrate simple playlists app
 with 3 objects: users, playlists and songs.
You can use the following JSON mode:</p>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"is_approved"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"list"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"playlists"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"via"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"playlists"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"songs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"songs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"via"</span><span class="p">:</span><span class="w"> </span><span class="s2">"playlist"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"songs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"order_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"datetime"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"playlist"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"playlists"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h4 id="ionic">Ionic</h4>

<p>Now create your mobile app, naming it PlaylistsApp, with the Ionic command-line tools.</p>

<h4 id="js-libraries">JS Libraries</h4>

<p>Your Ionic app has a <code class="prettyprint">www</code> folder which is a single page application (SPA) built with AngularJS.  You will need to include the Backand libraries in your application. Either download them or use bower to obtain them. Then, copy them into your <code class="prettyprint">index.html</code>.</p>

<ul>
<li><a href="https://github.com/backand/angular1-sdk">angular1-sdk</a>, install with bower using:</li>
</ul>
<pre class="highlight shell"><code>    bower install angular1-sdk
</code></pre>
<ul>
<li>Include in your <code class="prettyprint">index.html</code>:</li>
</ul>
<pre class="highlight html tab-html"><code>     <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib/angularbknd-sdk/dist/backand.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
     <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib/angular-cookies/angular-cookies.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<h4 id="authorization">Authorization</h4>

<p>Backand uses authorization headers in HTTP requests. The token for authorization is obtained upon sign in to Backand and is then stored using cookies via <code class="prettyprint">ngCookies</code>. The Backand SDK adds authorization headers to each HTTP request using an <code class="prettyprint">$http</code> interceptor.</p>

<p>In your main JavaScript file, <code class="prettyprint">app.js</code> requires <code class="prettyprint">backand</code>:</p>
<pre class="highlight javascript tab-javascript"><code>     <span class="kd">var</span> <span class="nx">myApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'starter'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ionic'</span><span class="p">,</span>
       <span class="s1">'starter.controllers'</span><span class="p">,</span> <span class="s1">'backand'</span><span class="p">,</span> <span class="s1">'starter.services'</span><span class="p">]);</span>
</code></pre>
<p>And in your app&rsquo;s <code class="prettyprint">config</code> add:</p>
<pre class="highlight javascript tab-javascript"><code>     <span class="nx">myApp</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$stateProvider</span><span class="p">,</span> <span class="nx">$urlRouterProvider</span><span class="p">,</span>
       <span class="nx">$httpProvider</span><span class="p">)</span>    <span class="p">{</span>
        <span class="nx">$httpProvider</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">httpInterceptor</span><span class="p">);</span>
     <span class="p">});</span>
</code></pre>
<p>Defining the interceptor as:
<code class="prettyprint">javascript
     function httpInterceptor($q, $log, $cookieStore) {
       return {
         request: function(config) {
           config.headers[&#39;Authorization&#39;] =
             $cookieStore.get(&#39;backand_token&#39;);
           return config;
         }
       };
     }
</code></p>

<h4 id="sign-in">Sign In</h4>

<p>In your controllers module require <code class="prettyprint">Backand</code> and <code class="prettyprint">ngCookies</code>:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'starter.controllers'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'backand'</span><span class="p">,</span> <span class="s1">'ngCookies'</span><span class="p">]);</span>
</code></pre>
<p>In your login controller require <code class="prettyprint">Backand</code>:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'loginCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">Backand</span><span class="p">)</span> <span class="p">{});</span>
</code></pre>
<p>To perform the login call, remember that <code class="prettyprint">playlists</code> is our Backand database name:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="kd">var</span> <span class="nx">appName</span> <span class="o">=</span> <span class="s1">'playlists'</span><span class="p">;</span>
    <span class="nx">Backand</span><span class="p">.</span><span class="nx">signin</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">appName</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){});</span>
</code></pre>
<h4 id="crud">CRUD</h4>

<p>Now you will need to define a service to make the database operations.  In your services module require <code class="prettyprint">backand</code>:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="kd">var</span> <span class="nx">myServices</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'starter.services'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'backand'</span><span class="p">])</span>
</code></pre>
<p>Define a <code class="prettyprint">DatabaseService</code>, require <code class="prettyprint">Backand</code>:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'DatabaseService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">Backand</span><span class="p">){</span>    

      <span class="kd">var</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">'/1/object/data/'</span><span class="p">;</span>

      <span class="k">return</span> <span class="p">{</span>

        <span class="c1">// read all rows in the object</span>
          <span class="na">readAll</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objectName</span><span class="p">)</span> <span class="p">{</span>  
            <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
              <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
              <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="nx">objectName</span>
           <span class="p">}).</span><span class="nx">then</span><span class="p">(</span>
          <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
            <span class="p">});</span>
          <span class="p">},</span>

        <span class="c1">// read one row with given id</span>
          <span class="na">readOne</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objectName</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
            <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
            <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="nx">self</span><span class="p">.</span><span class="nx">objectName</span>
                <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">id</span>
          <span class="p">}).</span><span class="nx">then</span><span class="p">(</span>
            <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
            <span class="p">});</span>
          <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">});</span>
</code></pre>
<h4 id="using-backand-data">Using Backand Data</h4>

<p>In your controller, require <code class="prettyprint">DatabaseService</code>, and make calls like:</p>
<pre class="highlight javascript tab-javascript"><code>    <span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'playlistsCtrl'</span><span class="p">,</span>    
      <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">DatabaseService</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">$scope</span><span class="p">.</span><span class="nx">playlists</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="c1">// read all playlists for a user</span>
      <span class="nx">DatabaseService</span><span class="p">.</span><span class="nx">readAll</span><span class="p">(</span><span class="s1">'playlists'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">playlists</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="p">});</span>

      <span class="c1">// a click handler for selecting a playlist</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">clickPlaylist</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
                <span class="nx">DatabaseService</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="s1">'playlists'</span><span class="p">,</span> <span class="nx">id</span><span class="p">).</span>
           <span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){});</span>
      <span class="p">});</span>

    <span class="p">});</span>
</code></pre>
<p>Now you can add more Tables and build more views by repeating the above steps. You can also add server side code or send emails in the Backand cloud service under the Action tab.</p>

<p>To review in Github: <a href="https://github.com/backand/simple-rest-ionic">ionic demo</a>.</p>

<h2 id="retrieving-data-from-facebook-using-the-graph-api">Retrieving data from Facebook using the Graph API</h2>

<p>Once you&rsquo;ve integrated with Facebook, you can use Facebook&rsquo;s <a href="https://developers.facebook.com/docs/graph-api">Graph API</a> to augment your user data with information directly from the user&rsquo;s Facebook account. To do so, you&rsquo;ll just need to grab the user&rsquo;s Facebook User ID, and use the Graph API to retrieve data, update or publish new content, or any of the other functionality Facebook has to offer.</p>

<h3 id="obtaining-the-facebook-user-id">Obtaining the Facebook User ID</h3>

<p>To store the user&rsquo;s Facebook user ID (FUID) in Backand, follow these steps:</p>

<ol>
<li>Open Security &amp; Auth &gt;&gt; Security actions menu and edit the <strong>&ldquo;beforeSocialSignup&rdquo;</strong> action</li>
<li>Change the <strong>Where Condition</strong> of this action to &ldquo;true&rdquo; (this is set at the bottom of the content pane)</li>
<li>Uncomment the provided code that saves the Facebook user id: <code class="prettyprint">userInput.fuid = parameters.socialProfile.additionalValues.id;</code></li>
<li>Save the Action</li>
</ol>

<p>Next, you need to add the FUID field to the &ldquo;users&rdquo; object:</p>

<ol>
<li>Open the model page, from the <strong>Objects</strong> menu</li>
<li>Edit the model to add a new field - <strong>fuid</strong>, type string - to the &ldquo;users&rdquo; object</li>
<li>Click <strong>Validate &amp; Update</strong> to validate the model, then <strong>Ok</strong> in the confirmation dialog to save your changes.</li>
</ol>

<p>From this point onward, any user that signs up to your app using Facebook as their social media provider will have their FUID automatically populated in the <strong>users</strong> object.</p>

<h3 id="getting-facebook-data-into-backand-code">Getting Facebook data into Backand code</h3>
<pre class="highlight javascript tab-javascript--persistent"><code>    <span class="kd">var</span> <span class="nx">fuid</span> <span class="o">=</span> <span class="s2">"176102422846507"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">facebookAccessToken</span> <span class="o">=</span> <span class="s2">"EAAWouLyM4lEBADjVlK9yslq9YNjx7S5UUx9oKUo6BWxsj9qc77ZCuKZAPvBQUIulpieNJIJ0Uit3K0UFR0oxjxl68DupTb0uoJFXPQFUdTOlneLEprG6b8WxuYN3AX6m05hKpFbBPKczCab1OUetevdvkZCO6rtPUQEUtc68gZDZD"</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span><span class="s2">"https://graph.facebook.com/v2.8/"</span> <span class="o">+</span> <span class="nx">fuid</span> <span class="o">+</span> <span class="s2">"/friends?fields=id,name,gender"</span><span class="p">,</span>
        <span class="na">params</span><span class="p">:{</span>
            <span class="s2">"access_token"</span><span class="p">:</span> <span class="nx">facebookAccessToken</span>
        <span class="p">},</span>
        <span class="na">headers</span><span class="p">:{</span><span class="s2">"Content-Type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
</code></pre>
<p>Once you have the Facebook user ID, you can use the Graph API to access any available Facebook data.</p>

<ul>
<li>See the Facebook Graph API docs at <a href="https://developers.facebook.com/docs/graph-api">https://developers.facebook.com/docs/graph-api</a></li>
<li>You&rsquo;ll also need a valid Facebook Access Token for your application. Use <a href="https://developers.facebook.com/tools/accesstoken/">Facebook&rsquo;s access token tool</a> to obtain one.</li>
<li>Facebook offers <a href="https://developers.facebook.com/tools-and-support/">additional tools</a></li>
</ul>

<p>At this point, you&rsquo;re ready to work with the API. For example, you can use this sample code to get a list of a user&rsquo;s friends in Facebook:</p>

<h3 id="getting-a-facebook-profile-image">Getting a Facebook profile image</h3>
<pre class="highlight html tab-html"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>http://graph.facebook.com/{fuid}/picture<span class="nt">&lt;/a&gt;</span>
</code></pre>
<p>You can easily obtain a user&rsquo;s Facebook profile using a single URL reference. The template is available on the right - simply replace <strong>{fuid}</strong> with the user&rsquo;s Facebook User ID.</p>
<pre class="highlight html tab-html"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://graph.facebook.com/{fuid}/picture?type=large"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>http://graph.facebook
.com/{fuid}/picture?type=large<span class="nt">&lt;/a&gt;</span>
</code></pre>
<p>You can pull in a larger version of the profile picture using the HTML to the right:</p>

<p>Finally, you can refer to <a href="https://developers.facebook.com/docs/graph-api/reference/user/picture/">Facebook&rsquo;s Docs</a> on their Graph API, and use the information to create whatever type of integration with Facebook that you desire.</p>

<h2 id="amazon-aws-and-s3-integrations">Amazon AWS and S3 Integrations</h2>

<p>Amazon Web Services, or AWS, offer a lot of useful functionality for web developers. From hosting, to distributed computing, to even simple data storage, Amazon has backed many of the web&rsquo;s largest websites since its inception. Below we&rsquo;ll look at Amazon S3, and how we can integrate the data storage service into a Backand-powered application.</p>

<h3 id="a-quick-s3-overview">A Quick S3 Overview</h3>

<p>Amazon&rsquo;s Simple Storage Service, or S3, is an online file storage web service offered as a part of the Amazon Web Services suite of functionality. It was first launched in the US in 2006, and uses standard web service interfaces for communication. Service consumers can simply authorize their app with S3, then perform a series of web service calls to manage their S3 storage bucket. By using this service, a developer can offload concerns about data availability, reliability, and storage space to Amazon&rsquo;s server farms, simply paying a usage-based fee each month for the data stored.</p>

<h3 id="server-side-action">Server-side Action</h3>

<p><a href="https://github.com/backand/simple-noterious-app">Backand&rsquo;s Noterious app</a> has an excellent example of how simple an integration with S3 can be. The functionality revolves around the creation of server-side actions to wrap the web service requests made over HTTP. The actual integration looks like this:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span>
    <span class="p">{</span>
        <span class="c1">// enter your aws key</span>
        <span class="s2">"key"</span> <span class="p">:</span> <span class="s2">"AKIAIJX26SY3COIWV4FQ"</span><span class="p">,</span>

        <span class="c1">// enter your aws secret key</span>
        <span class="s2">"secret"</span> <span class="p">:</span> <span class="s2">"ogun3pSOyw8FtP5i17s2STBPO9jQ8cs+lnpxwg82"</span><span class="p">,</span>

        <span class="c1">// this should be sent in post body</span>
        <span class="s2">"filename"</span> <span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">filename</span><span class="p">,</span>
        <span class="s2">"filedata"</span> <span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">filedata</span><span class="p">,</span>         

        <span class="s2">"region"</span> <span class="p">:</span> <span class="s2">"US Standard"</span><span class="p">,</span>
        <span class="s2">"bucket"</span> <span class="p">:</span> <span class="s2">"backand-free-upload"</span>

    <span class="p">}</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span><span class="na">method</span><span class="p">:</span><span class="s2">"PUT"</span><span class="p">,</span><span class="na">url</span><span class="p">:</span><span class="nx">CONSTS</span><span class="p">.</span><span class="nx">apiUrl</span> <span class="o">+</span> <span class="s2">"/1/file/s3"</span> <span class="p">,</span>
               <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span> <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">token</span><span class="p">}});</span>

<span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
</code></pre>
<p>The above code is inserted into a new Custom Server-Side JavaScript Action created using the Backand dashboard. It pulls the file information from the parameters passed to the action, then sends a request to S3&rsquo;s file upload endpoint, putting the file into the bucket <code class="prettyprint">backand-free-upload</code>. By customizing the above code, you can achieve any underlying file structure you desire.</p>

<h3 id="client-side-integration">Client-side Integration</h3>

<p>Of course the server-side code is only half of the story  we need to integrate this wrapped API call into our application for it to be useful. Going back to the Noterious demo application, you can see an example of this taking place in the <a href="https://github.com/backand/simple-noterious-app/blob/6da40ba8b235c35d77f1845a643e80a352d1dc20/src/app/common/models/notes-model.js#L44">Notes model class</a>:</p>
<pre class="highlight javascript tab-javascript"><code><span class="c1">//Send file content in base64 to Backand on-demand action</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">s3FileUpload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">filedata</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/notes?name=upload2s3'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'application/json'</span>
    <span class="p">},</span>
    <span class="na">data</span><span class="p">:</span>
    <span class="p">{</span>
      <span class="s2">"filename"</span><span class="p">:</span><span class="nx">filename</span><span class="p">,</span>
      <span class="s2">"filedata"</span><span class="p">:</span> <span class="nx">filedata</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">filedata</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">','</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">filedata</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="c1">//need to remove the file prefix type</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span>
</code></pre>
<p>The above code is pretty straightforward. It defines a function  <code class="prettyprint">s3FileUpload</code>  that takes input from your application in the form of file data, and then communicates with your new custom JavaScript action via an HTTP POST request using JavaScript&rsquo;s built-in AJAX capabilities. Simply call this function from your Angular code, and you will be uploading files in no time!</p>

<h2 id="stripe-integration">Stripe Integration</h2>

<p>Once you&rsquo;ve decided how you want to monetize your web app, you&rsquo;ll likely begin looking at ways to integrate your code with a vendor that will accept and process payments on your behalf. While this would be a daunting effort to perform in a custom-built environment, Backand&rsquo;s built-in security and stability help to ease many of the requirements that are imposed upon payment applications. Below we&rsquo;ll look at using a third-party vendor  <a href="http://www.stripe.com/">Stripe</a>  to process payments, and examine how to integrate Stripe with a Backand application.</p>

<p>A quick note: In our <a href="https://github.com/backand/stripe-example">Stripe Example Application</a>, we used <a href="https://github.com/bendrucker/angular-stripe">angular-stripe</a>  a popular third-party tool that allows you to easily interface with Stripe from your Angular code  to make calls to Stripe&rsquo;s Stripe.js file, which provides most of the payment tokenization functionality. This is obviously a convenience, and you are free to call Stripe.js directly from your application, but the below text assumes you are also using this library. It is also important to note that the code below  particularly the client side code  was adapted from the Stripe example application, and as such may not be directly usable without some modification. Please study the code to understand the content, rather than simply trying to cut-and-paste the client-side components.</p>

<h3 id="why-use-a-vendor">Why use a vendor?</h3>

<p>The first question that you are likely asking is &ldquo;Why should I use a third-party vendor for my payment system?&rdquo; The short answer, albeit not a very good one, is that a solid and reliable payments platform is not only extremely challenging, but extremely expensive as well. Setting aside the data concerns (which we have covered elsewhere), you&rsquo;ll need significant liquid assets available to even begin working with financial systems directly. Furthermore, you&rsquo;ll be accepting full fraud risk for your users  if any of your users tries to use your payments system for illegal or unethical ends, then you will be liable for the damages caused. These are just a few of the many concerns that would come with building a payment system from the ground up without using a payment vendor.</p>

<p>With a payment vendor, on the other hand, you are able to offload all of the above issues to the vendor, allowing you to focus instead on integrating payments into your application. Stripe performs underwriting (which handles any potentially fraudulent individuals by simply preventing them from accepting payments), payment processing, communication with financial systems, and all necessary reporting as the transactions move through the various banks and financial APIs. While it would be possible to perform all of this work yourself, you&rsquo;ll save yourself years of labor by simply leveraging someone else&rsquo;s efforts.</p>

<h3 id="server-side-action">Server-side Action</h3>

<p>We&rsquo;ll begin the application by adding a custom server-side action. This action will execute JavaScript that accepts a payment token as an argument, and then uses that token to register a payment with Stripe. Simply use the following code in your server-side action to log your payment:</p>
<pre class="highlight javascript tab-javascript"><code>  <span class="c1">// Secret key - copy from your Stripe account   </span>
  <span class="c1">// - https://dashboard.stripe.com/account/apikeys -</span>
  <span class="c1">// or use Backand's test account</span>
  <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">btoa</span><span class="p">(</span><span class="s2">"sk_test_hx4i19p4CJVwJzdf7AajsbBr:"</span><span class="p">);</span>

  <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
    <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"https://api.stripe.com/v1/charges"</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"amount"</span><span class="p">:</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">amount</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span><span class="s2">"usd"</span><span class="p">,</span>
        <span class="s2">"source"</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">token</span>
    <span class="p">},</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Basic "</span> <span class="o">+</span> <span class="nx">user</span><span class="p">,</span>
        <span class="s2">"Accept"</span> <span class="p">:</span> <span class="s2">"application/json"</span><span class="p">,</span>
        <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/x-www-form-urlencoded"</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="k">return</span> <span class="p">{</span><span class="s2">"data"</span><span class="p">:</span><span class="nx">response</span><span class="p">};</span>
</code></pre>
<p>The above code simply takes all of the information needed for a payment  specifically the amount (in pennies) and the payment method token  and sends them to Stripe via a POST request to their <a href="https://stripe.com/docs/api">RESTful API</a>. You can create as many of these actions as you like, wrapping additional Stripe API calls at will.</p>

<h3 id="client-side-integration">Client-side Integration</h3>

<p>Once you&rsquo;ve got the server-side action, you are just about ready to start accepting payments. There are two steps that need to take place on the client side before you can do so. First, we&rsquo;ll look at setting the API Key.</p>

<p>The API Key tells the Stripe.js file that the actions being taken are to take place under your Stripe account. On the server side, this is the Secret Key that you obtain from the Stripe dashboard. The client side needs something more secure, though, as anyone with your secret key could impersonate your app and cause security issues. Recognizing this, Stripe provides you with a public key that you can use for client-side code. This is secured against a secret key on your Stripe account, and cannot be used to actually register payments or perform transfers. To set your public key, use the following code:</p>
<pre class="highlight javascript tab-javascript"><code>  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">stripeProvider</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Enter your Stripe publish key or use Backand test account</span>
    <span class="nx">stripeProvider</span><span class="p">.</span><span class="nx">setPublishableKey</span><span class="p">(</span><span class="s1">'pk_test_pRcGwomWSz2kP8GI0SxLH6ay'</span><span class="p">);</span>
  <span class="p">})</span>
</code></pre>
<p>Once you&rsquo;ve set your publishable key, you&rsquo;re ready to start tokenizing payment methods. The code below performs two tasks. It first creates a token from the payment data entered into your app&rsquo;s UI, then it sends that token to the custom action that we created in the previous section by calling a convenience method. We&rsquo;ll first add the tokenization and payment success code:</p>
<pre class="highlight javascript tab-javascript"><code>  <span class="nx">self</span><span class="p">.</span><span class="nx">charge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

    <span class="c1">//get the form's data</span>
    <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#payment-form'</span><span class="p">))[</span><span class="mi">0</span><span class="p">];</span>

    <span class="c1">//Use angular-stripe service to get the token</span>
    <span class="k">return</span> <span class="nx">stripe</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">createToken</span><span class="p">(</span><span class="nx">form</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'token created for card ending in '</span><span class="p">,</span> <span class="nx">token</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">last4</span><span class="p">);</span>

        <span class="c1">//Call Backand action to make the payment</span>
        <span class="k">return</span> <span class="nx">BackandService</span><span class="p">.</span><span class="nx">makePayment</span><span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">amount</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">token</span><span class="p">.</span><span class="nx">id</span> <span class="p">)</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="s1">'successfully submitted payment for $'</span> <span class="o">+</span> <span class="nx">payment</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">amount</span><span class="o">/</span><span class="mf">100.0</span><span class="p">;</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="sr">/^Stripe/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="s1">'Stripe error: '</span> <span class="o">+</span>  <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="s1">'Other error occurred, possibly with your API'</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
<p>Once this code has been created, we need to write one additional function. This function wraps a HTTP request to the custom action we created previously. It assumes that the action&rsquo;s name is <code class="prettyprint">makePayment</code>, so be sure to change it to something that matches your actual implementation:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">factory</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">amount</span><span class="p">,</span> <span class="nx">token</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/items?name=makePayment'</span><span class="p">,</span>
      <span class="na">params</span><span class="p">:{</span>
        <span class="na">parameters</span><span class="p">:{</span>
          <span class="na">token</span><span class="p">:</span> <span class="nx">token</span><span class="p">,</span>
          <span class="na">amount</span><span class="p">:</span> <span class="nx">amount</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
<p>And with that, we&rsquo;ve added the basic code necessary to contact Stripe and record a payment.</p>

<h3 id="conclusion">Conclusion</h3>

<p>The above code gives us the basis of a payments system. It can accept payments from a user, which are recorded against your own Stripe account. You can use this as a basis for a larger application, that provides a deeper integration with Stripe&rsquo;s API. Simply follow the pattern of wrapping the API calls in server-side actions, then calling those actions via the Backand API, and you&rsquo;ll have a solution built very rapidly that is both secure and scalable from day one.</p>

<h2 id="mandrill">Mandrill</h2>

<p>Mandrill is an email infrastructure service that focuses on transactional emails. Using Mandrill, you can send personalized e-commerce messages on a one-to-one basis, or automated transactional messages for things like password resets, order confirmations, and welcome messages.</p>

<h3 id="send-email-with-mandrill-api-no-attachment">Send Email with Mandrill API (No Attachment)</h3>

<p>Mandrill has an API that you can use to send emails, along with a lot of other functionality. By translating their provided cURL commands to Angular $http calls, you can easily integrate Mandrill with Backand.</p>

<blockquote>
<p>Server side action code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
  $http - Service for AJAX calls
  CONSTS - CONSTS.apiUrl for Backands API URL
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// write your code here</span>
    <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="s1">'https://mandrillapp.com/api/1.0/messages/send.json'</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="s1">'key'</span><span class="p">:</span><span class="o">&lt;</span><span class="nx">enter</span> <span class="nx">your</span> <span class="nx">mandrill</span> <span class="nx">key</span><span class="o">&gt;</span><span class="p">,</span>
            <span class="s1">'message'</span><span class="p">:{</span><span class="s1">'html'</span><span class="p">:</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
            <span class="s1">'subject'</span><span class="p">:</span><span class="s1">'Example for Mandrill Integration'</span><span class="p">,</span>
            <span class="s1">'from_email'</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="s1">'from_name'</span><span class="p">:</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="s1">'to'</span><span class="p">:[{</span><span class="s1">'email'</span><span class="p">:</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="s1">'name'</span><span class="p">:</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="s1">'type'</span><span class="p">:</span><span class="s1">'to'</span><span class="p">}],</span>
            <span class="s1">'headers'</span><span class="p">:{</span><span class="s1">'Reply-To'</span><span class="p">:</span><span class="s1">'message.reply@backand.com'</span><span class="p">}}}</span>
    <span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>
</code></pre>
<p>To send an email with Mandrill, you need to create a server side action. You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code. The following example demonstrates the on-demand option. In the Backand dashboard, open the Actions tab for one of your application&rsquo;s objects, and create a new on-demand server-side JavaScript action. Learn more about how to create actions <a href="#custom-actions">here</a>. Name the action <code class="prettyprint">mandrillapp</code>, add <code class="prettyprint">message</code> and <code class="prettyprint">name</code> to the Input Parameters, and paste the code on the right into the code editor.</p>

<p>In the example app we&rsquo;re building, the app&rsquo;s users can send messages to themselves. This is done through the use of <code class="prettyprint">userProfile.username</code>, which is the email address used to register with the application. Make sure to replace the <code class="prettyprint">key</code> property above with your Mandrill API key.</p>

<blockquote>
<p>Client-side code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;/1'</span><span class="p">,</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'mandrillapp'</span><span class="p">,</span>
    <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="s1">'Anything you can put your mind on'</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'&lt;your name here&gt;'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p>Next, add the JavaScript code to the right to your app&rsquo;s client-side code base. Replace <code class="prettyprint">&lt;your object name&gt;</code> with the object associated with the action you created. Once this is done, you&rsquo;ll be able to easily trigger emails via Mandrill using Backand&rsquo;s custom action API.</p>

<h3 id="send-email-with-mandrill-api-with-attachments">Send Email with Mandrill API (with Attachments)</h3>

<p>Below, well create a server-side Node JS action that imports the Mandrill SDK, allowing you to easily send email with attachments through Mandrill in your Backand application.</p>

<h3 id="getting-started-in-backand">Getting Started in Backand</h3>

<p>To get started with a Mandrill action, youll need to first create a new Server-Side NodeJS action in Backand. To do so, open up your apps dashboard at <a href="https://www.backand.com">https://www.backand.com</a>, and navigate to an object that will host the action. On the Actions tab of this object, create a new &lsquo;On Demand&rsquo; action. Name this action, then select &lsquo;Server-Side Node.JS Action&rsquo; as the actions type. Follow the documentation provided to download the Backand CLI and initialize your action locally.</p>

<h3 id="initializing-the-mandrill-action">Initializing the Mandrill Action</h3>

<p>Once you have the Server-Side Node.js action ready to go, the next step is to create an action in Mandrill. Navigate to <a href="http://www.mandrill.com/">http://www.mandrill.com/</a> and create a new action in the MailChimp dashboard provided when you log in. Once the action is ready, copy down the Mandrill API Key value and save it somewhere safe. This API key will be used by the Node.js action to connect and communicate with Mandrill.</p>

<h3 id="updating-the-code">Updating the Code</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="kd">var</span> <span class="nx">mandrill</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'node-mandrill'</span><span class="p">)(</span><span class="nx">MANDRILL_API_KEY</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">).</span><span class="nx">defaults</span><span class="p">({</span> <span class="na">encoding</span><span class="p">:</span> <span class="kc">null</span> <span class="p">});</span>
</code></pre>
<p>Next, well need to update the actions code to communicate with Mandrill. Well start by  configuring the mandrill SDK requirements in <code class="prettyprint">index.js</code>. Add these lines into <code class="prettyprint">index.js</code> in your Node.js action folder structure, before the function <code class="prettyprint">exports.backandCallback</code>:</p>

<aside class="notice">Be sure to replace MANDRILL_API_KEY with the value copied down from the Mandrill dashboard.</aside>
<pre class="highlight javascript tab-javascript--persistent"><code>    <span class="kd">var</span> <span class="nx">filePath</span> <span class="o">=</span> <span class="s1">'PATH_TO_ATTACHMENT_INCLUDING_FILENAME'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">fileName</span> <span class="o">=</span> <span class="s1">'FILENAME_OF_ATTACHMENT'</span><span class="p">;</span>

    <span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">sendEmail</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">'content-type'</span><span class="p">],</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="kd">function</span> <span class="nx">sendEmail</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="nx">fileType</span><span class="p">,</span> <span class="nx">fileContent</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">mandrill</span><span class="p">(</span><span class="s1">'/messages/send'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">message</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">to</span><span class="p">:</span> <span class="p">[{</span><span class="na">email</span><span class="p">:</span> <span class="s1">'RECIPIENT_EMAIL'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'RECIPIENT_DISPLAY_NAME'</span><span class="p">}],</span>
          <span class="na">from_email</span><span class="p">:</span> <span class="s1">'SENDER'</span><span class="p">,</span>
          <span class="na">subject</span><span class="p">:</span> <span class="s1">'EMAIL_SUBJECT'</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="s1">'MESSAGE_BODY'</span><span class="p">,</span>
          <span class="na">attachments</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s1">'type'</span><span class="p">:</span> <span class="nx">fileType</span><span class="p">,</span>
            <span class="s1">'name'</span><span class="p">:</span> <span class="nx">fileName</span><span class="p">,</span>
            <span class="s1">'content'</span><span class="p">:</span> <span class="nx">fileContent</span>
          <span class="p">}]</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//uh oh, there was an error</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">//console.log(JSON.stringify(error));</span>
          <span class="nx">response</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//everything's good, lets see what mandrill said</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
          <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
        <span class="p">}</span>


      <span class="p">});</span>
    <span class="p">}</span>
</code></pre>
<p>Next, well modify the <code class="prettyprint">backandCallback</code> function to send a message with Mandrill. Replace the contents of this function with the code on the right. This code does two things:</p>

<ol>
<li>The initial code fetches the attachment data from the server on which it is stored. If this code succeeds, it calls <code class="prettyprint">sendEmail</code> with the file data provided as a Base 64 string.</li>
<li><code class="prettyprint">sendEmail</code> then takes this data and contacts Mandrill to send the message.</li>
</ol>

<h3 id="configuring-the-code">Configuring the Code</h3>

<p>To tie the project together and finalize the above code, simply replace each of the placeholders with the appropriate value:</p>

<ul>
<li><code class="prettyprint">PATH_TO_ATTACHMENT_INCLUDING_FILENAME</code> - this is the URL to the attachment you wish to send. If fetching this fails, sending the message will not succeed.</li>
<li><code class="prettyprint">FILENAME_OF_ATTACHMENT</code> - this is the file name that will be given to the attachment.</li>
<li><code class="prettyprint">RECIPIENT_EMAIL</code> - This is the email for the messages intended recipient.</li>
<li><code class="prettyprint">RECIPIENT_DISPLAY_NAME</code> - This is the recipients display name.</li>
<li><code class="prettyprint">SENDER</code> - This is the email from which the message was sent.</li>
<li><code class="prettyprint">EMAIL_SUBJECT</code> - This is the subject of the email.</li>
<li><code class="prettyprint">MESSAGE_BODY</code> - This is the content of the email.</li>
</ul>

<p>You can also use the parameters argument to the action to send additional message data, whether that data originates in your apps database or via the API call. Once these changes are made, your server-side action is ready to deploy!</p>

<h3 id="testing-and-deployment">Testing and Deployment</h3>

<p>You can debug and run the action locally using the provided <code class="prettyprint">debug.js</code> file. Simply enter node <code class="prettyprint">debug.js</code> on the command line to debug. Once youve finished your local testing, you can then deploy the action via the documentation provided in the Server-Side Actions UI in your apps dashboard at Backand.com - head to the Actions tab for the relevant object, and follow the instructions on using <code class="prettyprint">backand action deploy</code> to deploy your code.</p>

<h3 id="calling-the-action">Calling the Action</h3>

<p>To call the action in your client-side code, simply use the Backand SDKs action functionality as you would any other on-demand action:</p>
<pre class="highlight javascript tab-javascript"><code>  <span class="k">return</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'OBJECT_NAME'</span><span class="p">,</span> <span class="s1">'ACTION_NAME'</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">'parameters'</span><span class="p">:</span> <span class="p">{}</span>
  <span class="p">})</span>
</code></pre>
<p>Simply replace <code class="prettyprint">OBJECT_NAME</code> with the name of the object controlling your action, and <code class="prettyprint">ACTION_NAME</code> with the Server-Side Node.js Actions name in Backand. You can provide any extra information or detail using the provided <code class="prettyprint">parameters</code> object - this will be passed into the parameters argument of your action.</p>

<h2 id="mailgun">Mailgun</h2>

<p>Mailgun is an email automation service provided by Rackspace. It offers a complete cloud-based email service for sending, receiving, and tracking email messages sent by your registered websites and applications.</p>

<h3 id="send-email-with-mailgun-api">Send Email with Mailgun API</h3>

<blockquote>
<p>Server-side Action</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
  $http - service for AJAX calls - $http({method:"GET",url:CONSTS.apiUrl + "/1/objects/yourObject" , headers: {"Authorization":userProfile.token}});
  CONSTS - CONSTS.apiUrl for Backand's API URL
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// write your code here</span>

    <span class="kd">var</span> <span class="nx">apiBaseUrl</span> <span class="o">=</span> <span class="s2">"https://api.mailgun.net/v3/sandbox&lt;your mailgun sandbox key here&gt;.mailgun.org/messages"</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">apiKey</span> <span class="o">=</span> <span class="s2">"api:&lt;your mailgun key here&gt;"</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">encodedAuth</span> <span class="o">=</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">apiKey</span><span class="p">);</span>
    <span class="c1">//console.log(encodedAuth);</span>

        <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">,</span>
            <span class="na">url</span><span class="p">:</span> <span class="nx">apiBaseUrl</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Basic "</span> <span class="o">+</span> <span class="nx">encodedAuth</span><span class="p">,</span>
                <span class="s2">"Content-Type"</span> <span class="p">:</span> <span class="s2">"multipart/form-data; charset=utf-8"</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">from</span><span class="p">:</span> <span class="nx">userProfile</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
                <span class="na">to</span><span class="p">:</span> <span class="nx">userProfile</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
                <span class="na">subject</span><span class="p">:</span> <span class="s1">'testing mailgun with backand'</span><span class="p">,</span>
                <span class="na">text</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">message</span>
            <span class="p">}</span>

        <span class="p">}</span>
    <span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>
</code></pre>
<p>Mailgun provides an API that can be used to easily send email, among many other features. By translating Mailgun&rsquo;s provided cURL examples to JavaScript $http calls, you can easily integrate Mailgun with Backand.</p>

<p>To send an email with Mailgun, you need to create a server side action.You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code. The following example demonstrates the on-demand option. In the Backand dashboard, open the Actions tab for one of your application&rsquo;s objects, and create a new on-demand server-side JavaScript action. Learn more how to create actions <a href="#custom-actions">here</a>. Name the action <code class="prettyprint">mailgun</code>, add <code class="prettyprint">message</code> and <code class="prettyprint">name</code> to the Input Parameters, and paste the code on the right in the code editor. In this example the app user can send any message that he wants to himself. Please replace the &ldquo;apiKey&rdquo; property, as well as the sandbox URL, with your associated mailgun values.</p>

<blockquote>
<p>Client-side code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;/1'</span><span class="p">,</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'mailgun'</span><span class="p">,</span>
    <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="s1">'Anything you can put your mind on'</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'&lt;your name here&gt;'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

</code></pre>
<p>Next, add the client-side JavaScript code to your app&rsquo;s code base. Replace <code class="prettyprint">&lt;your object name&gt;</code> with the object associated with the action you created, and you are ready to send messages via Mailgun!</p>

<h2 id="sendgrid">SendGrid</h2>

<p>SendGrid is a cloud-based SMTP provider that allows you to send email without having to maintain email servers. SendGrid manages all of the technical details, from scaling the infrastructure to ISP outreach and reputation monitoring to whitelist services and real time analytics.</p>

<h3 id="who-is-sendgrid-for">Who is SendGrid for?</h3>

<p>SendGrid is for anyone that needs to send email, whether its transactional email or marketing emails and campaigns. We send billions of emails each month, so we can handle your email regardless of volume.</p>

<h3 id="send-email-with-sendgrid-api">Send Email with SendGrid API</h3>

<blockquote>
<p>Server-Side Code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
  $http - Service for AJAX calls
  CONSTS - CONSTS.apiUrl for Backands API URL
  Config - Global Configuration
  socket - Send realtime database communication
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span><span class="s2">"https://api.sendgrid.com/api/mail.send.json"</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span>
            <span class="s2">"from="</span> <span class="o">+</span><span class="nx">userProfile</span><span class="p">.</span><span class="nx">username</span><span class="o">+</span>
            <span class="s2">"&amp;to="</span> <span class="o">+</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">to</span> <span class="o">+</span>
            <span class="s2">"&amp;subject=hellow"</span><span class="o">+</span>
            <span class="s2">"&amp;html="</span> <span class="o">+</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>

         <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"Accept:application/json"</span><span class="p">,</span>
                <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/x-www-form-urlencoded"</span><span class="p">,</span>
                <span class="s2">"Authorization"</span><span class="p">:</span><span class="s2">"Bearer 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"</span>

         <span class="p">}</span>
     <span class="p">});</span>
     <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>SendGrid has an API that you can use to send emails, along with a lot of other functionality. By translating their provided cURL commands to Angular $http calls, you can easily integrate SendGrid with Backand.</p>

<p>To send an email with SendGrid, you need to create a server side action. You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code. The following example demonstrates the on-demand option. In the Backand dashboard, open the Actions tab for one of your application&rsquo;s objects, and create a new on-demand server-side JavaScript action. Learn more how to create actions <a href="#custom-actions">here</a>. Name the action <code class="prettyprint">SendGrid</code>, add <code class="prettyprint">to</code> and <code class="prettyprint">message</code> to the Input Parameters (like that: to, message ), and paste the server-side code into the code editor.</p>

<p>In the example app we&rsquo;re building, the app&rsquo;s users can send messages to an email sent by the client side in the &lsquo;to&rsquo; parameter.  Make sure to replace the &lsquo;Authorization&rsquo; header above with your SendGrid API key (after you register with SendGrid you should waite for your account to be provisioned and than you&rsquo;ll see the API KEY under Settings/ API Keys).</p>

<blockquote>
<p>Client-Side code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;'</span><span class="p">,</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'SendGrid'</span><span class="p">,</span>
    <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="s1">'Anything you can put your mind on'</span><span class="p">,</span>
      <span class="na">to</span><span class="p">:</span> <span class="s1">'&lt;your destination email&gt;'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

</code></pre>
<p>Next, add the client-side JavaScript code to your app&rsquo;s code base. Replace <code class="prettyprint">&lt;your object name&gt;</code> with the object associated with the action you created and <code class="prettyprint">&lt;your destination email&gt;</code> with the target recipient.</p>

<p>Once this is done, you&rsquo;ll be able to easily trigger emails via SendGrid using Backand&rsquo;s custom action API.</p>

<h2 id="paypal">PayPal</h2>

<p>Once you&rsquo;ve decided how you want to monetize your web app, you&rsquo;ll likely begin looking at ways to integrate your code with a vendor that will accept and process payments on your behalf. While this would be a daunting effort to perform in a custom-built environment, Backand&rsquo;s built-in security and stability help to ease many of the requirements that are imposed upon payment applications. Below we&rsquo;ll look at using a third-party vendor  <a href="http://www.paypal.com/">PayPal</a>  to process payments, and examine how to integrate PayPal with a Backand application.</p>

<p>A quick note: The below text was adapted from the <a href="https://developer.paypal.com/docs/integration/direct/make-your-first-call/#make-an-api-call">PayPal developer docs</a>, and as such may not be directly usable without some modification. Please study the code to understand the content, rather than simply trying to cut-and-paste the client-side components.</p>

<p>PayPal provides many options for accepting payments, including Express Checkout, transactions, refunds, payment with agreementId, and so on. In this example, we will implement Express Chackout as it is the simplest and most straightforward method to enable.</p>

<h3 id="why-use-a-vendor">Why use a vendor?</h3>

<p>The first question that you are likely asking is &ldquo;Why should I use a third-party vendor for my payment system?&rdquo; The short answer, albeit not a very good one, is that a solid and reliable payments platform is not only extremely challenging, but extremely expensive as well. Setting aside the data concerns (which we have covered elsewhere), you&rsquo;ll need significant liquid assets available to even begin working with financial systems directly. Furthermore, you&rsquo;ll be accepting full fraud risk for your users  if any of your users tries to use your payments system for illegal or unethical ends, then you will be liable for the damages caused. These are just a few of the many concerns that would come with building a payment system from the ground up without using a payment vendor.</p>

<p>With a payment vendor, on the other hand, you are able to offload all of the above issues to the vendor, allowing you to focus instead on integrating payments into your application. PayPal performs underwriting (which handles any potentially fraudulent individuals by simply preventing them from accepting payments), payment processing, communication with financial systems, and all necessary reporting as the transactions move through the various banks and financial APIs. While it would be possible to perform all of this work yourself, you&rsquo;ll save yourself years of labor by simply leveraging someone else&rsquo;s efforts.</p>

<h3 id="server-side-action">Server-side Action</h3>

<blockquote>
<p>Server-side Action Code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code>
   <span class="kd">var</span> <span class="nx">paypalUrl</span> <span class="o">=</span> <span class="s1">'https://api.sandbox.paypal.com/'</span><span class="p">;</span>

   <span class="c1">// PayPal has a 2 stage process where: // the first stage prepares the payment and a returns a url for the user to pay</span>
   <span class="c1">// and the sconde stage (where the payment is actually done) is where the application send an approval API call to PayPal</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">process</span> <span class="o">==</span> <span class="s1">'payment'</span><span class="p">)</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">payment</span> <span class="o">=</span> <span class="nx">postPayment</span><span class="p">();</span>
     <span class="k">return</span> <span class="nx">payment</span><span class="p">.</span><span class="nx">links</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">href</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">process</span> <span class="o">==</span> <span class="s1">'approval'</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="nx">postApproval</span><span class="p">();</span>
   <span class="p">}</span>

   <span class="kd">function</span> <span class="nx">postPayment</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">authorization</span> <span class="o">=</span> <span class="s2">"Bearer "</span> <span class="o">+</span> <span class="nx">getAccessToken</span><span class="p">().</span><span class="nx">access_token</span><span class="p">;</span>
     <span class="kd">var</span> <span class="nx">payment</span> <span class="o">=</span> <span class="p">{</span>
       <span class="s2">"intent"</span><span class="p">:</span> <span class="s2">"sale"</span><span class="p">,</span>
       <span class="s2">"redirect_urls"</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">"return_url"</span><span class="p">:</span> <span class="s2">"http://localhost:3000/#/paypal"</span><span class="p">,</span>
         <span class="s2">"cancel_url"</span><span class="p">:</span> <span class="s2">"http://localhost:3000/#/paypal?fail=true"</span>
       <span class="p">},</span>
       <span class="s2">"payer"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"payment_method"</span><span class="p">:</span> <span class="s2">"paypal"</span><span class="p">},</span>
       <span class="s2">"transactions"</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
           <span class="s2">"amount"</span><span class="p">:</span> <span class="p">{</span>
             <span class="s2">"total"</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">amount</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span>
           <span class="p">}</span>
         <span class="p">}</span>
       <span class="p">]</span>
     <span class="p">};</span>
     <span class="k">try</span> <span class="p">{</span>
       <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
         <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
         <span class="na">url</span><span class="p">:</span> <span class="nx">paypalUrl</span> <span class="o">+</span> <span class="s1">'v1/payments/payment'</span><span class="p">,</span>
         <span class="na">data</span><span class="p">:</span> <span class="nx">payment</span><span class="p">,</span>
         <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">,</span>
           <span class="s2">"Accept-Language"</span><span class="p">:</span> <span class="s2">"en_US"</span><span class="p">,</span>
           <span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">authorization</span>

         <span class="p">}</span>
       <span class="p">});</span>
     <span class="p">}</span>
     <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">cookie</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">'paypal_token'</span><span class="p">);</span>
         <span class="k">return</span> <span class="nx">postPayment</span><span class="p">();</span>
       <span class="p">}</span>
       <span class="k">else</span> <span class="p">{</span>
         <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">}</span>

   <span class="kd">function</span> <span class="nx">postApproval</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">authorization</span> <span class="o">=</span> <span class="s2">"Bearer "</span> <span class="o">+</span> <span class="nx">getAccessToken</span><span class="p">().</span><span class="nx">access_token</span><span class="p">;</span>
     <span class="kd">var</span> <span class="nx">payer</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"payer_id"</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">payerId</span><span class="p">};</span>
     <span class="k">try</span> <span class="p">{</span>
       <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
         <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
         <span class="na">url</span><span class="p">:</span> <span class="nx">paypalUrl</span> <span class="o">+</span> <span class="s1">'v1/payments/payment/'</span> <span class="o">+</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">paymentId</span> <span class="o">+</span> <span class="s1">'/execute/'</span><span class="p">,</span>
         <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payer</span><span class="p">),</span>
         <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">,</span> <span class="s2">"Accept-Language"</span><span class="p">:</span> <span class="s2">"en_US"</span><span class="p">,</span> <span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">authorization</span><span class="p">}</span>
       <span class="p">});</span>
     <span class="p">}</span>
     <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">cookie</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">'paypal_token'</span><span class="p">);</span>
         <span class="k">return</span> <span class="nx">postApproval</span><span class="p">();</span>
       <span class="p">}</span>
       <span class="k">else</span> <span class="p">{</span>
         <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">}</span>

   <span class="kd">function</span> <span class="nx">getAccessToken</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">cookie</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'paypal_token'</span><span class="p">);</span>
     <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
       <span class="kd">var</span> <span class="nx">ClientId</span> <span class="o">=</span> <span class="s1">'YOUR_PayPal_CLIENT_ID'</span><span class="p">;</span>
       <span class="kd">var</span> <span class="nx">Secret</span> <span class="o">=</span> <span class="s1">'YOUR_PayPal_SECRET_KEY'</span><span class="p">;</span>
       <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">ClientId</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">Secret</span><span class="p">);</span>

       <span class="k">try</span> <span class="p">{</span>
         <span class="nx">token</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">(</span>
           <span class="p">{</span>
             <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
             <span class="na">url</span><span class="p">:</span> <span class="nx">paypalUrl</span> <span class="o">+</span> <span class="s1">'v1/oauth2/token'</span><span class="p">,</span>
             <span class="na">data</span><span class="p">:</span> <span class="s1">'grant_type=client_credentials'</span><span class="p">,</span>
             <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">"Accept-Language"</span><span class="p">:</span> <span class="s2">"en_US"</span><span class="p">,</span>
               <span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Basic "</span> <span class="o">+</span> <span class="nx">user</span>
             <span class="p">}</span>

           <span class="p">});</span>
       <span class="p">}</span>
       <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Unauthorized (401), check client id and secret"</span><span class="p">);</span>
           <span class="nx">e</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
           <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">else</span> <span class="p">{</span>
           <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
         <span class="p">}</span>
       <span class="p">}</span>
       <span class="nx">cookie</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">'paypal_token'</span><span class="p">,</span> <span class="nx">token</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="k">return</span> <span class="nx">token</span><span class="p">;</span>
   <span class="p">}</span>

</code></pre>
<p>We&rsquo;ll begin the application by adding a custom server-side action. This action will execute JavaScript that implements a 2 stage process. It performs the payment API call, and then the Approval API call. Each step uses an access token obtained from PayPal&rsquo;s OAuth2/token call. To save a call to the OAuth endpoint for an extra token, we&rsquo;ll cache the OAuth token in a server side cookie (although if the cookie expires, you&rsquo;ll need to refresh the token from the OAuth2/token endpoint. See the try-catch block). The first stage prepares the payment and returns a url for redirecting the user to PayPal site. The second stage occurs after the user has acknowledged the payment and been brought back to your application, at which point you call the Approval API to complete the payment. The code example  is a server-side action that implements all of the functionality necessary to register an Express Checkout payment with PayPal.</p>

<aside class="notice">Please note: Don&rsquo;t forget to change the PayPal credentials in the code below. These credentials represent your association with PayPal, and must be correct in order for your customer&rsquo;s funds to be correctly routed. To obtain these credentials, you can <a href="https://developer.paypal.com/developer/accounts/">create a PayPal sandbox account</a>. Note that you will first need to register for PayPal if you have not already done so.</aside>

<p>The code takes the payment stage information in <code class="prettyprint">parameters.process</code>, and executes the appropriate PayPal API call. In the first stage, when directing the user to PayPal to confirm the payment, <code class="prettyprint">parameters.process</code> will contain &ldquo;Payment&rdquo;. This results in the function <code class="prettyprint">postPayment</code> being called, which sends a <code class="prettyprint">POST</code> command to PayPal with the payment information, along with a URL to redirect to when the user either accepts or cancels the payment. In the second payment stage, when contacting the Approval API to complete the payment, <code class="prettyprint">parameters.process</code> will contain &ldquo;Approval&rdquo;. This will result in the code calling <code class="prettyprint">postApproval</code>, which issues a <code class="prettyprint">POST</code> call to PayPal using the <code class="prettyprint">PayerID</code> and <code class="prettyprint">PaymentID</code> stored in the query string of the return URL. This function will return a PayPal payment object including all of the relevant payment details and the payment status.</p>

<h3 id="client-side-integration">Client-side Integration</h3>

<blockquote>
<p>Client-side prepare payment code.</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">charge</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

          <span class="c1">//get the form's data</span>
          <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#paypal-form'</span><span class="p">))[</span><span class="mi">0</span><span class="p">];</span>

          <span class="c1">//Call Backand action to prepare the payment</span>
          <span class="kd">var</span> <span class="nx">paypalUrl</span> <span class="o">=</span> <span class="nx">BackandService</span><span class="p">.</span><span class="nx">makePayPalPayment</span><span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">amount</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">paypalResponse</span> <span class="o">=</span> <span class="nx">payment</span><span class="p">;</span>
              <span class="c1">//redirect to PayPal - for user approval of the payment</span>
              <span class="nx">$window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">paypalResponse</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="s1">'PayPal error: '</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="s1">'Other error occurred, possibly with your API'</span> <span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">}</span>
</code></pre>
<p>Once you&rsquo;ve got the server-side action, you are just about ready to start accepting payments. The code to the right performs two tasks. It first calls a service to prepare the payment (the Payment API in PayPal), which returns a URL to which the user is redirected.</p>

<blockquote>
<p>Client-side finalize payment code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code>      <span class="c1">//check if this is a redirect from PayPal , after the user approves the payment</span>
      <span class="c1">// PayPal adds PayerID and  paymentId to the return url we give them</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">$location</span><span class="p">.</span><span class="nx">search</span><span class="p">().</span><span class="nx">PayerID</span> <span class="o">&amp;&amp;</span> <span class="nx">$location</span><span class="p">.</span><span class="nx">search</span><span class="p">().</span><span class="nx">paymentId</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">//Call Backand action to approve the payment by the facilitator</span>
        <span class="nx">BackandService</span><span class="p">.</span><span class="nx">makePayPalApproval</span><span class="p">(</span><span class="nx">$location</span><span class="p">.</span><span class="nx">search</span><span class="p">().</span><span class="nx">PayerID</span><span class="p">,</span> <span class="nx">$location</span><span class="p">.</span><span class="nx">search</span><span class="p">().</span><span class="nx">paymentId</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// remove PayPal query string from url</span>
            <span class="nx">$location</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="s1">'successfully submitted payment for $'</span> <span class="o">+</span> <span class="nx">payment</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">transactions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">amount</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">}</span>
</code></pre>
<p>Once the user has accepted or canceled the payment, PayPal redirects them back to the URL that was provided to the server-side action. In this example, we use the same page by checking the query string parameter <code class="prettyprint">paymentid</code>. This allows the code to detect which stage of the payment process we are at.</p>

<blockquote>
<p>Client-side code to contact custom actions for paypal</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code>  <span class="c1">//Call PayPalPayment on demand action</span>
  <span class="nx">factory</span><span class="p">.</span><span class="nx">makePayPalPayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">amount</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/items/1'</span><span class="p">,</span>
        <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'PayPalPayment'</span><span class="p">,</span>
          <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">amount</span><span class="p">:</span> <span class="nx">amount</span><span class="p">,</span>
            <span class="na">process</span><span class="p">:</span><span class="s2">"payment"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">};</span>

    <span class="c1">//Call PayPalApproval on demand action</span>
    <span class="nx">factory</span><span class="p">.</span><span class="nx">makePayPalApproval</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">payerId</span><span class="p">,</span> <span class="nx">paymentId</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/items/1'</span><span class="p">,</span>
        <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">name</span><span class="p">:</span> <span class="s1">'PayPalPayment'</span><span class="p">,</span>
          <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">payerId</span><span class="p">:</span> <span class="nx">payerId</span><span class="p">,</span>
            <span class="na">paymentId</span><span class="p">:</span> <span class="nx">paymentId</span><span class="p">,</span>
            <span class="na">process</span><span class="p">:</span><span class="s2">"approval"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">};</span>
</code></pre>
<p>Once this code has been added to your project, we need to implement the service that calls Backand&rsquo;s server side payment action. This service wraps a HTTP request to the on-demand custom action that we created earlier in the tutorial. It assumes the action name is <code class="prettyprint">PayPalPayment</code>, so be sure to change it as appropriate to match your actual implementation. With that, we&rsquo;ve added the basic code necessary to contact PayPal and record a payment.</p>

<h3 id="conclusion">Conclusion</h3>

<p>The above code gives us the basis of a payments system. It can accept payments from a user, which are recorded against your own PayPal account. You can use this as a starting point for a larger application that provides a deeper integration with PayPal&rsquo;s API. Simply follow the pattern of wrapping the API calls in server-side actions, then calling those actions via the Backand API, and you&rsquo;ll have a solution built very rapidly that is both secure and scalable from day one.</p>

<h2 id="segment-io">Segment.io</h2>

<p>There are a large number of web analytics tools available that can help your marketing team understand both how many users are using your product, and what they are doing while they use it. Implementing these services in your Backand application is as simple as any other third-party API integration. Segment.io allows you to implement an analytics API and send it to almost any notification tool available, depending on your infrastructure needs. Normally this type of integration would be done on the client side, but there are some instances where a server-side integration is useful. In this example, we will look at implementing a Segment.io integration with your Backand application using a custom server-side action.</p>

<h3 id="server-side-action">Server-side Action</h3>

<blockquote>
<p>Server-Side Action Code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
 $http - Service for AJAX calls
 CONSTS - CONSTS.apiUrl for Backands API URL
 */</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// write your code here</span>

  <span class="kd">var</span> <span class="nx">writeKey</span> <span class="o">=</span> <span class="s1">'YOUR_SEGMENT_IO_WRITE_KEY'</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">authorization</span> <span class="o">=</span> <span class="s1">'Basic '</span> <span class="o">+</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">writeKey</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">segmentUrl</span> <span class="o">=</span> <span class="s1">'https://api.segment.io/v1/identify'</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">segmontPostResponse</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.segment.io/v1/identify'</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"userId"</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span>
        <span class="s2">"traits"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"email"</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span>
          <span class="s2">"ActiveApps"</span><span class="p">:</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">activeApp</span>
        <span class="p">},</span>


        <span class="s2">"integrations"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"All"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="s2">"Woopra"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">"Intercome"</span><span class="p">:</span><span class="kc">true</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'Authorization'</span><span class="p">:</span> <span class="nx">authorization</span><span class="p">,</span> <span class="s1">'Accept'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span> <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">}</span>

    <span class="p">});</span>

  <span class="k">return</span> <span class="nx">segmontPostResponse</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>We&rsquo;ll start by adding a new custom server-side action.  This action will execute JavaScript code that sends user identification data to segment.io (and, from there, to Woopra, or Intercom, or any other interested service). The code takes two parameters - <code class="prettyprint">userId</code> and <code class="prettyprint">activeApp</code>, with the <code class="prettyprint">userId</code> being the user&rsquo;s email address. You can also send Segment.io data collected from Backand using a query to obtain the data you have stored on a given user.</p>

<h3 id="client-side-integration">Client-side Integration</h3>

<p>This code has no client-side component.</p>

<h2 id="twilio">Twilio</h2>

<p><a href="https://www.twilio.com">Twilio</a> takes care of dealing with messy telecom hardware, exposing a globally available cloud API that developers can interact with to build intelligent and complex communications systems. As your app&rsquo;s usage scales up or down, Twilio automatically scales with you.</p>

<h3 id="who-is-twilio-for">Who is Twilio for?</h3>

<p>Twilio is for anyone that needs to send SMS, MMS, or VoIP, along with a lot of other communication channels embedded into web, desktop, and mobile software.</p>

<h3 id="send-sms-with-twilio-api">Send SMS with Twilio API</h3>

<blockquote>
<p>Server-Side Action code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persisitent"><code><span class="cm">/* globals
  $http - Service for AJAX calls
  CONSTS - CONSTS.apiUrl for Backands API URL
  Config - Global Configuration
  socket - Send realtime database communication
  files - file handler, performs upload and delete of files
  request - the current http request
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// write your code here</span>
    <span class="kd">var</span> <span class="nx">ACCOUNT_SID</span> <span class="o">=</span> <span class="s1">'AC2933cadba659d1f15bd409333e3bc38b'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">AUTH_TOKEN</span> <span class="o">=</span> <span class="s1">'e924350f6eefb5dd1ae011b49d5cb5dd'</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">FROM_PHONE_NUM</span> <span class="o">=</span> <span class="s1">'GetEat'</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">basicUrl</span> <span class="o">=</span> <span class="s1">'https://api.twilio.com/2010-04-01/Accounts/'</span> <span class="o">+</span> <span class="nx">ACCOUNT_SID</span> <span class="o">+</span> <span class="s1">'/'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="s1">'Messages.json'</span> <span class="c1">// twilio have many services</span>

    <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">basicUrl</span> <span class="o">+</span> <span class="nx">action</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span>
            <span class="s1">'Body='</span> <span class="o">+</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">message</span> <span class="o">+</span>
            <span class="s1">'&amp;To='</span>  <span class="o">+</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">to</span> <span class="o">+</span>
            <span class="s1">'&amp;From='</span><span class="o">+</span> <span class="nx">FROM_PHONE_NUM</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"Accept:application/json"</span><span class="p">,</span>
            <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/x-www-form-urlencoded"</span><span class="p">,</span>
            <span class="s2">"Authorization"</span><span class="p">:</span> <span class="s1">'basic '</span> <span class="o">+</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">ACCOUNT_SID</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">AUTH_TOKEN</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">});</span>

<span class="p">}</span>
</code></pre>
<p>Twilio has an API that you can use to send SMS. By translating their provided cURL commands to Angular $http calls, you can easily integrate Twilio with Backand.</p>

<p>To send SMS with Twilio, you need to create a server side action. You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code. The example code demonstrates the on-demand option. In the Backand dashboard, open the Actions tab for one of your application&rsquo;s objects, and create a new on-demand server-side JavaScript action. Learn more how to create actions <a href="#custom-actions">here</a>. Name the action <code class="prettyprint">TwilioSendSMS</code>, add <code class="prettyprint">to</code> and <code class="prettyprint">message</code> to the Input Parameters, and paste the server-side code in the code editor.</p>

<p>In the example app we&rsquo;re building, the app&rsquo;s users can send a SMS message to a phone number. The phone number is sent, from the client side, in the <code class="prettyprint">to</code> parameter, while the message content is sent in the <code class="prettyprint">message</code> parameter.</p>

<h3 id="setup-a-free-account-in-twilio">Setup a FREE account in Twilio</h3>

<p>After you register with Twilio, you can get your Twilio phone number <a href="https://www.twilio.com/user/account/phone-numbers/getting-started">here</a>:</p>

<ol>
<li>To choose a different phone number from the one provided, click on <em>&lsquo;Don&rsquo;t like this one? Search for a different number.&rsquo;</em> and select SMS in capabilities.</li>
<li>Replace the <code class="prettyprint">FROM_PHONE_NUM</code> in the code with the Twilio phone number obtained in the prior step (dont forget the (+) sign before the number)</li>
<li>Make sure you replace the &lsquo;<code class="prettyprint">ACCOUNT_SID</code>&rsquo; and &lsquo;<code class="prettyprint">AUTH_TOKEN</code>&rsquo; in the code with your Twilio API keys (from the getting started page). Simply click on &lsquo;Show API Credentials&rsquo; on the right side of  &lsquo;Get Started with Phone Numbers,&rsquo; and than you&rsquo;ll see the <code class="prettyprint">ACCOUNT SID</code> and <code class="prettyprint">AUTH TOKEN</code> values.</li>
</ol>

<h3 id="setup-client-side-code">Setup client-side code:</h3>

<blockquote>
<p>Client-Side Code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persisitent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;'</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'TwilioSendSMS'</span><span class="p">,</span>
      <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">message</span><span class="p">:</span> <span class="s1">'Anything you can put your mind on'</span><span class="p">,</span>
        <span class="na">to</span><span class="p">:</span> <span class="s1">'&lt;your destination phone number&gt;'</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>

</code></pre>
<p>Next, add the client-side JavaScript code to your app&rsquo;s code base. Replace <code class="prettyprint">&lt;your object name&gt;</code> with the object associated with the action you created and <code class="prettyprint">&lt;your destination phone number&gt;</code> with a vaild phone number (when using Twilio trial account you first need to validate this phone number), Once this is done, you&rsquo;ll be able to easily trigger SMS via Twilio using Backand&rsquo;s custom action API.</p>

<h2 id="netmera">Netmera</h2>

<p>Netmera is a cloud based service that can be used to send Push Notifications to various platforms, among other services such as Exception reporting. It offers a friendly site where campaigns ()push notifications) can be managed and customized and a REST API to send push notifications automatically. In this guide you can find out how to get started on Netmera and send push notifications with Backand.</p>

<h3 id="get-started-with-netmera">Get Started with Netmera</h3>

<ol>
<li>Register to Netmera</li>
<li>Download the Netmera SDK from <a href="https://netmera.readme.io/docs/android-sdk-download">here</a> or their <a href="https://cp.netmera.com/nm/admin/sdkDownload/overview/android/final?isNewProject=true">starter app</a>.</li>
<li>Check out their guide to <a href="https://netmera.readme.io/docs/android-guide">set up your app/the starter app with the Netmera SDK</a></li>
<li>Follow this <a href="https://netmera.readme.io/docs/netmera-push-notification-android">Android guide</a> and <a href="https://netmera.readme.io/docs/netmera-push-notification-ios">iOS guid</a> to configure push notifications on the app and get the key from Google Cloud Messaging. If you use the starter app you only need the first 3 steps to get started (unless you want to trigger advanced features like tags).</li>
<li>For Ionic you would need to implement the SDK for <a href="https://netmera.readme.io/docs/phonegap">PhoneGap Plugin</a></li>
</ol>

<h3 id="integrating-netmera-with-backand">Integrating Netmera with Backand</h3>

<p>Netmera has a rest API that can be used to remotely send push notifications. You can integrate Netmera with Backand by using Backand server-side actions. You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code.</p>

<p>In the Backand dashboard, open the Actions tab for one of your application&rsquo;s objects, and create a new on-demand server-side JavaScript action by clicking on <code class="prettyprint">Netmera</code> under &lsquo;Push Notifications&rsquo;.</p>

<p><strong>You have just created your first push notification action!</strong></p>

<blockquote>
<p>Client-Side code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;'</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'SendPushNotification'</span><span class="p">,</span>
      <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">notificationTitle</span><span class="p">:</span> <span class="s1">'My First Push Notification'</span><span class="p">,</span>
        <span class="na">notificationContent</span><span class="p">:</span> <span class="s1">'Hello! This is my first notification!'</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p>In order to call the function from your angular app, use the following code:</p>

<p>Replace your object name with the object associated with the action you created, set a title for the &lsquo;notificationTitle&rsquo; field, write any message you want in notificationContent field and youre good to go. Now you can start sending push notifications dynamically using Backand and Netmera.</p>

<h2 id="pushwoosh">PushWoosh</h2>

<p>Pushwoosh is a cloud based service that can be used to send Push Notifications to various platforms. It offers a friendly site where push notifications can be sent and customized and an API to send push notifications automatically. In this guide you can find out how to get started on PushWoosh with an example app for Android and send push notifications with Backand.</p>

<h3 id="get-started-with-pushwoosh">Get Started with PushWoosh</h3>

<ol>
<li>Register an account in PushWoosh and proceed to create an application. Using the PushWoosh control panel, configure your application to support Android including <a href="http://docs.pushwoosh.com/docs/gcm-configuration">configuring GCM (Google Cloud Messaging</a>)</li>
<li>You can either get the starter app or to integrate in an existing app.
&gt; To get a starter app: clone the PushWoosh Android SDK:</li>
</ol>
<pre class="highlight shell"><code>git clone https://github.com/Pushwoosh/pushwoosh-android-sdk.git
</code></pre>
<blockquote>
<p>Then, open /Samples/Android-Simple directory in Android Studio and build the app.</p>
</blockquote>

<ol>
<li>To integrate in an existing app use the following <a href="http://docs.pushwoosh.com/docs/native-android-sdk">Android guide</a>  include the SDK.jar and add the relevant code to your application.

<ul>
<li><a href="http://docs.pushwoosh.com/docs/androidmanifestxml-modifications">Make the relevant changes to your AndroidManifest.xml file</a>  if you&rsquo;re using the starter app just change the App ID and Project ID.</li>
</ul></li>
<li>To integrate in an existing app use the following <a href="http://docs.pushwoosh.com/docs/apns-configuration">iOS guide</a></li>
<li>For Ionic you would need to implement the SDK for <a href="http://docs.pushwoosh.com/docs/cordova-phonegap">Cordova / PhoneGap</a> and check this example for <a href="http://docs.pushwoosh.com/docs/phonegap-build">PhoneGap Build</a></li>
</ol>

<h3 id="integrating-pushwoosh-with-backand">Integrating PushWoosh with Backand</h3>

<p>PushWoosh has an API that can be used to send Push Notifications. You can integrate PushWoosh with Backand by using Backand server-side actions. You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code.</p>

<p>In the Backand dashboard, open the Actions tab for one of your application&rsquo;s objects, and create a new on-demand server-side JavaScript action by clicking on &lsquo;PushWoosh&rsquo; under &lsquo;Push Notifications&rsquo;.</p>

<p><strong>You have just created your first push notification action!</strong></p>

<blockquote>
<p>Client-side code</p>
</blockquote>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;'</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'SendPushNotification'</span><span class="p">,</span>
      <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">notificationContent</span><span class="p">:</span> <span class="s1">'Hello! This is a push notification!'</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p>In order to call the function from your angular app, use the provided code. Replace <code class="prettyprint">&lt;your object name&gt;</code> with the object associated with the action you created, write any message you want in <code class="prettyprint">notificationContent</code> field, and youre good to go. Now you can start sending push notifications dynamically using Backand.</p>

<h2 id="facebook-messenger-bot">Facebook Messenger Bot</h2>

<p><img align="right" src="https://www.backand.com/wp-content/uploads/2016/09/bot-iphone.png"></p>

<p>Facebook recently opened up their Messenger platform to enable bots to converse with users through Facebook Apps and on Facebook Pages. In support of this, the Facebook Messenger team created a comprehensive set of <a href="https://developers.facebook.com/docs/messenger-platform/quickstart">documentation</a> describing the functionality on offer. While they offer a lot of functionality and platform-level integration for free, you still need to create a publicly-accessible application that Facebook can communicate with in order to automatically interact with your end users.</p>

<p>In this tutorial, we&rsquo;ll walk through creating your own messenger bot on the Backand backend-as-a-service system, and make it live - all in 10 minutes.</p>

<h3 id="demo">Demo</h3>

<p>You can chat with the simple bot example to see the end result at <a hreh="http://m.me/1150283998341709" target="\_blank">http://m.me/1150283998341709</a></p>

<h3 id="getting-started">Getting Started</h3>

<p>Messenger bots are programs that receive messages from an interface, process those messages, and then send results back to the caller. These results are then displayed to the user by the controlling application - Facebook Messenger in this case. A bot&rsquo;s response can be as simple as echoing text back to the user, or as complex as ordering and shipping new computer components to the end user. The only restrictions are that the bot is authenticated to communicate with Facebook, and that Facebook has approved the bot and allows it to communicate with the world at large.</p>

<p>Luckily, Backand handles the majority of the server and connectivity functionality for you, allowing you to focus on building out responsive content.</p>

<h3 id="building-the-server"><em>Building the server</em></h3>

<p>Follow these steps to build out the back-end to your bot:</p>

<ol>
<li><p>Sign up for free at <a href="https://www.backand.com">backand.com</a> (if you don&rsquo;t already have an account).</p></li>
<li><p>Create a new app in the Backand dashboard, then navigate to that app&rsquo;s management page.</p></li>
<li><p>In the new app, open menu &lsquo;Objects &ndash;&gt; Items&rsquo;, and click on the &lsquo;Actions&rsquo; tab. In the Actions tab, click on the &lsquo;Facebook Messenger Bot&rsquo; template.</p></li>
<li><p>Click &lsquo;Save&rsquo;</p></li>
</ol>

<p>At this point you have a back-end server that is ready to integrate with Facebook Messenger. However, you need to make a few more configuration changes before you&rsquo;re ready to test.</p>

<h4 id="create-a-facebook-app-and-page"><em>Create a Facebook App and Page</em></h4>

<p>Once you have the back-end and are ready to integrate, the first thing you need to do is create a Facebook Page at <a href="https://www.facebook.com/pages/create/?ref_type=pages_browser">https://www.facebook.com/pages/create/?ref_type=pages_browser</a>. This page will serve as the central integration point between your Backand application and Facebook, as the messenger bot is authorized to interact with Facebook on behalf of this page.</p>

<h5 id="facebook-app-creation">Facebook App Creation</h5>

<p>Once you have the app&rsquo;s page up and running, you need to configure the Facebook integration. To do so:</p>

<ul>
<li>Add a new app at <a href="https://developers.facebook.com/quickstarts/?platform=web">https://developers.facebook.com/quickstarts/?platform=web</a>. Name it and click &ldquo;Create New Facebook App ID&rdquo;:</li>
</ul>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-create-new-app.png" alt="image" /></p>

<ul>
<li>Add an email address, select your app&rsquo;s category, and add a web site for your app (any URL is OK):</li>
</ul>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-create-new-app-info.png" alt="image" /></p>

<ul>
<li>Next, skip the quick start and go to the App Dashboard and click &lsquo;Add Product&rsquo; under the heading &lsquo;Product Settings&rsquo;. Once there, select &lsquo;Messenger&rsquo; from the available options:</li>
</ul>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-add-new-product-1.png" alt="image" /></p>

<h5 id="setup-webhooks"><em>Setup Webhooks</em></h5>

<p>Once the app page is created, and the app is registered, you need to tell Facebook where to send its messages for processing. You can do this with the following steps:</p>

<ul>
<li>In the &lsquo;Webhooks&rsquo; section, click &lsquo;Setup Webhooks&rsquo;.</li>
</ul>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-set-webhook1.png" alt="image" /></p>

<ul>
<li>Enter the URL for the webhook - this should link back to your Backand application, and will resemble the below:</li>
</ul>
<pre class="highlight shell"><code>https://api.backand.com/1/objects/action/items?
<span class="nv">name</span><span class="o">=</span>FBMessengerBot&amp;Authorization<span class="o">=</span>basic+&lt;master token&gt;:&lt;user key&gt;
</code></pre>
<p><em>Note:</em> The webhook URL uses Backand&rsquo;s <a href="http://docs.backand.com/en/latest/apidocs/security/index.html#basic-authentication">basic authentication</a>.
You can find the &lsquo;&lt;master token&gt;&rsquo; in the &lsquo;Security &amp; Auth &ndash;&gt; Social &amp; Keys&rsquo; section.
It also requires a &lsquo;&lt;user key&gt;&rsquo; for your app - you can find this in the &lsquo;Security &amp; Auth &ndash;&gt; Team&rsquo; section. Simply click on the key icon near one of the Admins to obtain the user key.</p>

<ul>
<li><p>Verify Token: my_test_token</p></li>
<li><p>Select <em>message_deliveries</em>, <em>messages</em>, <em>messaging_optins</em>, and <em>messaging_postbacks</em> under Subscription Fields.</p></li>
</ul>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-setup-webhook.png" alt="image" /></p>

<h5 id="get-a-page-access-token"><em>Get a Page Access Token</em></h5>

<p>Once you&rsquo;ve configured the app in Facebook, it&rsquo;s time to tie it back into your Backand application. In the Token Generation section, select your Page. A &lsquo;Page Access Token&rsquo; will be generated for you. Copy this &lsquo;Page Access Token&rsquo;, and navigate back to your Backand app. Open the &lsquo;Action&rsquo; section of your &lsquo;Items&rsquo; object, and paste the token into the Backand Action where indicated (PAGE_ACCESS_TOKEN).</p>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-select-page.png" alt="image" /></p>

<h5 id="subscribe-the-app-to-the-page"><em>Subscribe the App to the Page</em></h5>

<p>Finally, you need to subscribe to the webhooks available for your page. This is managed in the &lsquo;Webhooks&rsquo; section of the Facebook configuration:</p>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-page-subscribe.png" alt="image" /></p>

<h4 id="run-the-bot"><em>Run the Bot</em></h4>

<p>At this point, you&rsquo;re ready to test your bot! Navigate to your Facebook Page and send it a message using Facebook Messenger. You should see the same message echoed back to you with a prefix of &ldquo;Back&amp; bot says:&rdquo;. This is also sent to the javascript console for immediate analysis.</p>

<p><img src="https://www.backand.com/wp-content/uploads/2016/09/bot-facebook-page.png" alt="image" /></p>

<p><strong>At this point your basic bot is working. From here, you can customize the bot&rsquo;s server side to build out functionality for your users</strong></p>

<h3 id="how-to-share-your-bot">How to share your bot</h3>

<p>A bot is only useful if people choose to interact with it. Below are some methods you can use to advertise your bot and draw in users.</p>

<h4 id="add-a-chat-button-to-your-webpage"><em>Add a chat button to your webpage</em></h4>

<p>As a part of their initial documentation, Facebook provided an easy method to add a Chat button to your website. The documentation on how to do this is available <a href="https://developers.facebook.com/docs/messenger-platform/plugin-reference">here</a>.</p>

<h5 id="create-a-shortlink"><em>Create a shortlink</em></h5>

<p>You can also implement a shortlink that can be used to initiate a chat with your app. Simply use a URL of the form &lsquo;https://m.me/&lt;PAGE_USERNAME&gt;&rsquo; to begin a Messenger chat.</p>

<h4 id="whats-next">What&rsquo;s next?</h4>

<p>At this point, you have a chatbot interacting with Facebook Messenger, driven by Backand as a back-end. You can customize the bot&rsquo;s code to meet your needs by following the information available in the following section of <em>Customize the Bot&rsquo;s Code in a Backand Action</em>.</p>

<p>You can also review Facebook&rsquo;s <a href="https://developers.facebook.com/docs/messenger-platform/product-overview/setup">complete guide on Messenger integration</a>, which provides more comprehensive detail on the platform&rsquo;s capabilities. These can be used to enhance your message responses, adding web-enabled content that your users can follow.</p>

<p>Eventually, you&rsquo;ll want to get your bot approved for use by the public. You can find out how to do that <a href="https://developers.facebook.com/docs/messenger-platform/app-review">here</a>.</p>

<p>Finally, you can enhance your app&rsquo;s intelligence with an AI integration. Find out how to get started at <a href="https://wit.ai">Wit.ai</a>!</p>

<h3 id="customizing-the-bots-code-in-a-backand-action">Customizing the Bot&rsquo;s Code in a Backand Action</h3>

<h4 id="receive-messages"><em>Receive Messages</em></h4>

<p>All callbacks and webhooks from Facebook will end up in your object&rsquo;s Facebook Action code. The JavaScript for this action is solely responsible for listening to the incoming POST calls, and responding appropriately. The template code handles all webhooks from Facebook by default. For example, receiving messages is handled by looking for the &lsquo;messagingEvent.message&rsquo; field in the webhook, and then calling the &lsquo;receivedMessage()&rsquo; function as follows:</p>
<pre class="highlight javascript tab-javascript"><code><span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span> <span class="o">==</span> <span class="s2">"POST"</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">object</span> <span class="o">==</span> <span class="s1">'page'</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">// Iterate over each entry</span>
        <span class="c1">// There may be multiple if batched</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">entry</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">pageEntry</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">pageID</span> <span class="o">=</span> <span class="nx">pageEntry</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">timeOfEvent</span> <span class="o">=</span> <span class="nx">pageEntry</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>

            <span class="c1">// Iterate over each messaging event</span>
            <span class="nx">pageEntry</span><span class="p">.</span><span class="nx">messaging</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">messagingEvent</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">messagingEvent</span><span class="p">.</span><span class="nx">optin</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">//receivedAuthentication(messagingEvent);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">messagingEvent</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">receivedMessage</span><span class="p">(</span><span class="nx">messagingEvent</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">messagingEvent</span><span class="p">.</span><span class="nx">delivery</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">//receivedDeliveryConfirmation(messagingEvent);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">messagingEvent</span><span class="p">.</span><span class="nx">postback</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">receivedPostback</span><span class="p">(</span><span class="nx">messagingEvent</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Webhook received unknown messagingEvent: "</span><span class="p">,</span> <span class="nx">messagingEvent</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h4 id="send-a-text-message"><em>Send a Text Message</em></h4>

<p>In receivedMessage, we&rsquo;ve added logic that can send a message back to the user. The default behavior is to echo back the text that was received, with some static modifications (&lsquo;Back&amp; bot says&rsquo;&hellip;):</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">receivedMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">senderID</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">sender</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">recipientID</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">recipient</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">timeOfMessage</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Received message for user"</span> <span class="o">+</span> <span class="nx">senderID</span> <span class="o">+</span> <span class="s2">" and page "</span> <span class="o">+</span> <span class="nx">recipientID</span> <span class="o">+</span> <span class="s2">" at "</span> <span class="o">+</span> <span class="nx">timeOfMessage</span> <span class="o">+</span> <span class="s2">" with message"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">message</span><span class="p">));</span>

    <span class="kd">var</span> <span class="nx">messageId</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nx">mid</span><span class="p">;</span>

    <span class="c1">// You may get a text or attachment but not both</span>
    <span class="kd">var</span> <span class="nx">messageText</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">messageAttachments</span> <span class="o">=</span> <span class="nx">message</span><span class="p">.</span><span class="nx">attachments</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">messageText</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// If we receive a text message, check to see if it matches any special</span>
    <span class="c1">// keywords and send back the corresponding example. Otherwise, just echo</span>
    <span class="c1">// the text we received.</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">messageText</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">case</span> <span class="s1">'image'</span><span class="p">:</span>
            <span class="c1">//sendImageMessage(senderID);</span>
            <span class="k">break</span><span class="p">;</span>

          <span class="k">case</span> <span class="s1">'button'</span><span class="p">:</span>
            <span class="c1">//sendButtonMessage(senderID);</span>
            <span class="k">break</span><span class="p">;</span>

          <span class="k">case</span> <span class="s1">'backand'</span><span class="p">:</span>
          <span class="k">case</span> <span class="s1">'Backand'</span><span class="p">:</span>
            <span class="nx">sendGenericMessage</span><span class="p">(</span><span class="nx">senderID</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>

          <span class="k">case</span> <span class="s1">'receipt'</span><span class="p">:</span>
            <span class="c1">//sendReceiptMessage(senderID);</span>
            <span class="k">break</span><span class="p">;</span>

          <span class="nl">default</span><span class="p">:</span>
            <span class="nx">sendTextMessage</span><span class="p">(</span><span class="nx">senderID</span><span class="p">,</span> <span class="nx">messageText</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">messageAttachments</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">sendTextMessage</span><span class="p">(</span><span class="nx">senderID</span><span class="p">,</span> <span class="s2">"Message with attachment received"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<p><em>sendTextMessage</em> formats the message to be sent to Facebook, then calls the appropriate API endpoint:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">sendTextMessage</span><span class="p">(</span><span class="nx">recipientId</span><span class="p">,</span> <span class="nx">messageText</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">messageData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">recipient</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">id</span><span class="p">:</span> <span class="nx">recipientId</span>
        <span class="p">},</span>
        <span class="na">message</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">text</span><span class="p">:</span> <span class="s2">"Back&amp; bot says: "</span> <span class="o">+</span> <span class="nx">messageText</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">callSendAPI</span><span class="p">(</span><span class="nx">messageData</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
<p><em>callSendAPI</em> calls the Send API to send the message back to the user:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">callSendAPI</span><span class="p">(</span><span class="nx">messageData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span><span class="p">{</span>

        <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
            <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
            <span class="na">url</span><span class="p">:</span><span class="s2">"https://graph.facebook.com/v2.6/me/messages"</span><span class="p">,</span>
            <span class="na">params</span><span class="p">:{</span>
                <span class="s2">"access_token"</span><span class="p">:</span> <span class="nx">PAGE_ACCESS_TOKEN</span>
            <span class="p">},</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">messageData</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:{</span><span class="s2">"Content-Type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">}</span>
        <span class="p">});</span>

        <span class="kd">var</span> <span class="nx">recipientId</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">recipient_id</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">messageId</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">message_id</span><span class="p">;</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Successfully sent generic message with id "</span> <span class="o">+</span> <span class="nx">messageId</span> <span class="o">+</span> <span class="s2">" to recipient "</span> <span class="o">+</span> <span class="nx">recipientId</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">"Unable to send message."</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre>
<h4 id="send-a-structured-message"><em>Send a Structured Message</em></h4>

<p><em>receivedMessage</em> can also send back other kinds of messages if it sees certain keywords. For example, if you send the message &lsquo;backand&rsquo;, it will call <code class="prettyprint">sendGenericMessage()</code> - a function that sends back a Structured Message with a generic template.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">sendGenericMessage</span><span class="p">(</span><span class="nx">recipientId</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">messageData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">recipient</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="nx">recipientId</span>
        <span class="p">},</span>
        <span class="na">message</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">attachment</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">type</span><span class="p">:</span> <span class="s2">"template"</span><span class="p">,</span>
                <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">template_type</span><span class="p">:</span> <span class="s2">"generic"</span><span class="p">,</span>
                    <span class="na">elements</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="na">title</span><span class="p">:</span> <span class="s2">"Messanger BAAS"</span><span class="p">,</span>
                        <span class="na">subtitle</span><span class="p">:</span> <span class="s2">"Backand as a service for Facebook Messanger"</span><span class="p">,</span>
                        <span class="na">item_url</span><span class="p">:</span> <span class="s2">"https://www.backand.com/features/"</span><span class="p">,</span>
                        <span class="na">image_url</span><span class="p">:</span> <span class="s2">"https://www.backand.com/wp-content/uploads/2016/01/endless.gif"</span><span class="p">,</span>
                        <span class="na">buttons</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="na">type</span><span class="p">:</span> <span class="s2">"web_url"</span><span class="p">,</span>
                            <span class="na">url</span><span class="p">:</span> <span class="s2">"https://www.backand.com/features/"</span><span class="p">,</span>
                            <span class="na">title</span><span class="p">:</span> <span class="s2">"Open Web URL"</span>
                        <span class="p">},</span> <span class="p">{</span>
                            <span class="na">type</span><span class="p">:</span> <span class="s2">"postback"</span><span class="p">,</span>
                            <span class="na">title</span><span class="p">:</span> <span class="s2">"Call Postback"</span><span class="p">,</span>
                            <span class="na">payload</span><span class="p">:</span> <span class="s2">"Payload for first bubble"</span><span class="p">,</span>
                        <span class="p">}],</span>
                    <span class="p">},</span> <span class="p">{</span>
                        <span class="na">title</span><span class="p">:</span> <span class="s2">"3rd Party Integrations"</span><span class="p">,</span>
                        <span class="na">subtitle</span><span class="p">:</span> <span class="s2">"Connect your Bot to 3rd party services and applications"</span><span class="p">,</span>
                        <span class="na">item_url</span><span class="p">:</span> <span class="s2">"https://www.backand.com/integrations/"</span><span class="p">,</span>
                        <span class="na">image_url</span><span class="p">:</span> <span class="s2">"https://www.backand.com/wp-content/uploads/2016/01/3.png"</span><span class="p">,</span>
                        <span class="na">buttons</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="na">type</span><span class="p">:</span> <span class="s2">"web_url"</span><span class="p">,</span>
                            <span class="na">url</span><span class="p">:</span> <span class="s2">"https://www.backand.com/integrations/"</span><span class="p">,</span>
                            <span class="na">title</span><span class="p">:</span> <span class="s2">"Open Web URL"</span>
                        <span class="p">},</span> <span class="p">{</span>
                            <span class="na">type</span><span class="p">:</span> <span class="s2">"postback"</span><span class="p">,</span>
                            <span class="na">title</span><span class="p">:</span> <span class="s2">"Call Postback"</span><span class="p">,</span>
                            <span class="na">payload</span><span class="p">:</span> <span class="s2">"Payload for second bubble"</span><span class="p">,</span>
                        <span class="p">}]</span>
                    <span class="p">}]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">callSendAPI</span><span class="p">(</span><span class="nx">messageData</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
<h4 id="handle-postbacks"><em>Handle Postbacks</em></h4>

<p>Structured messages use &lsquo;postbacks&rsquo; to communicate with your application when a user clicks on one of the provided enhanced objects. The postback message contains the payload that was created for the button in the original Structured Message. Buttons on Structured Messages support both opening URLs and communicating via postbacks.</p>

<p>In our webhook handler, we handle the postback by calling the function &lsquo;receivedPostback()&rsquo;:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">....</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">messagingEvent</span><span class="p">.</span><span class="nx">postback</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">receivedPostback</span><span class="p">(</span><span class="nx">messagingEvent</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">...</span>
</code></pre>
<p>This function sends a message back saying that the postback was called:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">receivedPostback</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">senderID</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">sender</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">recipientID</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">recipient</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">timeOfPostback</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">;</span>

    <span class="c1">// The 'payload' param is a developer-defined field which is set in a postback</span>
    <span class="c1">// button for Structured Messages.</span>
    <span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">postback</span><span class="p">.</span><span class="nx">payload</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Received postback for user "</span> <span class="o">+</span> <span class="nx">senderID</span> <span class="o">+</span> <span class="s2">" and page "</span> <span class="o">+</span> <span class="nx">recipientID</span> <span class="o">+</span> <span class="s2">"with payload '"</span> <span class="o">+</span> <span class="nx">payload</span> <span class="o">+</span> <span class="s2">"' "</span> <span class="o">+</span>
    <span class="s2">"at "</span> <span class="o">+</span> <span class="nx">timeOfPostback</span><span class="p">);</span>

    <span class="c1">// When a postback is called, we'll send a message back to the sender to</span>
    <span class="c1">// let them know it was successful</span>
    <span class="nx">sendTextMessage</span><span class="p">(</span><span class="nx">senderID</span><span class="p">,</span> <span class="s2">"Postback called"</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
<p>From here, you can expand the bot to provide a wealth of functionality to your page&rsquo;s users. Simply expand upon the above code until it meets your requirements.</p>

<h2 id="salesforceiq">SalesforceIQ</h2>

<p>Building and maintaining customer relationships is crucial for driving sales to your platform. However, it can also be a complex process requiring integrating data from multiple sources and, more importantly, ensuring that data is accessible when it is needed. Customer Relationship Management (CRM) software is designed to make this data management and integration process much easier, providing you with the tools you need to drive customers through your sales funnel. In this article, we&rsquo;ll look at integrating a Backand application with Salesforce IQ, providing you with all of the tools you need to effectively leverage your customer data in your Backand application.</p>

<h3 id="what-is-salesforceiq">What is SalesforceIQ?</h3>

<p><a href="https://www.salesforceiq.com/">SalesforceIQ</a> is an out-of-the-box CRM solution that quickly gives you access to dynamic information tied into a full CRM solution. With Automatic Data Capture and enterprise-level intelligence under the hood, SalesforceIQ acts like your own personal assistant so you can focus on what matters most: selling. SalesforceIQ, in addition to providing easy integrations with tools like Google and Microsoft Exchange, also gives you the capability to dynamically access and manage your data through a series of robust APIs.</p>

<h3 id="connecting-a-backand-application-with-salesforceiq">Connecting a Backand application with SalesforceIQ</h3>

<p>Integrating Backand and SalesforceIQ is as simple as leveraging the full-featured <a href="https://api.salesforceiq.com/">API</a> provided by Salesforce from within your Backand application. While traditionally you&rsquo;d need to make these calls to the API from a server, you can achieve the same functionality in Backand by using our custom template action. This action provides an easy-to-use code template for making calls to the SalesforceIQ API, letting you update your user tracking data based upon user activity in your Backand app, or even update your Backand app&rsquo;s UI based upon what you know about your user in SalesforceIQ.</p>

<p>Working with the <a href="https://api.salesforceiq.com/">SalesforceIQ API</a> provides you with full capabilities to create, retrieve, and update data on your users, as well as manage their information in SalesforceIQ. Communicating with their API is as simple as translating the cURL commands provided by Salesforce in their documentation into the appropriate $http calls that you can make from JavaScript. Simply provide the required authentication and identification headers, construct the URL, make the call, and handle the response when it arrives, dispatching it either directly to your application via a synchronous function call return, or emitting the data as an event using our Socket-based real-time communications functionality.</p>

<h3 id="the-salesforceiq-action-template">The SalesforceIQ Action Template</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
  $http - Service for AJAX calls
  CONSTS - CONSTS.apiUrl for Backands API URL
  Config - Global Configuration
  socket - Send realtime database communication
  files - file handler, performs upload and delete of files
  request - the current http request
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="s1">'-- YOUR API --'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="s1">'-- YOUR SECRET --'</span><span class="p">;</span>

    <span class="c1">//get accounts</span>
    <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span> <span class="s2">"https://api.salesforceiq.com/v2/accounts"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span>
            <span class="s2">"Authorization"</span><span class="p">:</span> <span class="s1">'basic '</span> <span class="o">+</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">API_KEY</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">API_SECRET</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>We have created an action template that will give you jump start with salesforceIQ. You can either trigger this action from an object&rsquo;s database transaction event actions, or create a new on-demand action that you can call from your app&rsquo;s client code. The sample JavaScript is provided by the template action, which is available as &ldquo;SalesforceIQ&rdquo; in the &ldquo;CRM &amp; ERP&rdquo; section of action templates.:</p>

<p>This code provides you with all of the basic tools you need to get connected to the SalesforceIQ API. It takes in your SalesforceIQ API Key and API Secret, and performs a call to the &ldquo;/accounts&rdquo; endpoint to fetch accounts.</p>

<h3 id="connecting-this-action-to-your-salesforceiq-account">Connecting this action to your SalesforceIQ account</h3>

<p>To connect to SalesforceIQ, you&rsquo;ll first need to register for an account if you haven&rsquo;t done so. Once you&rsquo;ve signed up, follow these steps to obtain your API Key and API Secret:</p>

<ol>
<li>Open Settings under the gear icon</li>
<li>Open the &lsquo;Integration&rsquo; tab under &lsquo;My Account Settings&rsquo;</li>
<li>Under &lsquo;Create New Custom Integration,&rsquo; click &lsquo;Custom&rsquo;</li>
<li>Set the name to &lsquo;Backand API,&rsquo; and provide a description</li>
<li>Copy the &lsquo;API Key&rsquo; and &lsquo;API Secret&rsquo; from the integration page into the JavaScript Action code</li>
<li>Click &lsquo;Save&rsquo;</li>
</ol>

<p>When this is completed, you should now be able to access all of your SalesforceIQ accounts from the custom JavaScript action.</p>

<h3 id="setup-client-side-code">Setup client-side code:</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;'</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'&lt;your action name&gt;'</span>
    <span class="p">}</span>
<span class="p">});</span>

</code></pre>
<p>Once you&rsquo;ve configured the action to connect to SalesforceIQ, you&rsquo;ll need to call the action from your client-side code. To do so, use the following JavaScript to construct a GET request and trigger your SalesforceIQ action:</p>

<p>Simply replace &lsquo;your object name&rsquo; with the object that contains your SalesforceIQ custom action, and replace &lsquo;your action name&rsquo; with the name of the action that you provided while creating the integration.</p>

<p>With these changes, you&rsquo;re now able to pull in any and all SalesforceIQ accounts available via their API! You can use a similar pattern to construct additional calls to the SalesforceIQ API - simply replace the URL and parameters in the custom SalesforceIQ action with the URL and parameters for the object you want to retrieve.</p>

<h2 id="salesforce-crm">Salesforce CRM</h2>

<p>As mentioned in our article on integrating with SalesforceIQ, building and maintaining customer relationships is crucial for driving sales to your platform. However, it can also be a complex process requiring integrating data from multiple sources and, more importantly, ensuring that data is accessible when it is needed. Customer Relationship Management (CRM) software is designed to make this data management and integration process much easier, providing you with the tools you need to drive customers through your sales funnel. In this article, we&rsquo;ll look at integrating a Backand application with Salesforce CRM, providing you with all of the tools you need to effectively leverage your customer data in your Backand application.</p>

<h3 id="what-is-salesforce-crm">What is Salesforce CRM?</h3>

<p><a href="https://www.salesforce.com/crm">Salesforce CRM</a> is the world&rsquo;s foremost CRM solution, and gives your sales teams the tools they need to close deals. Salesforce CRM is also built in the cloud, meaning that your sales team can increase their productivity and keep the sales pipeline filled with solid leads, all without the need to deploy additional hardware or work around speed limitations. Through Salesforce&rsquo;s <a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_what_is_rest_api.htm">REST API</a> you can get easy programmatic access to all of your customer data.</p>

<h3 id="connecting-a-backand-application-with-salesforce-crm">Connecting a Backand application with Salesforce CRM</h3>

<p>Integrating Backand and SalesforceIQ is as simple as leveraging the full-featured <a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_what_is_rest_api.htm">REST API</a> provided by Salesforce from within your Backand application. While traditionally you&rsquo;d need to make these calls to the API from a server, you can achieve the same functionality in Backand by using our custom template action. This action provides an easy-to-use code template for making calls to the Salesforce REST API, letting you update your user tracking data based upon user activity in your Backand app, or even update your Backand app&rsquo;s UI based upon what you know about your user in Salesforce.</p>

<h3 id="the-salesforce-crm-action-template">The Salesforce CRM Action Template</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="cm">/* globals
  $http - Service for AJAX calls
  CONSTS - CONSTS.apiUrl for Backands API URL
  Config - Global Configuration
  socket - Send realtime database communication
  files - file handler, performs upload and delete of files
  request - the current http request
*/</span>
<span class="s1">'use strict'</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">backandCallback</span><span class="p">(</span><span class="nx">userInput</span><span class="p">,</span> <span class="nx">dbRow</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// write your code here</span>
    <span class="kd">var</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s2">"https://eu11.salesforce.com/services/data/v37.0/"</span><span class="p">;</span>

  <span class="c1">// This function manages authenticating with Salesforce, providing the access</span>
  <span class="c1">// token as a return value</span>
    <span class="kd">var</span> <span class="nx">loginSalesForce</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="s2">"-- Your Client Id --"</span><span class="p">;</span> <span class="c1">//Consumer Key</span>
        <span class="kd">var</span> <span class="nx">secret</span> <span class="o">=</span> <span class="s2">"-- Your Secret Id --"</span><span class="p">;</span> <span class="c1">//Consumer Secret</span>

        <span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s2">"-- User Username --"</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s2">"-- User Password --"</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">loginUrl</span> <span class="o">=</span> <span class="s2">"https://login.salesforce.com/services/oauth2/token"</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
            <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
            <span class="na">url</span><span class="p">:</span> <span class="nx">loginUrl</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="s2">"grant_type=password"</span> <span class="o">+</span>
                <span class="s2">"&amp;username="</span> <span class="o">+</span> <span class="nx">username</span> <span class="o">+</span>
                <span class="s2">"&amp;password="</span> <span class="o">+</span> <span class="nx">password</span> <span class="o">+</span>
                <span class="s2">"&amp;client_id="</span> <span class="o">+</span>  <span class="nx">client</span> <span class="o">+</span>
                <span class="s2">"&amp;client_secret="</span> <span class="o">+</span> <span class="nx">secret</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span>
                <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/x-www-form-urlencoded"</span>
            <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">access_token</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">access_token</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//get access token first. Check if access token exists in cookie session</span>
    <span class="kd">var</span> <span class="nx">accessToken</span> <span class="o">=</span> <span class="nx">cookie</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'sf_access_token'</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">accessToken</span> <span class="o">==</span> <span class="kc">null</span><span class="p">){</span>
        <span class="nx">accessToken</span> <span class="o">=</span> <span class="nx">loginSalesForce</span><span class="p">();</span>
        <span class="nx">cookie</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">'sf_access_token'</span><span class="p">,</span> <span class="nx">accessToken</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//get list of Opportunities</span>
    <span class="kd">var</span> <span class="nx">opps</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">({</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="s2">"sobjects/Opportunity"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Bearer "</span> <span class="o">+</span> <span class="nx">accessToken</span><span class="p">}</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="nx">opps</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>We have created an action template that will give you jump start with salesforceCRM. You can either trigger this action with an object&rsquo;s CRUD event handler, or call it on-demand from your client code. The following is the content of the ready action template call
&ldquo;salesforce CRM&rdquo; under the &ldquo;CRM &amp; ERP&rdquo; section:</p>

<aside class="notice">The above code fetches the access token every time you call the action. You can improve the performance of this call by caching the token into a Backand Server-Side Cookie, and only performing the retrieval when the token has expired.</aside>

<h3 id="setup-access-and-get-client-and-secret-keys">Setup access and get client and secret keys</h3>

<p>Follow these steps to obtain your Salesforce CRM authentication information:</p>

<ol>
<li>Sign in to Salesforce CRM as a user with Admin rights</li>
<li>Open Setup, found under the gear icon</li>
<li>Open App Manager</li>
<li>Click on &lsquo;New Connected App&rsquo;</li>
<li>Provide &lsquo;Connected App Name&rsquo;, &lsquo;API Name&rsquo; and &lsquo;Contact Email&rsquo;</li>
<li>Check &lsquo;Enable OAuth Settings&rsquo;

<ol>
<li>Check &lsquo;Enable for Device Flow&rsquo;</li>
<li>Under &lsquo;Selected OAuth Scopes&rsquo; select &lsquo;Full Access,&rsquo; or any other permissions you need</li>
</ol></li>
<li>Click &lsquo;Save&rsquo;</li>
<li>Copy &lsquo;Consumer Key&rsquo; into the client variable in the code</li>
<li>Copy &lsquo;Consumer Secret&rsquo; into the secret variable in the code</li>
</ol>

<p>Once you&rsquo;ve obtained the consumer key and the consumer secret, you&rsquo;ll need to enable server-side security in Salesforce. To do so, follow these steps:</p>

<ol>
<li>From App Manager, select your new App and Click &lsquo;Manage&rsquo;</li>
<li>Click &lsquo;Edit Polices&rsquo;</li>
<li>Change &lsquo;IP Relaxation&rsquo; to &lsquo;Relax IP Restriction,&rsquo; or add Backand&rsquo;s IP to your organization&rsquo;s IP restrictions</li>
<li>Change &lsquo;Timeout Value&rsquo; to 24 hours</li>
<li>Click &lsquo;Save&rsquo;</li>
</ol>

<p>With that completed, you should now have full access to your CRM objects using the Salesforce REST API.</p>

<h3 id="setup-client-side-code">Setup client-side code:</h3>
<pre class="highlight javascript tab-javascript--persistent"><code><span class="k">return</span> <span class="nx">$http</span> <span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">Backand</span><span class="p">.</span><span class="nx">getApiUrl</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/1/objects/action/&lt;your object name&gt;'</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'&lt;your action name&gt;'</span>
    <span class="p">}</span>
<span class="p">});</span>

</code></pre>
<p>Once you&rsquo;ve configured the action to connect to Salesforce, you&rsquo;ll need to call the action from your client-side code. To do so, use the following JavaScript to construct a GET request and trigger your Salesforce action:</p>

<p>Simply replace &lsquo;your object name&rsquo; with the object that contains your Salesforce custom action, and replace &lsquo;your action name&rsquo; with the name of the action that you provided while creating the integration.</p>

<p>With these changes, you&rsquo;re now able to pull in any and all Salesforce accounts available via their API! You can use a similar pattern to construct additional calls to the Salesforce API - simply replace the URL and parameters in the custom SalesforceIQ action with the URL and parameters for the object you want to retrieve.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
